'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}},"es7","es3");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.initSymbol=function(){};$jscomp.initSymbolIterator=function(){};$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b,c){return c})}},"es8","es3");function App(){}App.componentManager=[];try{App.fs=require("fs"),App.gui=require("nw.gui"),App.clipboard=App.gui.Clipboard.get(),App.args=App.gui.App.argv}catch(a){App.args=[]}App.initialize=function(a){App.fullscreen=!1;Keyboard.initialize();Mouse.initialize();App.main=a;App.main.initialize();App.delta=0;App.time=Date.now();App.loop()};
App.loop=function(){requestAnimationFrame(App.loop);Mouse.update();Keyboard.update();App.delta=Date.now()-App.time;App.time+=App.delta;App.main.update();App.main.render()};App.resize=function(){App.main.resize()};
App.setFullscreen=function(a,b){(App.fullscreen=a)?(void 0===b&&(b=document.body),b.requestFullscreen=b.requestFullscreen||b.mozRequestFullScreen||b.webkitRequestFullscreen||b.msRequestFullscreen,b.requestFullscreen&&b.requestFullscreen()):(document.exitFullscreen=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen,document.exitFullscreen&&document.exitFullscreen())};App.loadMain=function(a){App.main=a;App.main.initialize(App.canvas)};
App.webvrAvailable=function(){return void 0!==navigator.getVRDisplays};App.exit=function(){void 0!==App.gui&&(App.gui.App.closeAllWindows(),App.gui.App.quit())};
function include(a,b){if(a.endsWith(".js")){var c=document.createElement("script");c.src=a;c.type="text/javascript";c.async=!1;b&&(c.onload=b);document.body.appendChild(c)}else if(a.endsWith(".css"))b=document.createElement("link"),b.rel="stylesheet",b.href=a,document.body.appendChild(b);else if(a.endsWith("*")){if(void 0!==App.fs){a=a.replace("*","");c=App.fs.readdirSync(a);for(var d=0;d<c.length;d++)include(a+c[d])}}else if(void 0!==App.fs){a+="/";try{for(c=App.fs.readdirSync(a),d=0;d<c.length;d++)include(a+
c[d])}catch(e){}}}
var BufferAttribute=THREE.BufferAttribute,BufferGeometry=THREE.BufferGeometry,Clock=THREE.Clock,Face3=THREE.Face3,Geometry=THREE.Geometry,Object3D=THREE.Object3D,Raycaster=THREE.Raycaster,Material=THREE.Material,LineBasicMaterial=THREE.LineBasicMaterial,LineDashedMaterial=THREE.LineDashedMaterial,MeshPhysicalMaterial=THREE.MeshPhysicalMaterial,MultiMaterial=THREE.MultiMaterial,PointsMaterial=THREE.PointsMaterial,RawShaderMaterial=THREE.RawShaderMaterial,SpriteMaterial=THREE.SpriteMaterial,Box2=THREE.Box2,
Box3=THREE.Box3,Color=THREE.Color,Euler=THREE.Euler,Frustum=THREE.Frustum,Matrix3=THREE.Matrix3,Matrix4=THREE.Matrix4,Plane=THREE.Plane,Quarternion=THREE.Quarternion,Ray=THREE.Ray,Sphere=THREE.Sphere,Spline=THREE.Spline,Triangle=THREE.Triangle,Vector2=THREE.Vector2,Vector3=THREE.Vector3,Vector4=THREE.Vector4,LOD=THREE.LOD,LensFlare=THREE.LensFlare;THREE.Object3D.prototype.folded=!1;THREE.Object3D.prototype.hidden=!1;THREE.Object3D.prototype.initialize=function(){for(var a=0;a<this.children.length;a++)this.children[a].initialize()};
THREE.Object3D.prototype.update=function(){for(var a=0;a<this.children.length;a++)this.children[a].update()};THREE.Object3D.prototype.dispose=function(){for(var a=0;a<this.children.length;a++)this.children[a].dispose()};THREE.Object3D.prototype.removeAll=function(){for(var a=this.children.length-1;-1<a;a--)this.remove(this.children[a])};THREE.Object3D.prototype.destroy=function(){for(;0<this.children.length;)this.children[0].destroy();null!==this.parent&&(this.dispose&&this.dispose(),this.parent.remove(this))};
THREE.Object3D.prototype.toJSON=function(a,b){function c(g){var k=[],l;for(l in g){var m=g[l];delete m.metadata;k.push(m)}return k}var d=void 0===a,e={};d&&(a={fonts:{},videos:{},images:{},audio:{},geometries:{},materials:{},textures:{},asset_objects:{}},e.metadata={version:Editor.VERSION,type:"GorlotProgram"});var f={};f.uuid=this.uuid;f.type=this.type;f.name=this.name;f.folded=this.folded;f.hidden=this.hidden;f.castShadow=this.castShadow;f.receiveShadow=this.receiveShadow;f.visible=this.visible;
f.matrixAutoUpdate=this.matrixAutoUpdate;f.matrix=this.matrix.toArray();void 0!==this.components&&(f.components=this.components);"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData);void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),f.geometry=this.geometry.uuid);void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),f.material=this.material.uuid);
void 0!==b&&b(a,f);if(0<this.children.length)for(f.children=[],b=0;b<this.children.length;b++)(this.children[b]instanceof BlockScript||!this.children[b].hidden)&&f.children.push(this.children[b].toJSON(a).object);d&&(e.geometries=c(a.geometries),e.materials=c(a.materials),e.textures=c(a.textures),e.images=c(a.images),e.videos=c(a.videos),e.audio=c(a.audio),e.fonts=c(a.fonts),e.asset_objects=c(a.asset_objects));e.object=f;return e};
THREE.Vector3.fromJSON=function(a){return new THREE.Vector3(a.x,a.y,a.z)};THREE.Vector3.prototype.toJSON=function(){return{x:this.x,y:this.y,z:this.z}};THREE.Vector2.fromJSON=function(a){return new THREE.Vector2(a.x,a.y)};THREE.Vector2.prototype.toJSON=function(){return{x:this.x,y:this.y}};THREE.Color.fromJSON=function(a){return new THREE.Color(a.r,a.g,a.b)};
THREE.Texture.prototype.toJSON=function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:Editor.VERSION,type:"Texture"},uuid:this.uuid,name:this.name,category:this.category,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};return a.textures[this.uuid]=b};
THREE.LightShadow.prototype.toJSON=function(){var a={};a.bias=this.bias;a.radius=this.radius;a.mapSize={};a.mapSize.x=this.mapSize.x;a.mapSize.y=this.mapSize.y;a.camera={};a.camera.top=this.camera.top;a.camera.bottom=this.camera.bottom;a.camera.far=this.camera.far;a.camera.near=this.camera.near;a.camera.left=this.camera.left;a.camera.right=this.camera.right;return a};
THREE.LightShadow.prototype.fromJSON=function(a){void 0!==a.bias&&(this.bias=a.bias);void 0!==a.radius&&(this.radius=a.radius);if(void 0!==a.mapSize){var b=a.mapSize;this.mapSize.set(b.x,b.y)}void 0!==a.camera&&(a=a.camera,this.camera.top=a.top,this.camera.bottom=a.bottom,this.camera.left=a.left,this.camera.right=a.right,this.camera.near=a.near,this.camera.far=a.far)};THREE.Fog.NONE=0;THREE.Fog.LINEAR=1;THREE.Fog.EXPONENTIAL=2;THREE.Material.prototype.nodes={};
THREE.Material.prototype.updateNodes=function(a){void 0!==this.nodes&&(this.nodes=a)};function Key(){this.justReleased=this.justPressed=this.isPressed=!1}Key.KEY_DOWN=-1;Key.KEY_UP=1;Key.KEY_RESET=0;Key.prototype.update=function(a){this.justReleased=this.justPressed=!1;a===Key.KEY_DOWN?(!1===this.isPressed&&(this.justPressed=!0),this.isPressed=!0):a===Key.KEY_UP?(this.isPressed&&(this.justReleased=!0),this.isPressed=!1):a===Key.KEY_RESET&&(this.justPressed=this.justReleased=!1)};
Key.prototype.set=function(a,b,c){this.justPressed=a;this.isPressed=b;this.justReleased=c};Key.prototype.reset=function(){this.justReleased=this.isPressed=this.justPressed=!1};Key.prototype.toString=function(){return"Pressed:"+this.isPressed+" JustPressed:"+this.justPressed+" JustReleased:"+this.justReleased};function Keyboard(){}
Keyboard.initialize=function(){Keyboard.keys=[];Keyboard.actions=[];for(var a=0;256>a;a++)Keyboard.keys.push(new Key);document.onkeydown=b=>{Keyboard.actions.push(b.keyCode);Keyboard.actions.push(Key.KEY_DOWN)};document.onkeyup=b=>{Keyboard.actions.push(b.keyCode);Keyboard.actions.push(Key.KEY_UP)}};
Keyboard.update=function(){for(var a=0;Keyboard.actions.length>a;){var b=Keyboard.actions.shift(),c=Keyboard.actions.shift();Keyboard.keys[b].update(c);if(Keyboard.keys[b].justReleased||Keyboard.keys[b].justPressed)Keyboard.actions.push(b),Keyboard.actions.push(Key.KEY_RESET),a+=2}};Keyboard.reset=function(){Keyboard.actions=[];for(var a=0;a<Keyboard.keys.length;a++)Keyboard.keys[a].reset()};Keyboard.keyPressed=function(a){return 256>a&&Keyboard.keys[a].isPressed};
Keyboard.keyJustPressed=function(a){return 256>a&&Keyboard.keys[a].justPressed};Keyboard.keyJustReleased=function(a){return 256>a&&Keyboard.keys[a].justReleased};Keyboard.BACKSPACE=8;Keyboard.TAB=9;Keyboard.ENTER=13;Keyboard.SHIFT=16;Keyboard.CTRL=17;Keyboard.ALT=18;Keyboard.CAPS_LOCK=20;Keyboard.ESC=27;Keyboard.SPACEBAR=32;Keyboard.PAGE_UP=33;Keyboard.PAGE_DOWN=34;Keyboard.END=35;Keyboard.HOME=36;Keyboard.INSERT=45;Keyboard.DEL=46;Keyboard.LEFT=37;Keyboard.RIGHT=39;Keyboard.UP=38;Keyboard.DOWN=40;
Keyboard.NUM0=48;Keyboard.NUM1=49;Keyboard.NUM2=50;Keyboard.NUM3=51;Keyboard.NUM4=52;Keyboard.NUM5=53;Keyboard.NUM6=54;Keyboard.NUM7=55;Keyboard.NUM8=56;Keyboard.NUM9=57;Keyboard.A=65;Keyboard.B=66;Keyboard.C=67;Keyboard.D=68;Keyboard.E=69;Keyboard.F=70;Keyboard.G=71;Keyboard.H=72;Keyboard.I=73;Keyboard.J=74;Keyboard.K=75;Keyboard.L=76;Keyboard.M=77;Keyboard.N=78;Keyboard.O=79;Keyboard.P=80;Keyboard.Q=81;Keyboard.R=82;Keyboard.S=83;Keyboard.T=84;Keyboard.U=85;Keyboard.V=86;Keyboard.W=87;
Keyboard.X=88;Keyboard.Y=89;Keyboard.Z=90;Keyboard.F1=112;Keyboard.F2=113;Keyboard.F3=114;Keyboard.F4=115;Keyboard.F5=116;Keyboard.F6=117;Keyboard.F7=118;Keyboard.F8=119;Keyboard.F9=120;Keyboard.F10=121;Keyboard.F11=122;Keyboard.F12=123;function Mouse(){}
Mouse.initialize=function(){Mouse._keys=[];Mouse._position=new THREE.Vector2(0,0);Mouse._position_updated=!1;Mouse._delta=new THREE.Vector2(0,0);Mouse._wheel=0;Mouse._wheel_updated=!1;Mouse.keys=[];Mouse.position=new THREE.Vector2(0,0);Mouse.delta=new THREE.Vector2(0,0);Mouse.wheel=0;Mouse.canvas=null;for(var a=0;3>a;a++)Mouse._keys.push(new Key),Mouse.keys.push(new Key);void 0!==document.onmousewheel?document.addEventListener("mousewheel",function(c){Mouse._wheel=c.deltaY;Mouse._wheel_updated=!0},
!1):void 0!==document.addEventListener?document.addEventListener("DOMMouseScroll",function(c){Mouse._wheel=30*c.detail;Mouse._wheel_updated=!0},!1):void 0!==document.onwheel&&(document.onwheel=function(c){Mouse._wheel=c.deltaY;Mouse._wheel_updated=!0});if("ontouchstart"in window||0<navigator.msMaxTouchPoints){var b=new THREE.Vector2(0,0);document.addEventListener("touchstart",function(c){c=c.touches[0];b.set(c.clientX,c.clientY);Mouse.updateKey(Mouse.LEFT,Key.KEY_DOWN)},!1);document.addEventListener("touchend",
function(c){Mouse.updateKey(Mouse.LEFT,Key.KEY_UP)},!1);document.addEventListener("touchmove",function(c){c=c.touches[0];if(null!==Mouse.canvas){var d=Mouse.canvas.getBoundingClientRect();Mouse.updatePosition(c.clientX-d.left,c.clientY-d.top,c.clientX-b.x,c.clientY-b.y)}else Mouse.updatePosition(c.clientX,c.clientY,c.clientX-b.x,c.clientY-b.y);b.set(c.clientX,c.clientY)},!1)}else document.addEventListener("mousemove",function(c){if(null!==Mouse.canvas){var d=Mouse.canvas.getBoundingClientRect();Mouse.updatePosition(c.clientX-
d.left,c.clientY-d.top,c.movementX,c.movementY)}else Mouse.updatePosition(c.clientX,c.clientY,c.movementX,c.movementY)},!1),document.addEventListener("mousedown",function(c){Mouse.updateKey(c.which-1,Key.KEY_DOWN)},!1),document.addEventListener("mouseup",function(c){Mouse.updateKey(c.which-1,Key.KEY_UP)},!1)};Mouse.LEFT=0;Mouse.MIDDLE=1;Mouse.RIGHT=2;
Mouse.setCanvas=function(a){Mouse.canvas=a;a.mouseInside=!1;a.addEventListener("mouseenter",function(){this.mouseInside=!0},!1);a.addEventListener("mouseleave",function(){this.mouseInside=!1},!1)};Mouse.insideCanvas=function(){return null===Mouse.canvas?!1:Mouse.canvas.mouseInside};
Mouse.setLock=function(a){null!==Mouse.canvas&&(a?Mouse.canvas.requestPointerLock?Mouse.canvas.requestPointerLock():Mouse.canvas.mozRequestPointerLock?Mouse.canvas.mozRequestPointerLock():Mouse.canvas.webkitRequestPointerLock&&Mouse.canvas.webkitRequestPointerLock():document.exitPointerLock?document.exitPointerLock():document.mozExitPointerLock?document.mozExitPointerLock():document.webkitExitPointerLock&&document.webkitExitPointerLock())};Mouse.buttonPressed=function(a){return Mouse.keys[a].isPressed};
Mouse.buttonJustPressed=function(a){return Mouse.keys[a].justPressed};Mouse.buttonJustReleased=function(a){return Mouse.keys[a].justReleased};Mouse.updatePosition=function(a,b,c,d){Mouse._position.set(a,b);Mouse._delta.x+=c;Mouse._delta.y+=d;Mouse._position_updated=!0};Mouse.updateKey=function(a,b){-1<a&&Mouse._keys[a].update(b)};
Mouse.update=function(){for(var a=0;a<Mouse._keys.length;a++)Mouse._keys[a].justPressed&&Mouse.keys[a].justPressed&&(Mouse._keys[a].justPressed=!1),Mouse._keys[a].justReleased&&Mouse.keys[a].justReleased&&(Mouse._keys[a].justReleased=!1),Mouse.keys[a].set(Mouse._keys[a].justPressed,Mouse._keys[a].isPressed,Mouse._keys[a].justReleased);Mouse._wheel_updated?(Mouse.wheel=Mouse._wheel,Mouse._wheel_updated=!1):Mouse.wheel=0;Mouse._position_updated?(Mouse.delta.x=Mouse._delta.x,Mouse.delta.y=Mouse._delta.y,
Mouse._delta.set(0,0),Mouse.position.x=Mouse._position.x,Mouse.position.y=Mouse._position.y,Mouse._position_updated=!1):(Mouse.delta.x=0,Mouse.delta.y=0)};Mouse.toString=function(){return"Pos:"+Mouse.position.x+","+Mouse.position.y+" Delta:"+Mouse.delta.toString()+"\n   Left: "+Mouse.keys[0].toString()+"\n   Middle: "+Mouse.keys[1].toString()+"\n   Right: "+Mouse.keys[2].toString()};
function VRControls(a,b){function c(e){for(var f=0;f<e.length;f++)if("VRDisplay"in window&&e[f]instanceof VRDisplay||"PositionSensorVRDevice"in window&&e[f]instanceof PositionSensorVRDevice){d.vr_input=e[f];break}d.vr_input||b&&b("VR input not available")}this.vr_input=null;this.scale=1;this.standing=!1;this.userHeight=1.6;this.object=null;void 0!==a&&(this.object=a);this.position=new THREE.Vector3;this.quaternion=new THREE.Quaternion;var d=this;void 0!==navigator.getVRDisplays&&navigator.getVRDisplays().then(c)}
VRControls.prototype.update=function(){if(null!==this.vr_input){var a=this.vr_input.getPose();null!==a.orientation&&this.quaternion.fromArray(a.orientation);null!==a.position?this.position.fromArray(a.position):this.position.set(0,0,0);this.standing&&(this.position.y+=this.userHeight);this.position.multiplyScalar(this.scale);null!==this.object&&(this.object.position.copy(this.position),this.object.quaternion.copy(this.quaternion))}};VRControls.prototype.dispose=function(){this.vr_input=null};
VRControls.prototype.resetPose=function(){null!==this.vr_input&&this.vr_input.resetPose()};VRControls.prototype.attachObject=function(a){this.object=a};var GORLOT={};
function Font(a){this.name="font";this.uuid=THREE.Math.generateUUID();this.type="Font";this.encoding=this.format="";this.data=null;if(void 0!==a)if("object"===typeof a)this.data=a,this.name=a.original_font_information.fullName,this.encoding=this.format="json";else if(this.encoding=a.split(".").pop().toLowerCase(),"json"===this.encoding)this.data=JSON.parse(FileSystem.readFile(a)),this.name=this.data.original_font_information.fullName,this.format="json";else if("ttf"===this.encoding||"otf"===this.encoding||
"ttc"===this.encoding||"otc"===this.encoding)this.data=(new TTFLoader).parse(FileSystem.readFileArrayBuffer(a)),this.name=this.data.original_font_information.fullName,this.encoding=this.format="json"}Font.prototype.isFont=!0;Font.prototype.toJSON=function(a){if(void 0!==a.fonts[this.uuid])return a.fonts[this.uuid];var b={};b.name=this.name;b.uuid=this.uuid;b.encoding=this.encoding;b.type=this.type;b.format=this.format;b.data=this.data;return a.fonts[this.uuid]=b};
Font.prototype.generateShapes=function(a,b,c){void 0===b&&(b=100);void 0===c&&(c=4);var d=this.data;a=String(a).split("");var e=b/d.resolution,f=0;b=[];for(var g=0;g<a.length;g++){var k;var l=e;var m=f,r=d.glyphs[a[g]]||d.glyphs["?"];if(r){var u=new THREE.ShapePath,n=[],h=THREE.ShapeUtils.b2,z=THREE.ShapeUtils.b3;if(r.o)for(var p=r._cachedOutline||(r._cachedOutline=r.o.split(" ")),q=0,t=p.length;q<t;){var v=p[q++];if("m"===v){var x=p[q++]*l+m;var y=p[q++]*l;u.moveTo(x,y)}if("l"===v)x=p[q++]*l+m,y=
p[q++]*l,u.lineTo(x,y);else if("q"===v){var A=p[q++]*l+m;var B=p[q++]*l;var C=p[q++]*l+m;v=p[q++]*l;u.quadraticCurveTo(C,v,A,B);if(k=n[n.length-1]){var E=k.x;k=k.y;for(var w=1;w<=c;w++){var D=w/c;h(D,E,C,A);h(D,k,v,B)}}}else if("b"===v&&(A=p[q++]*l+m,B=p[q++]*l,C=p[q++]*l+m,v=p[q++]*l,x=p[q++]*l+m,y=p[q++]*l,u.bezierCurveTo(C,v,x,y,A,B),k=n[n.length-1]))for(E=k.x,k=k.y,w=1;w<=c;w++)D=w/c,z(D,E,C,x,A),z(D,k,v,y,B)}l={offset:r.ha*l,path:u}}else l=void 0;f+=l.offset;b.push(l.path)}c=[];d=0;for(a=b.length;d<
a;d++)Array.prototype.push.apply(c,b[d].toShapes());return c};function Video(a){this.name="video";this.uuid=THREE.Math.generateUUID();this.type="Video";this.data=this.encoding=this.format="";void 0!==a&&(this.encoding=a.split(".").pop().toLowerCase(),this.data="data:video/"+this.encoding+";base64,"+FileSystem.readFileBase64(a),this.format="base64")}
Video.prototype.toJSON=function(a){if(void 0!==a.videos[this.uuid])return a.videos[this.uuid];var b={};b.name=this.name;b.uuid=this.uuid;b.type=this.type;b.encoding=this.encoding;b.format=this.format;b.data=this.data;return a.videos[this.uuid]=b};
function Audio(a){this.name="audio";this.uuid=THREE.Math.generateUUID();this.type="Audio";this.encoding=this.format="";this.data=null;void 0!==a&&(this.data=FileSystem.readFileArrayBuffer(a),this.encoding=a.split(".").pop().toLowerCase(),this.format="arraybuffer")}
Audio.prototype.toJSON=function(a){if(void 0!==a.audio[this.uuid])return a.audio[this.uuid];var b={};b.name=this.name;b.uuid=this.uuid;b.type=this.type;b.encoding=this.encoding;b.data=Base64Utils.fromArrayBuffer(this.data);b.format="base64";return a.audio[this.uuid]=b};
GORLOT.Image=function(a){this.name="image";this.uuid=THREE.Math.generateUUID();this.type="Image";this.encoding=this.format="";this.data=null;void 0!==a&&(this.encoding=a.split(".").pop().toLowerCase(),"gif"===this.encoding?(this.data="data:image/"+this.encoding+";base64,"+FileSystem.readFileBase64(a),this.format="base64"):"tga"===this.encoding?(a=(new THREE.TGALoader).parse(FileSystem.readFileBase64(a)),this.encoding="jpeg",this.format="base64",this.data=a.toDataURL("image/jpeg",.8)):(this.format=
"url",this.data=a))};
GORLOT.Image.prototype.encodeData=function(){var a=document.createElement("img");a.src=this.data;var b=document.createElement("canvas");b.width=a.width;b.height=a.height;var c=b.getContext("2d");c.drawImage(a,0,0,a.width,a.height);var d=!1;a=c.getImageData(0,0,a.width,a.height).data;for(c=3;c<a.length;c+=4)if(255!==a[c]){d=!0;break}d?(this.format="base64",this.encoding="png",this.data=b.toDataURL("image/png")):(this.format="base64",this.encoding="jpeg",this.data=b.toDataURL("image/jpeg",.8))};
GORLOT.Image.prototype.toJSON=function(a){if(void 0!==a.images[this.uuid])return a.images[this.uuid];"url"===this.format&&this.encodeData();var b={};b.name=this.name;b.uuid=this.uuid;b.type=this.type;b.encoding=this.encoding;b.format=this.format;b.data=this.data;return a.images[this.uuid]=b};
function TextTexture(a,b,c,d,e,f,g,k,l,m,r){THREE.Texture.call(this,document.createElement("canvas"),c,d,e,f,g,k,l,m,r);this.image.width=2048;this.image.height=2048;this.context=this.image.getContext("2d");this.context.font="Normal 500px Arial";this.context.textAlign="center";this.context.fillStyle="#FFFFFF";this.context.fillText("text",this.image.width/2,this.image.height/2);this.name="text";this.category="Text";this.text="text";this.font=b;this.needsUpdate=!0}TextTexture.prototype=Object.create(THREE.Texture.prototype);
function VideoTexture(a,b,c,d,e,f){function g(){a.readyState>=a.HAVE_CURRENT_DATA&&(k.needsUpdate=!0);k.disposed||requestAnimationFrame(g)}"string"===typeof a?this.video=new Video(a):a instanceof Video&&(this.video=a);THREE.Texture.call(this,document.createElement("video"),b,c,d,THREE.LinearFilter,THREE.LinearFilter,THREE.RGBFormat,e,f);this.disposed=this.generateMipmaps=!1;this.name="video";this.category="Video";this.loop=this.autoplay=!0;this.image.autoplay=this.autoplay;this.image.loop=this.loop;
this.image.src=this.video.data;var k=this;a=this.image;g()}VideoTexture.prototype=Object.create(THREE.Texture.prototype);VideoTexture.prototype.dispose=function(){THREE.Texture.prototype.dispose.call(this);this.disposed=!0;this.image.paused||this.image.pause()};VideoTexture.prototype.toJSON=function(a){var b=THREE.Texture.prototype.toJSON.call(this,a);a=this.video.toJSON(a);b.video=a.uuid;b.loop=this.loop;b.autoplay=this.autoplay;return b};
function WebcamTexture(a,b,c,d,e,f,g){function k(){l.readyState>=l.HAVE_CURRENT_DATA&&(m.needsUpdate=!0);m.disposed||requestAnimationFrame(k)}var l=document.createElement("video");l.autoplay=!0;l.loop=!0;navigator.webkitGetUserMedia?navigator.webkitGetUserMedia({video:!0},function(r){l.src=URL.createObjectURL(r)},function(r){console.warn("WebcamTexture: No webcam available")}):navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(r){l.src=URL.createObjectURL(r)}).catch(function(r){console.warn("No webcam available")});
THREE.Texture.call(this,l,a,b,c,THREE.LinearFilter,THREE.LinearFilter,THREE.RGBFormat,f,g);this.disposed=this.generateMipmaps=!1;this.name="webcam";this.category="Webcam";var m=this;k()}WebcamTexture.prototype=Object.create(THREE.VideoTexture.prototype);WebcamTexture.prototype.dispose=function(){THREE.Texture.prototype.dispose.call(this);this.disposed=!0;this.image.paused||this.image.pause()};
function Texture(a,b,c,d,e,f,g,k,l,m){this.img="string"===typeof a?new GORLOT.Image(a):a;THREE.Texture.call(this,document.createElement("img"),b,c,d,e,f,g,k,l,m);var r=this;this.disposed=!1;this.name="texture";this.category="Image";this.image.src=this.img.data;this.image.onload=function(){r.needsUpdate=!0};if("gif"===this.img.encoding){var u=function(){r.disposed||(r.needsUpdate=!0,requestAnimationFrame(u))};u()}}Texture.prototype=Object.create(THREE.Texture.prototype);
Texture.prototype.dispose=function(){THREE.Texture.prototype.dispose.call(this);this.disposed=!0};Texture.prototype.toJSON=function(a){var b=THREE.Texture.prototype.toJSON.call(this,a);a=this.img.toJSON(a);b.image=a.uuid;return b};function FontLoader(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager}FontLoader.prototype.load=function(a,b,c,d){(new THREE.XHRLoader(this.manager)).load(a,function(e){b(new Font(JSON.parse(e)))},c,d)};
FontLoader.prototype.parse=function(a){if(void 0!==a.data){var b=new Font;b.name=a.name;b.uuid=a.uuid;b.format=a.format;b.encoding=a.encoding;b.data=a.data;return b}return new Font(a)};function ImageLoader(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager}ImageLoader.prototype.load=function(a,b,c,d){var e=this;(new THREE.XHRLoader(this.manager)).load(a,function(f){e.parse(JSON.parse(f),b)},c,d)};
ImageLoader.prototype.parse=function(a,b){b=new GORLOT.Image;b.name=a.name;b.uuid=a.uuid;b.format=a.format;b.encoding=a.encoding;b.data=a.data;return b};function VideoLoader(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager}VideoLoader.prototype.load=function(a,b,c,d){var e=this;(new THREE.XHRLoader(this.manager)).load(a,f=>{e.parse(JSON.parse(f),b)},c,d)};VideoLoader.prototype.parse=function(a,b){b=new Video;b.name=a.name;b.uuid=a.uuid;b.format=a.uuid;b.encoding=a.encoding;b.data=a.data;return b};
function AudioLoader(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager}AudioLoader.prototype.load=function(a,b,c,d){var e=this;(new THREE.XHRLoader(this.manager)).load(a,f=>{e.parse(JSON.parse(f),b)},c,d)};AudioLoader.prototype.parse=function(a){var b=new Audio;b.name=a.name;b.uuid=a.uuid;b.format=a.format;b.encoding=a.encoding;b.data=ArraybufferUtils.fromBase64(a.data);return b};
function TextureLoader(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.images=[];this.videos=[];this.fonts=[]}TextureLoader.prototype.load=function(a,b,c,d){var e=this;(new THREE.XHRLoader(this.manager)).load(a,f=>{e.parse(JSON.parse(f),b)},c,d)};
TextureLoader.prototype.parse=function(a,b){var c=a.category;"Video"===c?(void 0===a.video&&console.warn("TextureLoader: No video specified for",a.uuid),void 0===this.videos[a.video]&&console.warn("TextureLoader: Undefined video",a.video),c=new VideoTexture(this.videos[a.video])):"Webcam"===c?c=new WebcamTexture:(void 0===a.image&&console.warn("TextureLoader: No image specified for",a.uuid),void 0===this.images[a.image]&&console.warn("TextureLoader: Undefined image",a.image),c=new Texture(this.images[a.image]));
c.uuid=a.uuid;c.name=a.name;c.mapping=a.mapping;c.offset=new THREE.Vector2(a.offset[0],a.offset[1]);c.repeat=new THREE.Vector2(a.repeat[0],a.repeat[1]);c.wrapS=a.wrap[0];c.wrapT=a.wrap[1];c.minFilter=a.minFilter;c.magFilter=a.magFilter;c.anisotropy=a.anisotropy;c.flipY=a.flipY;void 0!==b&&b(c);return c};TextureLoader.prototype.setImages=function(a){this.images=a;return this};TextureLoader.prototype.setVideos=function(a){this.videos=a;return this};
TextureLoader.prototype.setFonts=function(a){this.fonts=a;return this};function ObjectLoader(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.texturePath=""}ObjectLoader.prototype.load=function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this;(new THREE.XHRLoader(this.manager)).load(a,function(f){e.parse(JSON.parse(f),b)},c,d)};
ObjectLoader.prototype.parse=function(a,b){var c=this.parseGeometries(a.geometries),d=this.parseImages(a.images),e=this.parseVideos(a.videos),f=this.parseAudio(a.audio),g=this.parseFonts(a.fonts);d=this.parseTextures(a.textures,d,e);e=this.parseMaterials(a.materials,d);var k=this.parseAssetObjects(a.asset_objects);c=this.parseObject(a.object,c,e,d,f,g,k);a.animations&&(c.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(c);return c};
ObjectLoader.prototype.setTexturePath=function(a){this.texturePath=a};ObjectLoader.prototype.setCrossOrigin=function(a){this.crossOrigin=a};
ObjectLoader.prototype.parseGeometries=function(a){var b=[];if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,e=0;e<a.length;e++){var f=a[e];switch(f.type){case "PlaneGeometry":case "PlaneBufferGeometry":var g=new THREE[f.type](f.width,f.height,f.widthSegments,f.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":g=new THREE[f.type](f.width,f.height,f.depth,f.widthSegments,f.heightSegments,f.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":g=
new THREE[f.type](f.radius,f.segments,f.thetaStart,f.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":g=new THREE[f.type](f.radiusTop,f.radiusBottom,f.height,f.radialSegments,f.heightSegments,f.openEnded,f.thetaStart,f.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":g=new THREE[f.type](f.radius,f.height,f.radialSegments,f.heightSegments,f.openEnded,f.thetaStart,f.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":g=new THREE[f.type](f.radius,
f.widthSegments,f.heightSegments,f.phiStart,f.phiLength,f.thetaStart,f.thetaLength);break;case "DodecahedronGeometry":case "IcosahedronGeometry":case "OctahedronGeometry":case "TetrahedronGeometry":g=new THREE[f.type](f.radius,f.detail);break;case "RingGeometry":case "RingBufferGeometry":g=new THREE[f.type](f.innerRadius,f.outerRadius,f.thetaSegments,f.phiSegments,f.thetaStart,f.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":g=new THREE[f.type](f.radius,f.tube,f.radialSegments,
f.tubularSegments,f.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":g=new THREE[f.type](f.radius,f.tube,f.tubularSegments,f.radialSegments,f.p,f.q);break;case "LatheGeometry":case "LatheBufferGeometry":g=new THREE[f.type](f.points,f.segments,f.phiStart,f.phiLength);break;case "BufferGeometry":g=d.parse(f);break;case "Geometry":g=c.parse(f.data,this.texturePath).geometry;break;default:console.warn('ObjectLoader: Unsupported geometry type "'+f.type+'"');continue}g.uuid=f.uuid;g.name=
void 0!==f.name?f.name:"geometry";b[f.uuid]=g}return b};ObjectLoader.prototype.parseMaterials=function(a,b){var c=[],d=new MaterialLoader;d.setTextures(b);if(void 0!==a)for(b=0;b<a.length;b++){var e=d.parse(a[b]);c[e.uuid]=e}return c};ObjectLoader.prototype.parseAnimations=function(a){for(var b=[],c=0;c<a.length;c++){var d=THREE.AnimationClip.parse(a[c]);b.push(d)}return b};
ObjectLoader.prototype.parseImages=function(a){var b=new ImageLoader,c=[];if(void 0!==a)for(var d=0;d<a.length;d++)c[a[d].uuid]=b.parse(a[d]);return c};ObjectLoader.prototype.parseVideos=function(a){var b=new VideoLoader,c=[];if(void 0!==a)for(var d=0;d<a.length;d++)c[a[d].uuid]=b.parse(a[d]);return c};ObjectLoader.prototype.parseAudio=function(a){var b=new AudioLoader,c=[];if(void 0!==a)for(var d=0;d<a.length;d++)c[a[d].uuid]=b.parse(a[d]);return c};
ObjectLoader.prototype.parseFonts=function(a){var b=new FontLoader,c=[];if(void 0!==a)for(var d=0;d<a.length;d++)c[a[d].uuid]=b.parse(a[d]);return c};ObjectLoader.prototype.parseTextures=function(a,b,c){var d=new TextureLoader;d.setImages(b);d.setVideos(c);b=[];if(void 0!==a)for(c=0;c<a.length;c++){var e=d.parse(a[c]);b[e.uuid]=e}return b};ObjectLoader.prototype.parseAssetObjects=function(a){var b=new ObjectLoader,c=[];if(void 0!==a)for(var d=0;d<a.length;d++){var e=b.parse(a[d]);c[e.uuid]=e}return c};
ObjectLoader.prototype.parseObject=function(a,b,c,d,e,f,g){function k(t){void 0===d[t]&&console.warn("ObjectLoader: Undefined texture",t);return d[t]}function l(t){void 0===b[t]&&console.warn("ObjectLoader: Undefined geometry",t);return b[t]}function m(t){void 0===c[t]&&console.warn("ObjectLoader: Undefined material",t);return c[t]}function r(t){void 0===f[t]&&console.warn("ObjectLoader: Undefined font",t);return f[t]}var u=new THREE.Matrix4;switch(a.type){case "SpineAnimation":for(var n=0;n<a.textures.length;n++)a.textures[n].texture=
k(a.textures[n].texture);var h=new SpineAnimation(a.json,a.atlas,"",a.textures);break;case "Audio":void 0===e[a.audio]&&console.warn();h=new AudioEmitter(void 0);h.autoplay=a.autoplay;h.startTime=a.startTime;h.playbackRate=a.playbackRate;h.source.loop=a.source.loop;break;case "Physics":h=new PhysicsObject;h.body.type=a.body.type;h.body.mass=a.body.mass;h.body.linearDamping=a.body.linearDamping;h.body.angularDamping=a.body.angularDamping;h.body.allowSleep=a.body.allowSleep;h.body.sleepSpeedLimit=a.body.sleepSpeedLimit;
h.body.sleepTimeLimit=a.body.sleepTimeLimit;h.body.collisionFilterGroup=a.body.collisionFilterGroup;h.body.collisionFilterMask=a.body.collisionFilterMask;h.body.fixedRotation=a.body.fixedRotation;var z=a.body.shapes;for(n=0;n<z.length;n++){var p=z[n];p.type===CANNON.Shape.types.SPHERE?h.body.addShape(new CANNON.Sphere(p.radius)):p.type===CANNON.Shape.types.BOX?h.body.addShape(new CANNON.Box(new CANNON.Vec3(p.halfExtents.x,p.halfExtents.y,p.halfExtents.z))):p.type===CANNON.Shape.types.PARTICLE?h.body.addShape(new CANNON.Particle):
p.type===CANNON.Shape.types.PLANE?h.body.addShape(new CANNON.Plane):p.type===CANNON.Shape.types.CONVEXPOLYHEDRON&&h.body.addShape(new CANNON.ConvexPolyhedron(p.vertices,p.faces))}break;case "ParticleEmiter":void 0!==a.group&&(h=a.group,h.texture.value=k(h.texture.value),h.textureFrames=THREE.Vector2(h.textureFrames));if(void 0!==a.emitter)for(h=a.emitter,h.position.value=THREE.Vector3.fromJSON(h.position.value),h.position.spread=THREE.Vector3.fromJSON(h.position.spread),h.velocity.value=THREE.Vector3.fromJSON(h.velocity.value),
h.velocity.spread=THREE.Vector3.fromJSON(h.velocity.spread),h.acceleration.value=THREE.Vector3.fromJSON(h.acceleration.value),h.acceleration.spread=THREE.Vector3.fromJSON(h.acceleration.spread),n=0;n<h.color.value.length;n++)h.color.value[n]=THREE.Color.fromJSON(h.color.value[n]),h.color.spread[n]=THREE.Vector3.fromJSON(h.color.spread[n]);h=new ParticleEmitter(a.group,a.emitter);break;case "Text3D":h=new Text3D(a.text,m(a.material),r(a.font));break;case "Program":h=new Program(a.name);h.description=
a.description;h.author=a.author;h.version=a.version;h.vr=a.vr;h.vr_scale=a.vr_scale;void 0!==a.lock_pointer&&(h.lock_pointer=a.lock_pointer);void 0!==a.default_scene&&(h.default_scene=a.default_scene);break;case "LeapDevice":h=new LeapMotion;h.mode=a.mode;h.use_arm=a.use_arm;void 0!==a.debug_model&&(h.debug_model=a.debug_model);void 0!==a.gestures_enabled&&(h.gestures_enabled=a.gestures_enabled);void 0!==a.poses_enabled&&(h.poses_enabled=a.poses_enabled);break;case "Kinect":h=new KinectDevice;void 0!==
a.debug_model&&(h.debug_model=a.debug_model);break;case "Sky":h=new Sky(a.auto_update,a.day_time,a.sun_distance,a.time);void 0!==a.sun&&h.sun.shadow.fromJSON(a.sun.shadow);break;case "Scene":h=new Scene;void 0!==a.background&&Number.isInteger(a.background)&&(h.background=new THREE.Color(a.background));void 0!==a.fog&&("Fog"===a.fog.type?h.fog=new THREE.Fog(a.fog.color,a.fog.near,a.fog.far):"FogExp2"===a.fog.type&&(h.fog=new THREE.FogExp2(a.fog.color,a.fog.density)));void 0!==a.cameras&&(h.cameras=
a.cameras);void 0!==a.world&&h.world.gravity.set(a.world.gravity.x,a.world.gravity.y,a.world.gravity.z);break;case "PerspectiveCamera":h=new PerspectiveCamera(a.fov,a.aspect,a.near,a.far);void 0!==a.focus&&(h.focus=a.focus);void 0!==a.zoom&&(h.zoom=a.zoom);void 0!==a.filmGauge&&(h.filmGauge=a.filmGauge);void 0!==a.filmOffset&&(h.filmOffset=a.filmOffset);void 0!==a.view&&(h.view=Object.assign({},a.view));void 0!==a.viewport&&h.viewport.fromArray(a.viewport);void 0!==a.offset&&h.offset.fromArray(a.offset);
void 0!==a.clear_color&&(h.clear_color=a.clear_color);void 0!==a.clear_depth&&(h.clear_depth=a.clear_depth);break;case "OrthographicCamera":h=new OrthographicCamera(a.size,a.aspect,a.mode,a.near,a.far);void 0!==a.viewport&&h.viewport.fromArray(a.viewport);void 0!==a.offset&&h.offset.fromArray(a.offset);void 0!==a.clear_color&&(h.clear_color=a.clear_color);void 0!==a.clear_depth&&(h.clear_depth=a.clear_color);break;case "AmbientLight":h=new AmbientLight(a.color,a.intensity);break;case "DirectionalLight":h=
new DirectionalLight(a.color,a.intensity);break;case "PointLight":h=new PointLight(a.color,a.intensity,a.distance,a.decay);break;case "SpotLight":h=new SpotLight(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case "HemisphereLight":h=new HemisphereLight(a.color,a.groundColor,a.intensity);break;case "Mesh":h=new Mesh(l(a.geometry),m(a.material));break;case "SkinnedMesh":h=new SkinnedMesh(l(a.geometry),m(a.material));break;case "LOD":h=new THREE.LOD;break;case "Line":h=new THREE.Line(l(a.geometry),
m(a.material),a.mode);break;case "PointCloud":case "Points":h=new THREE.Points(l(a.geometry),m(a.material));break;case "Sprite":h=new Sprite(m(a.material));break;case "Group":h=new Container;break;case "ObjectCaller":h=new ObjectCaller(a.obj_uuid,a.obj_type);break;case "Script":h=new Script(a.code);break;case "BlockScript":h=new BlockScript(a.nodes);break;case "Bone":h=new Bone;break;default:h=new Container}h.uuid=a.uuid;void 0!==a.name&&(h.name=a.name);void 0!==a.hidden&&(h.hidden=a.hidden);void 0!==
a.folded&&(h.folded=a.folded);void 0!==a.matrix?(u.fromArray(a.matrix),u.decompose(h.position,h.quaternion,h.scale)):(void 0!==a.position&&h.position.fromArray(a.position),void 0!==a.rotation&&h.rotation.fromArray(a.rotation),void 0!==a.scale&&h.scale.fromArray(a.scale));void 0!==a.castShadow&&(h.castShadow=a.castShadow);void 0!==a.receiveShadow&&(h.receiveShadow=a.receiveShadow);void 0!==a.shadow&&h.shadow.fromJSON(a.shadow);void 0!==a.visible&&(h.visible=a.visible);void 0!==a.userData&&(h.userData=
a.userData);if(void 0!==a.children)for(var q in a.children)h.add(this.parseObject(a.children[q],b,c,d,e,f));void 0!==a.nodes&&(h.nodes=a.nodes);void 0!==a.blocks_type&&(h.blocks_type=a.blocks_type);if(void 0!==a.components)for(n in a.components)eval(`
				object.components.push(new ${a.components[n].className}())
				object.components[object.components.length - 1].values = compo.values
			`);void 0!==a.matrixAutoUpdate&&(h.matrixAutoUpdate=a.matrixAutoUpdate,h.matrixAutoUpdate||(h.updateMatrix(),h.updateMatrixWorld(!0)));if("Program"===a.type)h.materials=c,h.asset_objects=g;else if("Scene"===a.type)for(n=0;n<h.cameras.length;n++)q=h.getCamera(h.cameras[n]),null!==q?h.cameras[n]=q:h.cameras.splice(n,1);else if("LOD"===a.type)for(n=a.levels,a=0;a<n.length;a++)e=n[a],q=h.getObjectByProperty("uuid",e.object),void 0!==q&&h.addLevel(q,e.distance);return h};
var MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.textures={}};
MaterialLoader.prototype={constructor:MaterialLoader,load:function(a,b,c,d){var e=this;(new THREE.XHRLoader(e.manager)).load(a,function(f){b(e.parse(JSON.parse(f)))},c,d)},setTextures:function(a){this.textures=a},getTexture:function(a){var b=this.textures;void 0===b[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a);return b[a]},parse:function(a){var b=a.type;"MeshPhongMaterial"===b?b=new MeshPhongMaterial:"MeshStandardMaterial"===b?b=new MeshStandardMaterial:"MeshLambertMaterial"===b?
b=new MeshLambertMaterial:"ShaderMaterial"===b?b=new MeshShaderMaterial:"MeshNormalMaterial"===b?b=new MeshNormalMaterial:"MeshDepthMaterial"===b?b=new MeshDepthMaterial:(console.log('Unregistered material in "MaterialLoader": '+a.type),b=new THREE[a.type]);void 0!==a.uuid&&(b.uuid=a.uuid);void 0!==a.name&&(b.name=a.name);void 0!==a.color&&b.color.setHex(a.color);void 0!==a.roughness&&(b.roughness=a.roughness);void 0!==a.metalness&&(b.metalness=a.metalness);void 0!==a.emissive&&b.emissive.setHex(a.emissive);
void 0!==a.nodes&&(b.nodes=a.nodes);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&(b.shininess=a.shininess);void 0!==a.uniforms&&(b.uniforms=a.uniforms);void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.shading&&(b.shading=a.shading);void 0!==a.blending&&(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=
a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.alphaTest&&(b.alphaTest=a.alphaTest);void 0!==a.depthTest&&(b.depthTest=a.depthTest);void 0!==a.depthWrite&&(b.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(b.colorWrite=a.colorWrite);void 0!==a.wireframe&&(b.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(b.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.size&&(b.size=a.size);void 0!==a.sizeAttenuation&&(b.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&
(b.map=this.getTexture(a.map));void 0!==a.alphaMap&&(b.alphaMap=this.getTexture(a.alphaMap),b.transparent=!0);void 0!==a.bumpMap&&(b.bumpMap=this.getTexture(a.bumpMap));void 0!==a.bumpScale&&(b.bumpScale=a.bumpScale);void 0!==a.normalMap&&(b.normalMap=this.getTexture(a.normalMap));if(void 0!==a.normalScale){var c=a.normalScale;!1===Array.isArray(c)&&(c=[c,c]);b.normalScale=(new THREE.Vector2).fromArray(c)}void 0!==a.displacementMap&&(b.displacementMap=this.getTexture(a.displacementMap));void 0!==
a.displacementScale&&(b.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(b.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(b.roughnessMap=this.getTexture(a.roughnessMap));void 0!==a.metalnessMap&&(b.metalnessMap=this.getTexture(a.metalnessMap));void 0!==a.emissiveMap&&(b.emissiveMap=this.getTexture(a.emissiveMap));void 0!==a.emissiveIntensity&&(b.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(b.specularMap=this.getTexture(a.specularMap));void 0!==
a.envMap&&(b.envMap=this.getTexture(a.envMap),b.combine=THREE.MultiplyOperation);a.reflectivity&&(b.reflectivity=a.reflectivity);void 0!==a.lightMap&&(b.lightMap=this.getTexture(a.lightMap));void 0!==a.lightMapIntensity&&(b.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(b.aoMap=this.getTexture(a.aoMap));void 0!==a.aoMapIntensity&&(b.aoMapIntensity=a.aoMapIntensity);if(void 0!==a.materials){c=0;for(var d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]))}return b}};
function TTFLoader(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.reversed=!1}TTFLoader.prototype.load=function(a,b,c,d){var e=new THREE.XHRLoader(this.manager);e.setResponseType("arraybuffer");e.load(a,function(f){f=scope.parse(f);void 0!==b&&b(f)},c,d)};TTFLoader.prototype.parse=function(a){a=opentype.parse(a);return TTFLoader.convert(a,this.reversed)};
TTFLoader.convert=function(a,b){for(var c=1E5/(72*(a.unitsPerEm||2048)),d={glyphs:{}},e=0;e<a.glyphs.length;e++){var f=a.glyphs.glyphs[e];if(void 0!==f.unicode){var g={};g.ha=Math.round(f.advanceWidth*c);g.x_min=Math.round(f.xMin*c);g.x_max=Math.round(f.xMax*c);g.o="";b&&(f.path.commands=TTFLoader.reverseCommands(f.path.commands));f.path.commands.forEach(function(k,l){"c"===k.type.toLowerCase()&&(k.type="b");g.o+=k.type.toLowerCase();g.o+=" ";void 0!==k.x&&void 0!==k.y&&(g.o+=Math.round(k.x*c),g.o+=
" ",g.o+=Math.round(k.y*c),g.o+=" ");void 0!==k.x1&&void 0!==k.y1&&(g.o+=Math.round(k.x1*c),g.o+=" ",g.o+=Math.round(k.y1*c),g.o+=" ");void 0!==k.x2&&void 0!==k.y2&&(g.o+=Math.round(k.x2*c),g.o+=" ",g.o+=Math.round(k.y2*c),g.o+=" ")});d.glyphs[String.fromCharCode(f.unicode)]=g}}d.familyName=a.familyName;d.ascender=Math.round(a.ascender*c);d.descender=Math.round(a.descender*c);d.underlinePosition=a.tables.post.underlinePosition;d.underlineThickness=a.tables.post.underlineThickness;d.boundingBox={yMin:a.tables.head.yMin,
xMin:a.tables.head.xMin,yMax:a.tables.head.yMax,xMax:a.tables.head.xMax};d.resolution=1E3;d.original_font_information=a.tables.name;return d};
TTFLoader.reverseCommands=function(a){var b=[],c;a.forEach(function(e){"m"===e.type.toLowerCase()?(c=[e],b.push(c)):"z"!==e.type.toLowerCase()&&c.push(e)});var d=[];b.forEach(function(e){var f={type:"m",x:e[e.length-1].x,y:e[e.length-1].y};d.push(f);for(var g=e.length-1;0<g;g--){var k=e[g];f={type:k.type};void 0!==k.x2&&void 0!==k.y2?(f.x1=k.x2,f.y1=k.y2,f.x2=k.x1,f.y2=k.y1):void 0!==k.x1&&void 0!==k.y1&&(f.x1=k.x1,f.y1=k.y1);f.x=e[g-1].x;f.y=e[g-1].y;d.push(f)}});return d};
function LeapMotion(){THREE.Object3D.call(this);this.type="LeapDevice";this.name="leap";this.poses_enabled=this.gestures_enabled=this.debug_model=!0;this.mode=LeapMotion.DESK;this.use_arm=!1;this.bone_meshes=[];this.arm_meshes=[];this.material=new THREE.MeshPhongMaterial;this.geometry=new THREE.BoxBufferGeometry(1,1,1);this.physics_world=null;this.physics_bodys=[];this.gesture=[];for(var a=0;10>a;a++)this.gesture[a]=!1;this.pose=[];for(a=0;3>a;a++)this.pose[a]=!1;this.data=null;this.components=[];
this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);this.defaultComponents.push(new LeapComponent)}LeapMotion.prototype=Object.create(THREE.Object3D.prototype);LeapMotion.DESK=0;LeapMotion.HDM=1;LeapMotion.SWIPE=0;LeapMotion.SWIPE_LEFT=1;LeapMotion.SWIPE_RIGHT=2;LeapMotion.SWIPE_FRONT=3;LeapMotion.SWIPE_BACK=4;LeapMotion.SWIPE_UP=5;LeapMotion.SWIPE_DOWN=6;LeapMotion.CIRCLE=7;LeapMotion.SCREEN_TAP=8;LeapMotion.KEY_TAP=9;
LeapMotion.CLOSED=0;LeapMotion.OPEN=1;LeapMotion.POINTING=2;LeapMotion.prototype.initialize=function(){var a=this;Leap.loop({background:!0},function(c){a.data=c}).connect();for(var b=0;b<this.children.length;b++)this.children[b].initialize()};LeapMotion.prototype.update=function(){null!==this.data&&(this.gestures_enabled&&this.updateGestures(),this.poses_enabled&&this.updatePoses(),this.debug_model&&this.updateDebugModel());for(var a=0;a<this.children.length;a++)this.children[a].update()};
LeapMotion.prototype.checkGesture=function(a){return void 0!==this.gesture[a]?this.gesture[a]:!1};LeapMotion.prototype.checkPose=function(a){return void 0!==this.pose[a]?this.pose[a]:!1};LeapMotion.prototype.setMode=function(a){this.mode=a};
LeapMotion.prototype.updatePoses=function(){for(var a=0;a<this.pose.length;a++)this.pose[a]=!0;for(var b=0;b<this.data.hands.length;b++){var c=this.data.hands[b],d=c.sphereCenter;d=new THREE.Vector3(d[0],d[1],d[2]);var e=[],f=0;for(a=0;a<this.pose.length;a++)this.pose[a]=!0;var g=[];for(a=0;a<c.fingers.length;a++){var k=c.fingers[a];g.push(k.direction);k=k.distal.nextJoint;k=new THREE.Vector3(k[0],k[1],k[2]);e.push(d.distanceTo(k)/c._scaleFactor);0!==a&&(.3>g[a][2]&&(this.pose[LeapMotion.CLOSED]=
!1),-.5<g[a][2]&&(this.pose[LeapMotion.OPEN]=!1),1===a?f=e[1]:f<2*e[a]-15&&(this.pose[LeapMotion.POINTING]=!1))}f<2*e[0]-15&&(this.pose[LeapMotion.POINTING]=!1)}};
LeapMotion.prototype.updateGestures=function(){for(var a=0;a<this.gesture.length;a++)this.gesture[a]=!1;var b=this;this.data.valid&&0<this.data.gestures.length&&this.data.gestures.forEach(function(c){"swipe"===c.type?(b.gesture[LeapMotion.SWIPE]=!0,0<c.direction[0]?b.gesture[LeapMotion.SWIPE_RIGHT]=!0:b.gesture[LeapMotion.SWIPE_LEFT]=!0,0<c.direction[1]?b.gesture[LeapMotion.SWIPE_UP]=!0:b.gesture[LeapMotion.SWIPE_DOWN]=!0,0<c.direction[2]?b.gesture[LeapMotion.SWIPE_FRONT]=!0:b.gesture[LeapMotion.SWIPE_BACK]=
!0):"circle"===c.type?b.gesture[LeapMotion.CIRCLE]=!0:"keyTap"===c.type?b.gesture[LeapMotion.KEY_TAP]=!0:"screenTap"===c.type&&(b.gesture[LeapMotion.SCREEN_TAP]=!0)})};
LeapMotion.prototype.updateDebugModel=function(){var a=this;this.arm_meshes.forEach(function(l){a.remove(l)});this.bone_meshes.forEach(function(l){a.remove(l)});var b=0,c=0,d;for(d of this.data.hands){for(var e of d.fingers)for(var f of e.bones){if(0!==b){var g=this.bone_meshes[b]||this.addMesh(this.bone_meshes);this.updateMesh(f,g)}b++}if(this.show_arm){g=d.arm;var k=this.arm_meshes[c++]||this.addMesh(this.arm_meshes);this.updateMesh(g,k);k.scale.set(g.width/1200,g.width/300,g.length/150)}}null!==
this.physics_world&&this.updatePhysics()};
LeapMotion.prototype.updatePhysics=function(){for(var a=0;a<this.physics_bodys.length;a++)this.physics_world.removeBody(this.physics_bodys[a].pop());this.children.forEach(function(b,c){b=new THREE.BoundingBoxHelper(b);b.update();c=new THREE.Vector3(b.box.max.x-b.box.min.x,b.box.max.y-b.box.min.y,b.box.max.z-b.box.min.z);c.x*=this.scale.x;c.y*=this.scale.y;c.z*=this.scale.z;c.divideScalar(2);b=b.box.center();b.x*=this.scale.x;b.y*=this.scale.y;b.z*=this.scale.z;b.add(this.position);c=new CANNON.Box(new CANNON.Vec3(c.x,
c.y,c.z));var d=new CANNON.Body({mass:0});d.addShape(c);d.position.set(b.x-this.position.x,b.y-this.position.y,b.z-this.position.z);d.updateMassProperties();this.physics_bodys.push(d);this.physics_world.addBody(d)})};LeapMotion.prototype.addMesh=function(a){var b=new Mesh(this.geometry,this.material);b.castShadow=this.castShadow;b.receiveShadow=this.receiveShadow;a.push(b);return b};
LeapMotion.prototype.updateMesh=function(a,b){b.position.fromArray(a.center());b.position.divideScalar(150);b.setRotationFromMatrix((new THREE.Matrix4).fromArray(a.matrix()));b.scale.set(a.width/150,a.width/150,a.length/150);this.add(b)};LeapMotion.prototype.getMovement=function(){var a=this.data.gestures[0].position,b=this.data.gestures[0].startPosition;a=new THREE.Vector3(a[0]-b[0],a[1]-b[1],a[2]-b[2]);a.divideScalar(this.data.currentFrameRate);return a};
LeapMotion.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.type=this.type;a.object.debug_model=this.debug_model;a.object.gestures_enabled=this.gestures_enabled;a.object.poses_enabled=this.poses_enabled;a.object.mode=this.mode;a.object.use_arm=this.use_arm;return a};
function KinectDevice(){THREE.Object3D.call(this);this.type="Kinect";this.name="kinect";this.socket=new WebSocket("ws://127.0.0.1:8181");this.connected=!1;this.debug_model=!0;this.data_timeout=0;this.data=this.camera=null;this.data_received=!1;var a=this;this.socket.onopen=function(){a.connected=!0};this.socket.onclose=function(){a.connected=!1};this.socket.onmessage=function(b){"string"===typeof b.data?(a.data=JSON.parse(b.data),a.data_received=!0,a.data_timeout=KinectDevice.DATA_TIMEOUT):b.data instanceof
Blob&&(a.camera=b.data)};this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);this.defaultComponents.push(new KinectComponent)}KinectDevice.DATA_TIMEOUT=20;KinectDevice.DEPTH=0;KinectDevice.COLOR=1;
KinectDevice.JOINTS_NAME=[["head","shouldercenter"],["shouldercenter","shoulderright"],["shouldercenter","shoulderleft"],["shoulderright","elbowright"],["shoulderleft","elbowleft"],["elbowright","wristright"],["elbowleft","wristleft"],["wristright","handright"],["wristleft","handleft"],["shouldercenter","spine"],["spine","hipcenter"],["hipcenter","hipright"],["hipcenter","hipleft"],["hipright","kneeright"],["hipleft","kneeleft"],["kneeright","ankleright"],["kneeleft","ankleleft"],["ankleright","footright"],
["ankleleft","footleft"]];KinectDevice.prototype=Object.create(THREE.Object3D.prototype);
KinectDevice.prototype.update=function(){if(null!==this.data)if(this.data_received){for(this.data_received=!1;0<this.children.length;)this.children.pop();if(this.debug_model)for(var a=new THREE.SphereGeometry(.04,6,6),b=new THREE.MeshPhongMaterial(16711680),c=0;c<this.data.skeletons.length;c++)for(var d=this.data.skeletons[c].joints,e=0;e<d.length;e++){var f=new Mesh(a,b);f.position.set(d[e].x,d[e].y,d[e].z);f.castShadow=!0;this.add(f)}}else if(0<this.data_timeout&&(this.data_timeout--,0===this.data_timeout))for(;0<
this.children.length;)this.children.pop();for(e=0;e<this.children.length;e++)this.children[e].update()};KinectDevice.prototype.isConnected=function(){return this.connected};KinectDevice.prototype.setCameraMode=function(a){a===KinectDevice.COLOR?socket.send("Color"):a===KinectDevice.DEPTH&&socket.send("Depth")};KinectDevice.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.debug_model=this.debug_model;return a};
function Mesh(a,b){THREE.Mesh.call(this,a,b);this.name="model";this.castShadow=this.receiveShadow=!0;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent)}Mesh.prototype=Object.create(THREE.Mesh.prototype);Mesh.prototype.dispose=function(){void 0!==this.material.dispose&&this.material.dispose();this.geometry.dispose();for(var a=0;a<this.children.length;a++)this.children[a].dispose()};
function SkinnedMesh(a,b,c){THREE.SkinnedMesh.call(this,a,b,c);this.name="model";this.castShadow=this.receiveShadow=!0;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent)}SkinnedMesh.prototype=Object.create(THREE.SkinnedMesh.prototype);SkinnedMesh.prototype.dispose=function(){void 0!==this.material.dispose&&this.material.dispose();this.geometry.dispose();for(var a=0;a<this.children.length;a++)this.children[a].dispose()};
function Text3D(a,b,c){THREE.Mesh.call(this,new THREE.TextGeometry(a,{font:c}),b);this.name="text";this.type="Text3D";this.scale.set(.02,.02,.02);this.font=c;this.text=a;this.height=50;this.bevel_thickness=this.bevel=!1;this.bevel_size=8;this.castShadow=this.receiveShadow=!0;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);this.defaultComponents.push(new TextComponent)}Text3D.prototype=Object.create(THREE.Mesh.prototype);
Text3D.prototype.dispose=function(){void 0!==this.material.dispose&&this.material.dispose();this.geometry.dispose();for(var a=0;a<this.children.length;a++)this.children[a].dispose()};Text3D.prototype.setText=function(a){this.text=a;this.geometry.dispose();this.geometry=new THREE.TextGeometry(this.text,{font:this.font,height:this.height,bevelEnabled:this.bevel,bevelSize:this.bevel_size,bevelThickness:this.bevel_thickness})};
Text3D.prototype.toJSON=function(a){var b=this.geometry;this.geometry=void 0;var c=this.font;a=THREE.Object3D.prototype.toJSON.call(this,a,(d,e)=>{c=c.toJSON(d)});a.object.text=this.text;a.object.font=c.uuid;a.object.height=this.height;a.object.bevel=this.bevel;a.object.bevel_thickness=this.bevel_thickness;a.object.bevel_size=this.bevel_size;this.geometry=b;return a};
function Sprite(a){THREE.Sprite.call(this,a);this.name="sprite";this.type="Sprite";this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent)}Sprite.prototype=Object.create(THREE.Sprite.prototype);Sprite.prototype.dispose=function(){void 0!==this.material.dispose&&this.material.dispose();for(var a=0;a<this.children.length;a++)this.children[a].dispose()};
function PointLight(a,b,c,d){THREE.PointLight.call(this,a,b,c,d);this.name="point_light";this.castShadow=!0;this.shadow.camera.near=.05;this.shadow.camera.far=5E3;this.shadow.bias=.01;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);this.defaultComponents.push(new LightComponent)}PointLight.prototype=Object.create(THREE.PointLight.prototype);
PointLight.prototype.updateShadowMap=function(){this.shadow.map.dispose();this.shadow.map=null;this.shadow.camera.updateProjectionMatrix()};
function SpotLight(a,b,c,d,e,f){THREE.SpotLight.call(this,a,b,c,d,e,f);this.name="spot_light";this.castShadow=!0;this.shadow.camera.near=.5;this.shadow.camera.far=5E3;this.shadow.mapSize.width=512;this.shadow.mapSize.height=512;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);this.defaultComponents.push(new LightComponent)}SpotLight.prototype=Object.create(THREE.SpotLight.prototype);
SpotLight.prototype.updateShadowMap=function(){this.shadow.map.dispose();this.shadow.map=null;this.shadow.camera.updateProjectionMatrix()};function AmbientLight(a){THREE.AmbientLight.call(this,a);this.name="ambient_light";this.matrixAutoUpdate=!1;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);this.defaultComponents.push(new LightComponent)}AmbientLight.prototype=Object.create(THREE.AmbientLight.prototype);
function DirectionalLight(a,b){THREE.DirectionalLight.call(this,a,b);this.name="directional_light";this.castShadow=!0;this.shadow.camera.near=.5;this.shadow.camera.far=1E4;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);this.defaultComponents.push(new LightComponent)}DirectionalLight.prototype=Object.create(THREE.DirectionalLight.prototype);
DirectionalLight.prototype.updateShadowMap=function(){this.shadow.map.dispose();this.shadow.map=null;this.shadow.camera.updateProjectionMatrix()};function HemisphereLight(a,b,c){THREE.HemisphereLight.call(this,a,b,c);this.name="hemisphere_light";this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);this.defaultComponents.push(new LightComponent)}HemisphereLight.prototype=Object.create(THREE.HemisphereLight.prototype);
function Sky(a,b,c,d){THREE.Object3D.call(this);this.name="sky";this.type="Sky";this.clock=new THREE.Clock;this.hemisphere=new HemisphereLight(16777215,16777215,.5);this.hemisphere.color.setHSL(.6,1,.6);this.hemisphere.groundColor.setHSL(.1,1,.75);this.hemisphere.position.set(0,500,0);this.hemisphere.hidden=!0;this.hemisphere.rotationAutoUpdate=!1;this.hemisphere.matrixAutoUpdate=!1;this.add(this.hemisphere);this.sun=new DirectionalLight(Sky.sun_color,.3);this.sun.castShadow=!0;this.sun.hidden=!0;
this.add(this.sun);var e={top_color:{type:"c",value:new THREE.Color(0,.46,1)},bottom_color:{type:"c",value:new THREE.Color(1,1,1)},offset:{type:"f",value:20},exponent:{type:"f",value:.4}};e.top_color.value.copy(this.hemisphere.color);var f=new THREE.SphereBufferGeometry(1E3,16,16);e=new THREE.ShaderMaterial({vertexShader:"varying vec3 vWorldPosition; \tvoid main() \t{ \t\tvec4 worldPosition = modelMatrix * vec4(position, 1.0); \t\tvWorldPosition = worldPosition.xyz; \t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); \t}",
fragmentShader:"uniform vec3 top_color; \tuniform vec3 bottom_color; \tuniform float offset; \tuniform float exponent; \tvarying vec3 vWorldPosition; \tvoid main() \t{ \t\tfloat h = normalize(vWorldPosition + offset).y; \t\tgl_FragColor = vec4(mix(bottom_color, top_color, max(pow(max(h , 0.0), exponent), 0.0)), 1.0); \t}",uniforms:e,side:THREE.BackSide});this.sky=new THREE.Mesh(f,e);this.sky.hidden=!0;this.sky.rotationAutoUpdate=!1;this.sky.matrixAutoUpdate=!1;this.add(this.sky);this.sky.raycast=
function(){return null};this.auto_update=void 0!==a?a:!0;this.sun_distance=void 0!==c?c:500;this.day_time=void 0!==b?b:240;this.time=void 0!==d?d:150;this.updateSky();this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);this.defaultComponents.push(new SkyComponent)}Sky.prototype=Object.create(THREE.Object3D.prototype);Sky.color_top=[new THREE.Color(7844859),new THREE.Color(30463),new THREE.Color(220086),new THREE.Color(9273)];
Sky.color_bottom=[new THREE.Color(15461606),new THREE.Color(16777215),new THREE.Color(16705495),new THREE.Color(26023)];Sky.sun_color=16777130;Sky.moon_color=8947967;Sky.prototype.initialize=function(){this.updateSky();for(var a=0;a<this.children.length;a++)this.children[a].initialize()};Sky.prototype.update=function(){this.auto_update&&(this.time+=this.clock.getDelta(),this.time>this.day_time&&(this.time-=this.day_time),this.updateSky());for(var a=0;a<this.children.length;a++)this.children[a].update()};
Sky.prototype.updateSky=function(){var a=this.time/this.day_time;if(.25>a)this.sky.material.uniforms.top_color.value.setRGB(Sky.color_top[3].r,Sky.color_top[3].g,Sky.color_top[3].b),this.sky.material.uniforms.bottom_color.value.setRGB(Sky.color_bottom[3].r,Sky.color_bottom[3].g,Sky.color_bottom[3].b);else if(.292>a){var b=23.81*(a-.25),c=1-b;this.sky.material.uniforms.top_color.value.setRGB(c*Sky.color_top[3].r+b*Sky.color_top[0].r,c*Sky.color_top[3].g+b*Sky.color_top[0].g,c*Sky.color_top[3].b+b*
Sky.color_top[0].b);this.sky.material.uniforms.bottom_color.value.setRGB(c*Sky.color_bottom[3].r+b*Sky.color_bottom[0].r,c*Sky.color_bottom[3].g+b*Sky.color_bottom[0].g,c*Sky.color_bottom[3].b+b*Sky.color_bottom[0].b)}else.4167>a?(this.sky.material.uniforms.top_color.value.setRGB(Sky.color_top[0].r,Sky.color_top[0].g,Sky.color_top[0].b),this.sky.material.uniforms.bottom_color.value.setRGB(Sky.color_bottom[0].r,Sky.color_bottom[0].g,Sky.color_bottom[0].b)):.5>a?(b=12*(a-.4167),c=1-b,this.sky.material.uniforms.top_color.value.setRGB(c*
Sky.color_top[0].r+b*Sky.color_top[1].r,c*Sky.color_top[0].g+b*Sky.color_top[1].g,c*Sky.color_top[0].b+b*Sky.color_top[1].b),this.sky.material.uniforms.bottom_color.value.setRGB(c*Sky.color_bottom[0].r+b*Sky.color_bottom[1].r,c*Sky.color_bottom[0].g+b*Sky.color_bottom[1].g,c*Sky.color_bottom[0].b+b*Sky.color_bottom[1].b)):.708>a?(this.sky.material.uniforms.top_color.value.setRGB(Sky.color_top[1].r,Sky.color_top[1].g,Sky.color_top[1].b),this.sky.material.uniforms.bottom_color.value.setRGB(Sky.color_bottom[1].r,
Sky.color_bottom[1].g,Sky.color_bottom[1].b)):.75>a?(b=23.81*(a-.708),c=1-b,this.sky.material.uniforms.top_color.value.setRGB(c*Sky.color_top[1].r+b*Sky.color_top[2].r,c*Sky.color_top[1].g+b*Sky.color_top[2].g,c*Sky.color_top[1].b+b*Sky.color_top[2].b),this.sky.material.uniforms.bottom_color.value.setRGB(c*Sky.color_bottom[1].r+b*Sky.color_bottom[2].r,c*Sky.color_bottom[1].g+b*Sky.color_bottom[2].g,c*Sky.color_bottom[1].b+b*Sky.color_bottom[2].b)):.8333>a?(b=12.048*(a-.75),c=1-b,this.sky.material.uniforms.top_color.value.setRGB(c*
Sky.color_top[2].r+b*Sky.color_top[3].r,c*Sky.color_top[2].g+b*Sky.color_top[3].g,c*Sky.color_top[2].b+b*Sky.color_top[3].b),this.sky.material.uniforms.bottom_color.value.setRGB(c*Sky.color_bottom[2].r+b*Sky.color_bottom[3].r,c*Sky.color_bottom[2].g+b*Sky.color_bottom[3].g,c*Sky.color_bottom[2].b+b*Sky.color_bottom[3].b)):(this.sky.material.uniforms.top_color.value.setRGB(Sky.color_top[3].r,Sky.color_top[3].g,Sky.color_top[3].b),this.sky.material.uniforms.bottom_color.value.setRGB(Sky.color_bottom[3].r,
Sky.color_bottom[3].g,Sky.color_bottom[3].b));.2>a?this.sun.color.setHex(Sky.moon_color):.3>a?(b=10*(a-.2),.5>b?(this.sun.intensity=.3*(2-2*b),this.sun.color.setHex(Sky.moon_color)):(this.sun.intensity=.6*b,this.sun.color.setHex(Sky.sun_color))):.7>a?this.sun.color.setHex(Sky.sun_color):.8>a?(b=10*(a-.7),.5>b?(this.sun.intensity=.3*(2-2*b),this.sun.color.setHex(Sky.sun_color)):(this.sun.intensity=.6*b,this.sun.color.setHex(Sky.moon_color))):this.sun.color.setHex(Sky.moon_color);b=MathUtils.pi2*a-
MathUtils.pid2;.25<a&&.75>a?(this.sun.position.x=this.sun_distance*Math.cos(b),this.sun.position.y=this.sun_distance*Math.sin(b)):(this.sun.position.x=this.sun_distance*Math.cos(b+Math.PI),this.sun.position.y=this.sun_distance*Math.sin(b+Math.PI))};
Sky.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.auto_update=this.auto_update;a.object.sun_distance=this.sun_distance;a.object.day_time=this.day_time;a.object.time=this.time;a.object.sun={};a.object.sun.shadow=this.sun.shadow.toJSON();return a};
function PerspectiveCamera(a,b,c,d){void 0===c&&(c=.1);void 0===d&&(d=1E5);THREE.PerspectiveCamera.call(this,a,b,c,d);this.name="camera";this.offset=new THREE.Vector2(0,0);this.viewport=new THREE.Vector2(1,1);this.clear_depth=this.clear_color=!1;this.listener=new THREE.AudioListener;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);this.defaultComponents.push(new CameraComponent)}
PerspectiveCamera.prototype=Object.create(THREE.PerspectiveCamera.prototype);PerspectiveCamera.prototype.initialize=function(){for(var a=0;a<this.children.length;a++)this.children[a].initialize()};PerspectiveCamera.prototype.destroy=function(){var a=ObjectUtils.getScene(this);null!==a&&a.removeCamera(this);THREE.Object3D.prototype.destroy.call(this)};
PerspectiveCamera.prototype.updateProjectionMatrix=function(){var a=this.near*Math.tan(.5*THREE.Math.DEG2RAD*this.fov)/this.zoom,b=2*a,c=this.aspect*b*(void 0!==this.viewport?this.viewport.x/this.viewport.y:1),d=-.5*c;0!==this.filmOffset&&(d+=this.near*this.filmOffset/this.getFilmWidth());this.projectionMatrix.makeFrustum(d,d+c,a-b,a,this.near,this.far)};
PerspectiveCamera.prototype.toJSON=function(a){a=THREE.PerspectiveCamera.prototype.toJSON.call(this,a);a.object.clear_color=this.clear_color;a.object.clear_depth=this.clear_depth;a.object.viewport=this.viewport.toArray();a.object.offset=this.offset.toArray();return a};
function OrthographicCamera(a,b,c,d,e){void 0===d&&(d=0);void 0===e&&(e=1E5);THREE.OrthographicCamera.call(this,-1,1,1,-1,d,e);this.name="camera";this.size=a;this.aspect=b;this.mode=void 0!==c?c:OrthographicCamera.FIXED_VERTICAL;this.offset=new THREE.Vector2(0,0);this.viewport=new THREE.Vector2(1,1);this.clear_depth=this.clear_color=!1;this.listener=new THREE.AudioListener;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);
this.defaultComponents.push(new CameraComponent)}OrthographicCamera.prototype=Object.create(THREE.OrthographicCamera.prototype);OrthographicCamera.FIXED_VERTICAL=0;OrthographicCamera.FIXED_HORIZONTAL=1;OrthographicCamera.prototype.initialize=function(){for(var a=0;a<this.children.length;a++)this.children[a].initialize()};OrthographicCamera.prototype.destroy=function(){var a=ObjectUtils.getScene(this);null!==a&&a.removeCamera(this);THREE.Object3D.prototype.destroy.call(this)};
OrthographicCamera.prototype.updateProjectionMatrix=function(){this.mode===OrthographicCamera.FIXED_VERTICAL?(this.top=this.size/2,this.bottom=-this.top,this.right=this.viewport.x/this.viewport.y*this.aspect*this.top,this.left=-this.right):this.mode===OrthographicCamera.FIXED_HORIZONTAL&&(this.right=this.size/2,this.left=-this.right,this.top=this.right/this.aspect*(this.viewport.x/this.viewport.y),this.bottom=-this.top);THREE.OrthographicCamera.prototype.updateProjectionMatrix.call(this)};
OrthographicCamera.prototype.toJSON=function(a){a=THREE.OrthographicCamera.prototype.toJSON.call(this,a);a.object.size=this.size;a.object.aspect=this.aspect;a.object.mode=this.mode;a.object.clear_color=this.clear_color;a.object.clear_depth=this.clear_depth;a.object.viewport=this.viewport.toArray();a.object.offset=this.offset.toArray();return a};
function AudioEmitter(a){THREE.Audio.call(this,AudioEmitter.listener);this.name="audio";this.type="Audio";this.audio=void 0!==a?a:Editor.default_audio;this.autoplay=!0;this.playbackRate=1;this.startTime=0;this.source.loop=!0;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new AudioComponent)}AudioEmitter.listener=new THREE.AudioListener;AudioEmitter.prototype=Object.create(THREE.Audio.prototype);
AudioEmitter.prototype.initialize=function(){var a=this;null!==this.audio&&THREE.AudioContext.decodeAudioData(this.audio.data,c=>{a.setBuffer(c)});for(var b=0;b<this.children.length;b++)this.children[b].initialize()};AudioEmitter.prototype.dispose=function(){this.isPlaying&&(this.stop(),this.disconnect());for(var a=0;a<this.children.length;a++)this.children[a].dispose()};
AudioEmitter.prototype.toJSON=function(a){var b=this.audio;a=THREE.Object3D.prototype.toJSON.call(this,a,(c,d)=>{b=b.toJSON(c)});a.object.audio=b.uuid;a.object.autoplay=this.autoplay;a.object.startTime=this.startTime;a.object.playbackRate=this.playbackRate;a.object.source={};a.object.source.loop=this.source.loop;return a};
function Script(a){THREE.Object3D.call(this);this.type="Script";this.name="script";this.func=this.scene=this.program=null;this.setCode(void 0!==a?a:"// This block of code is executed one\nthis.initialize = function() {\n\n}\n\n// This block of code is executed once per frame\nthis.update = function() {\n\n}\n");this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ScriptComponent)}Script.prototype=Object.create(THREE.Object3D.prototype);
Script.prototype.initialize=function(){for(var a=this;null!==a.parent;)a=a.parent,a instanceof Scene?this.scene=a:a instanceof Program&&(this.program=a);void 0!==this.script.initialize&&this.script.initialize.call(this);for(a=0;a<this.children.length;a++)this.children[a].initialize()};Script.prototype.update=function(){void 0!==this.script.update&&this.script.update.call(this);for(var a=0;a<this.children.length;a++)this.children[a].update()};
Script.prototype.setCode=function(a){try{this.code=a,this.script=new (new Function(this.code))}catch(b){}};Script.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.code=this.code;return a};
function BlockScript(a,b,c){THREE.Object3D.call(this);this.type="BlockScript";this.name="blocks";this.obj_uuid=void 0!==b?b:this.uuid;this.blocks_type=void 0!==c?c:"scene";this.nodes={config:{blocks:"Blocks",type:this.blocks_type,uuid:this.obj_uuid},extra:{},groups:{},last_link_id:0,last_node_id:0,links:[],nodes:[{flags:{},id:1,mode:0,order:0,outputs:[Object.assign({},{name:"",type:-1,links:null},NodesHelper.slots.output.passer),Object.assign({},{name:"",type:-1,links:null},NodesHelper.slots.output.event)],
pos:[100,352],properties:{},size:[120,26],type:"Events/BeginPlay"},{flags:{},id:2,inputs:[],mode:0,order:1,outputs:[Object.assign({},{name:"",type:-1,links:null},NodesHelper.slots.output.passer)],pos:[100,429],properties:{},size:[120,26],type:"Events/EventTick"}],version:.4};void 0!==a&&(this.nodes=a);this.graph=null;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent)}BlockScript.prototype=Object.create(THREE.Object3D.prototype);
BlockScript.prototype.initialize=function(){var a=this;this.graph=new LGraph(this.nodes);this.graph.config.scene=ObjectUtils.getScene(this);if("scene"===this.graph.config.type)this.graph.config.self=this;else if("class"===this.graph.config.type){var b=void 0!==Editor.program_running&&null!==Editor.program_running?Editor.program_running.scene:Main.program.scene;this.graph.config.scene=b;b.traverse(c=>{void 0!==c.obj_uuid&&c.obj_uuid===a.uuid&&(a.graph.config.self=c)})}setTimeout(()=>{a.graph.start()},
100);for(b=0;b<this.children.length;b++)this.children[b].initialize()};BlockScript.prototype.update=function(){for(var a=0;a<this.children.length;a++)this.children[a].update()};BlockScript.prototype.dispose=function(){null!==this.graph&&(this.graph.sendEventToAllNodes("onDispose"),this.graph.stop(),this.nodes.extra={});for(var a=0;a<this.children.length;a++)this.children[a].dispose()};BlockScript.prototype.updateNodes=function(a){this.nodes=a};
BlockScript.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);delete this.nodes.config.self;delete this.nodes.config.scene;a.object.nodes=this.nodes;return a};
function PhysicsObject(){THREE.Object3D.call(this);this.name="physics";this.type="Physics";this.body=new CANNON.Body;this.body.type=CANNON.Body.DYNAMIC;this.body.mass=1;this.world=null;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent);this.defaultComponents.push(new PhysicsComponent)}PhysicsObject.prototype=Object.create(THREE.Object3D.prototype);
PhysicsObject.prototype.initialize=function(){this.body.position.copy(this.position);this.body.quaternion.copy(this.quaternion);for(var a=this;null!==a.parent;)a=a.parent,a instanceof Scene&&(this.world=a.world,this.world.addBody(this.body));for(a=0;a<this.children.length;a++)this.children[a].initialize()};PhysicsObject.prototype.update=function(){this.position.copy(this.body.position);this.body.fixedRotation||this.quaternion.copy(this.body.quaternion);for(var a=0;a<this.children.length;a++)this.children[a].update()};
PhysicsObject.prototype.addShape=function(a){a instanceof CANNON.Shape&&this.body.addShape(a)};
PhysicsObject.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.body={};a.object.body.type=this.body.type;a.object.body.mass=this.body.mass;a.object.body.linearDamping=this.body.linearDamping;a.object.body.angularDamping=this.body.angularDamping;a.object.body.allowSleep=this.body.allowSleep;a.object.body.sleepSpeedLimit=this.body.sleepSpeedLimit;a.object.body.sleepTimeLimit=this.body.sleepTimeLimit;a.object.body.collisionFilterGroup=this.body.collisionFilterGroup;
a.object.body.collisionFilterMask=this.body.collisionFilterMask;a.object.body.fixedRotation=this.body.fixedRotation;a.object.body.shapes=[];for(var b=this.body.shapes,c=0;c<b.length;c++){var d=b[c],e={};e.type=d.type;d.type===CANNON.Shape.types.SPHERE?e.radius=d.radius:d.type===CANNON.Shape.types.BOX?(e.halfExtents={},e.halfExtents.x=d.halfExtents.x,e.halfExtents.y=d.halfExtents.y,e.halfExtents.z=d.halfExtents.z):d.type===CANNON.Shape.types.CONVEXPOLYHEDRON?(e.vertices=d.vertices,e.faces=d.faces):
d.type===CANNON.Shape.types.TRIMESH&&(e.vertices=d.vertices,e.normals=d.normals,e.edges=d.edges,e.indices=d.indices);a.object.body.shapes[c]=e}return a};
function SpineAnimation(a,b,c,d){if(void 0!==d)var e=new spine.TextureAtlas(b,f=>{for(var g=0;g<d.length;g++)if(d[g].name===f)return f=new SpineTexture(d[g].texture),g=f.texture.image,g.width=1024,g.height=1024,f});else d=[],e=new spine.TextureAtlas(b,f=>{var g=new SpineTexture(new Texture(new GORLOT.Image(c+"/"+f))),k=new g.texture.image;k.width=1024;k.height=1024;d.push({name:f,texture:g.texture});return g});e=new spine.TextureAtlasAttachmentLoader(e);e=(new spine.SkeletonJson(e)).readSkeletonData(a);
THREE.Mesh.call(this);this.zOffset=.1;this.skeleton=new spine.Skeleton(e);e=new spine.AnimationStateData(e);this.state=new spine.AnimationState(e);this.batcher=new spine.threejs.MeshBatcher(this);e=new THREE.MeshBasicMaterial;e.side=THREE.DoubleSide;e.transparent=!0;e.name="spine";e.alphaTest=.5;this.material=e;this.json=a;this.atlas=b;this.textures=d;this.name="spine";this.type="SpineAnimation";this.scale.set(.005,.005,.005);this.frustumCulled=!1;this.castShadow=this.receiveShadow=!0;this.clock=
new THREE.Clock;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent)}SpineAnimation.prototype=Object.create(THREE.Mesh.prototype);SpineAnimation.QUAD_TRIANGLES=[0,1,2,2,3,0];SpineAnimation.prototype.update=function(){var a=this.state,b=this.skeleton;a.update(this.clock.getDelta());a.apply(b);b.updateWorldTransform();this.updateGeometry();for(a=0;a<this.children.length;a++)this.children[a].update()};
SpineAnimation.prototype.getAnimations=function(){return this.state.data.skeletonData.animations};SpineAnimation.prototype.setAnimation=function(a,b){try{this.state.setAnimation(a,b,!0)}catch(c){}};SpineAnimation.prototype.getSkins=function(){return this.state.data.skeletonData.skins};
SpineAnimation.prototype.updateGeometry=function(){var a=this.skeleton.drawOrder,b=0,c=this.zOffset,d=this.batcher;d.begin();for(var e=0,f=a.length;e<f;e++){var g=a[e];var k=g.getAttachment();if(k instanceof spine.RegionAttachment){var l=k;g=l.updateWorldVertices(g,!1);k=SpineAnimation.QUAD_TRIANGLES;l=l.region.renderObject.texture}else if(k instanceof spine.MeshAttachment)l=k,g=l.updateWorldVertices(g,!1),k=l.triangles,l=l.region.renderObject.texture;else continue;if(null!==l){if(!this.material.map){var m=
this.material;m.map=l.texture;m.needsUpdate=!0}d.batch(g,k,b);b+=c}}d.end()};SpineAnimation.prototype.toJSON=function(a){var b=this.geometry,c=this.material;this.material=this.geometry=void 0;var d=[],e=this;a=THREE.Object3D.prototype.toJSON.call(this,a,(f,g)=>{for(g=0;g<e.textures.length;g++){var k=e.textures[g].texture.toJSON(f);d.push({name:e.textures[g].name,texture:k.uuid})}});a.object.json=this.json;a.object.atlas=this.atlas;a.object.textures=d;this.geometry=b;this.material=c;return a};
function SpineTexture(a){spine.Texture.call(this,a.image);this.texture=a;this.texture.flipY=!1}SpineTexture.prototype=Object.create(spine.Texture.prototype);SpineTexture.prototype.setFilters=function(a,b){this.texture.minFilter=SpineTexture.getTextureFilter(a);this.texture.magFilter=SpineTexture.getTextureFilter(b)};SpineTexture.prototype.setWraps=function(a,b){this.texture.wrapS=SpineTexture.getTextureWrap(a);this.texture.wrapT=SpineTexture.getTextureWrap(b)};SpineTexture.prototype.dispose=function(){this.texture.dispose()};
SpineTexture.getTextureFilter=function(a){return a===spine.TextureFilter.Linear?THREE.LinearFilter:a===spine.TextureFilter.MipMap||a===spine.TextureFilter.MipMapLinearLinear?THREE.LinearMipMapLinearFilter:a===spine.TextureFilter.MipMapLinearNearest?THREE.LinearMipMapNearestFilter:a===spine.TextureFilter.MipMapNearestNearest?THREE.NearestMipMapNearestFilter:a===spine.TextureFilter.Nearest?THREE.NearestFilter:null};
SpineTexture.getTextureWrap=function(a){if(a===spine.TextureWrap.ClampToEdge)return THREE.ClampToEdgeWrapping;if(a===spine.TextureWrap.MirroredRepeat)return THREE.MirroredRepeatWrapping;if(a===spine.TextureWrap.Repeat)return THREE.RepeatWrapping};function Bone(){THREE.Bone.call(this);this.name="bone";this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent)}Bone.prototype=Object.create(THREE.Bone.prototype);
function Container(){THREE.Object3D.call(this);this.name="empty";this.type="Group";this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent)}Container.prototype=Object.create(THREE.Object3D.prototype);
function ParticleEmitter(a,b){THREE.Object3D.call(this);this.type="ParticleEmiter";this.name="particle";this.nodes={config:{},groups:[],last_link_id:0,last_node_id:1,links:[],nodes:[{flags:{},id:1,mode:0,order:0,outputs:[],pos:[130,130],properties:{},extra:{},size:[210,234],type:"Particles/Particles"}],version:.4};this.clock=new THREE.Clock;this.group=void 0!==a?new SPE.Group(a):new SPE.Group({texture:{value:new Texture(new GORLOT.Image("Engine/Data/particle.png"))},maxParticleCount:2E3,blending:THREE.AdditiveBlending,
hasPerspective:!0});this.group.mesh.frustumCulled=!1;this.emitter=void 0!==b?new SPE.Emitter(b):new SPE.Emitter({particleCount:2E3,type:SPE.distributions.BOX,maxAge:{value:2,spread:0},velocity:{value:new THREE.Vector3(0,25,0),spread:new THREE.Vector3(10,7.5,10)},acceleration:{value:new THREE.Vector3(0,-10,0),spread:new THREE.Vector3(10,0,10)},color:{value:[new THREE.Color(1,1,1)],spread:[new THREE.Vector3(0,0,0)]}});this.group.addEmitter(this.emitter);this.components=[];this.defaultComponents=[];
this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent)}ParticleEmitter.prototype=Object.create(THREE.Object3D.prototype);ParticleEmitter.prototype.initialize=function(){for(var a=0;a<this.children.length;a++)this.children[a].initialize();this.clock.getDelta();this.add(this.group.mesh)};ParticleEmitter.prototype.update=function(){this.group.tick(this.clock.getDelta());for(var a=0;a<this.children.length;a++)this.children[a].update()};
ParticleEmitter.prototype.updateNodes=function(a){this.nodes=a};ParticleEmitter.prototype.dispose=function(){for(var a=0;a<this.children.length;a++)this.children[a].dispose()};
ParticleEmitter.prototype.toJSON=function(a){var b=this.group.texture;a=THREE.Object3D.prototype.toJSON.call(this,a,function(c,d){b=b.toJSON(c)});a.object.group={};a.object.group.texture={};a.object.group.texture.value=b.uuid;a.object.group.textureFrames=this.group.textureFrames;a.object.group.textureFrameCount=this.group.textureFrameCount;a.object.group.textureLoop=this.group.textureLoop;a.object.group.hasPerspective=this.group.hasPerspective;a.object.group.colorize=this.group.colorize;a.object.group.maxParticleCount=
this.group.maxParticleCount;a.object.group.blending=this.group.blending;a.object.group.scale=this.group.scale;a.object.group.depthWrite=this.group.depthWrite;a.object.group.depthTest=this.group.depthTest;a.object.group.fog=this.group.fog;a.object.emitter={};a.object.emitter.uuid=this.emitter.uuid;a.object.emitter.direction=this.emitter.direction;a.object.emitter.particleCount=this.emitter.particleCount;a.object.emitter.duration=this.emitter.duration;a.object.emitter.type=this.emitter.type;a.object.emitter.maxAge=
{};a.object.emitter.maxAge.value=this.emitter.maxAge.value;a.object.emitter.maxAge.spread=this.emitter.maxAge.spread;a.object.emitter.position={};a.object.emitter.position.value=this.emitter.position.value;a.object.emitter.position.spread=this.emitter.position.spread;a.object.emitter.velocity={};a.object.emitter.velocity.value=this.emitter.velocity.value;a.object.emitter.velocity.spread=this.emitter.velocity.spread;a.object.emitter.acceleration={};a.object.emitter.acceleration.value=this.emitter.acceleration.value;
a.object.emitter.acceleration.spread=this.emitter.acceleration.spread;a.object.emitter.wiggle={};a.object.emitter.wiggle.value=this.emitter.wiggle.value;a.object.emitter.wiggle.spread=this.emitter.wiggle.spread;a.object.emitter.opacity={};a.object.emitter.opacity.value=this.emitter.opacity.value;a.object.emitter.opacity.spread=this.emitter.opacity.spread;a.object.emitter.size={};a.object.emitter.size.value=this.emitter.size.value;a.object.emitter.size.spread=this.emitter.size.spread;a.object.emitter.angle=
{};a.object.emitter.angle.value=this.emitter.angle.value;a.object.emitter.angle.spread=this.emitter.angle.spread;a.object.emitter.color={};a.object.emitter.color.value=this.emitter.color.value;a.object.emitter.color.spread=this.emitter.color.spread;a.object.nodes=this.nodes;return a};
function Program(a){THREE.Object3D.call(this);this.type="Program";this.matrixAutoUpdate=!1;this.name=void 0!==a?a:"program";this.author=this.description="";this.version="0";this.vr=this.lock_pointer=!1;this.vr_scale=1;this.antialiasing=!1;this.shadows=!0;this.shadows_type=THREE.PCFSoftShadowMap;this.images=[];this.videos=[];this.audio=[];this.fonts=[];this.materials=[];this.textures=[];this.geometries=[];this.asset_objects=[];this.scene=this.renderer=this.html=this.default_camera=this.default_scene=
null;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ProgramComponent)}Program.prototype=Object.create(THREE.Object3D.prototype);Program.prototype.initialize=function(){if(null!==this.default_scene)for(var a=0;a<this.children.length;a++){if(this.children[a].uuid===this.default_scene){this.setScene(this.children[a]);break}}else this.setScene(this.children[0])};Program.prototype.update=function(){this.scene.update()};
Program.prototype.render=function(a){a.setScissorTest(!0);for(var b=a.domElement.width,c=a.domElement.height,d=0;d<this.scene.cameras.length;d++){var e=this.scene.cameras[d];e.clear_color&&a.clearColor();e.clear_depth&&a.clearDepth();a.setViewport(b*e.offset.x,c*e.offset.y,b*e.viewport.x,c*e.viewport.y);a.setScissor(b*e.offset.x,c*e.offset.y,b*e.viewport.x,c*e.viewport.y);a.render(this.scene,e)}a.setScissorTest(!1)};
Program.prototype.resize=function(a,b){for(var c=0;c<this.scene.cameras.length;c++)this.scene.cameras[c].aspect=a/b,this.scene.cameras[c].updateProjectionMatrix()};Program.prototype.addMaterial=function(a){a instanceof THREE.Material&&(this.materials[a.uuid]=a)};Program.prototype.removeMaterial=function(a,b,c){a instanceof THREE.Material&&(delete this.materials[a.uuid],this.traverse(function(d){void 0!==d.material&&d.material.uuid===a.uuid&&(d.material=d instanceof THREE.Sprite?c:b)}))};
Program.prototype.addTexture=function(a){this.textures[a.uuid]=a};Program.prototype.addObject=function(a){this.asset_objects[a.uuid]=a};Program.prototype.removeObject=function(a){a instanceof THREE.Object3D&&delete this.asset_objects[a.uuid]};Program.prototype.setScene=function(a){a instanceof Scene?this.scene=a:"string"===typeof a&&(this.scene=this.getObjectByName(a));null!==this.scene&&(this.scene.initialize(),0===this.scene.cameras.length&&this.scene.cameras.push(this.default_camera))};
Program.prototype.remove=function(a){var b=this.children.indexOf(a);-1<b&&(this.children.splice(b,1),a.parent=null);0===this.children.length&&(this.scene=null)};Program.prototype.add=function(a){a instanceof Scene&&(this.children.push(a),a.parent=this,1===this.children.length&&(this.scene=this.children[0]))};Program.prototype.clone=function(){return(new ObjectLoader).parse(this.toJSON())};Program.prototype.setInitialScene=function(a){this.default_scene=a.uuid};
Program.prototype.addDefaultScene=function(a){void 0===a&&(a=new MeshStandardMaterial({roughness:.6,metalness:.2}),a.name="default");var b=new Scene,c=new Sky;c.auto_update=!1;b.add(c);c=new THREE.BoxBufferGeometry(1,1,1);var d=new Mesh(c,a);d.scale.set(4,4,4);d.position.set(0,1.5,0);d.receiveShadow=!0;d.castShadow=!0;d.name="box";b.add(d);d=new Mesh(c,a);d.scale.set(40,2,40);d.position.set(0,-1.5,0);d.receiveShadow=!0;d.castShadow=!0;d.name="ground";b.add(d);this.add(b)};
Program.prototype.dispose=function(){for(var a=0;a<this.materials.length;a++)this.materials[a].dispose();for(a=0;a<this.textures.length;a++)this.textures[a].dispose();for(a=0;a<this.children.length;a++)this.children[a].dispose()};
Program.prototype.toJSON=function(a){var b=this;a=THREE.Object3D.prototype.toJSON.call(this,a,function(c,d){d=b.materials;for(var e in d){var f=d[e];void 0===c.materials[f.uuid]&&(c.materials[f.uuid]=f.toJSON(c))}f=b.asset_objects;for(e in f)d=f[e],void 0===c.asset_objects[d.uuid]&&(c.asset_objects[d.uuid]=d.toJSON(c))});a.object.author=this.author;a.object.description=this.description;a.object.version=this.version;a.object.lock_pointer=this.lock_pointer;a.object.vr=this.vr;a.object.vr_scale=this.vr_scale;
null!==this.default_scene&&(a.object.default_scene=this.default_scene);return a};
function Scene(){THREE.Scene.call(this);this.name="scene";this.matrixAutoUpdate=!1;this.clock=new THREE.Clock;this.cameras=[];this.world=new CANNON.World;this.world.defaultContactMaterial.contactEquationStiffness=1E9;this.world.defaultContactMaterial.contactEquationRelaxation=4;this.world.quatNormalizeSkip=0;this.world.quatNormalizeFast=!1;this.world.gravity.set(0,-9.8,0);this.world.broadphase=new CANNON.NaiveBroadphase;this.world.solver=new CANNON.SplitSolver(new CANNON.GSSolver);this.world.solver.tolerance=
.1;this.world.solver.iterations=7;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new SceneComponent)}Scene.prototype=Object.create(THREE.Scene.prototype);Scene.prototype.initialize=function(){for(var a=0;a<this.children.length;a++)this.children[a].initialize()};Scene.prototype.update=function(){this.world.step(this.clock.getDelta());for(var a=0;a<this.children.length;a++)this.children[a].update()};
Scene.prototype.getCamera=function(a,b){void 0===b&&(b=this);if(a===b.uuid)return b;b=b.children;for(var c=0;c<b.length;c++){var d=this.getCamera(a,b[c]);if(null!==d)return d}return null};Scene.prototype.addCamera=function(a){this.cameras.push(a)};Scene.prototype.removeCamera=function(a){a=this.cameras.indexOf(a);-1<a&&this.cameras.splice(a,1)};
Scene.prototype.setFogMode=function(a){var b=null!==this.fog?this.fog.color.getHex():"#FFFFFF";a===THREE.Fog.LINEAR?this.fog=new THREE.Fog(b,5,20):a===THREE.Fog.EXPONENTIAL?this.fog=new THREE.FogExp2(b,.01):a===THREE.Fog.NONE&&(this.fog=null)};
Scene.prototype.toJSON=function(a){a=THREE.Scene.prototype.toJSON.call(this,a);null!==this.background&&(a.object.background=this.background);a.object.cameras=[];for(var b=0;b<this.cameras.length;b++)a.object.cameras.push(this.cameras[b].uuid);a.object.world={};a.object.world.gravity=this.world.gravity;a.object.world.solver={};a.object.world.solver.tolerance=this.world.solver.tolerance;a.object.world.solver.iterations=this.world.solver.iterations;return a};
function ObjectCaller(a,b){THREE.Object3D.call(this);this.name="caller";this.type="ObjectCaller";this.obj=null;this.obj_uuid=void 0===a?null:a;this.obj_type=void 0===b?null:b;this.program=null;this.components=[];this.defaultComponents=[];this.defaultComponents.push(new ElementComponent);this.defaultComponents.push(new ObjectComponent)}ObjectCaller.prototype=Object.create(THREE.Object3D.prototype);
ObjectCaller.prototype.initialize=function(){this.program=void 0!==Editor.program_running&&null!==Editor.program_running?Editor.program_running:Main.program;null!==this.obj_uuid&&void 0!==this.program.asset_objects[this.obj_uuid]&&(this.obj=this.program.asset_objects[this.obj_uuid],this.obj.initialize());for(var a=0;a<this.children.length;a++)this.children[a].initialize()};ObjectCaller.prototype.update=function(){if(null!==this.obj){this.obj.update();for(var a=0;a<this.children.length;a++)this.children[a].update()}};
ObjectCaller.prototype.dispose=function(){if(null!==this.obj){this.obj.dispose();for(var a=0;a<this.children.length;a++)this.children[a].dispose()}};ObjectCaller.prototype.setObject=function(a){this.obj_uuid=a.uuid;this.name=a.name;this.obj_type=a.type};ObjectCaller.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.obj_uuid=this.obj_uuid;a.object.obj_type=this.obj_type;return a};function Base64Utils(){}
Base64Utils.fromArrayBuffer=function(a){var b="";a=new Uint8Array(a);for(var c=a.byteLength%3,d=a.byteLength-c,e,f,g,k,l=0;l<d;l+=3)k=a[l]<<16|a[l+1]<<8|a[l+2],e=(k&16515072)>>18,f=(k&258048)>>12,g=(k&4032)>>6,k&=63,b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k];1===
c?(k=a[d],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(k&252)>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(k&3)<<4]+"=="):2===c&&(k=a[d]<<8|a[d+1],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(k&64512)>>10]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(k&1008)>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(k&15)<<2]+"=");return b};
Base64Utils.fromBinaryString=function(a){var b="",c=a.length%3,d=a.length-c,e;for(e=0;e<d;e+=3){var f=a.charCodeAt(e)&255;var g=a.charCodeAt(e+1);var k=a.charCodeAt(e+2);b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>2);b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((f&3)<<4|(g&240)>>4);b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((g&15)<<2|(k&192)>>6);b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(k&
63)}1===c?(f=a.charCodeAt(e)&255,b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>2),b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((f&3)<<4),b+="=="):2===c&&(f=a.charCodeAt(e)&255,g=a.charCodeAt(e+1),b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>2),b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((f&3)<<4)|(g&&240)>>4,b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((g&
15)<<2),b+="==");return b};function ArraybufferUtils(){}ArraybufferUtils.fromBinaryString=function(a){for(var b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c),e=0;e<b;e++)d[e]=a.charCodeAt();return c};
ArraybufferUtils.fromBase64=function(a){for(var b=a.length/4*3,c=new ArrayBuffer(b),d=new Uint8Array(c),e,f,g,k,l=0,m=0;l<b;l+=3)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(m++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(m++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(m++)),k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(m++)),d[l]=
e<<2|f>>4,64!==g&&(d[l+1]=(f&15)<<4|g>>2),64!==k&&(d[l+2]=(g&3)<<6|k);return c};function MathUtils(){}MathUtils.pi2=2*Math.PI;MathUtils.pid2=Math.PI/2;function ObjectUtils(){}
ObjectUtils.getMaterials=function(a,b){function c(k){void 0===b[k.uuid]&&(b[k.uuid]=k)}void 0===b&&(b=[]);for(var d=0;d<a.children.length;d++){var e=a.children[d];if(!(e.hidden||void 0===e.material||e instanceof Sky||e instanceof SpineAnimation))if(e.material instanceof THREE.Material)c(e.material);else if(e.material instanceof THREE.MultiMaterial)for(var f=e.material.materials,g=0;g<f.length;g++)c(f[g]);ObjectUtils.getMaterials(e,b)}return b};
ObjectUtils.getTextures=function(a,b){function c(g){null!==g&&void 0!==g&&void 0===b[g.uuid]&&(b[g.uuid]=g)}void 0===b&&(b=[]);for(var d=0;d<a.children.length;d++){var e=a.children[d];if(void 0!==e.material){var f=e.material;c(f.map);c(f.bumpMap);c(f.normalMap);c(f.displacementMap);c(f.specularMap);c(f.emissiveMap);c(f.alphaMap);c(f.roughnessMap);c(f.metalnessMap)}else e instanceof ParticleEmitter&&c(e.group.texture);ObjectUtils.getTextures(e,b)}return b};
ObjectUtils.getScene=function(a){for(;null!==a.parent;)if(a=a.parent,a instanceof Scene)return a;return null};ObjectUtils.getRoot=function(a){for(;null!==a.parent;)a=a.parent;return a};ObjectUtils.setMatrixAutoUpdate=function(a,b){a.traverse(c=>{c.matrixAutoUpdate=b})};ObjectUtils.setShadowReceiving=function(a,b){a.traverse(c=>{c.receiveShadow=b})};ObjectUtils.setShadowCasting=function(a,b){a.traverse(c=>{c.castShadow=b})};
ObjectUtils.isChildOf=function(a,b){for(var c=0;c<a.children.length;c++)if(a.children[c]===b||ObjectUtils.isChildOf(a.children[c],b))return!0;return!1};var PI2=Math.PI/2;function Mesh2shape(){}Mesh2shape.Type={BOX:"Box",CYLINDER:"Cylinder",SPHERE:"Sphere",HULL:"ConvexPolyhedron"};
Mesh2shape.createShape=function(a,b){if(void 0!==b){if(b===Mesh2shape.Type.BOX)return Mesh2shape.createBoundingBoxShape(a);if(b===Mesh2shape.Type.CYLINDER)return Mesh2shape.createBoundingCylinderShape(a,options);if(b===Mesh2shape.Type.SPHERE)return Mesh2shape.createBoundingSphereShape(a,options);if(b===Mesh2shape.Type.HULL)return Mesh2shape.createConvexPolyhedron(a);console.warn("[CANNON.mesh2shape] Invalid type",b)}var c=Mesh2shape.getGeometry(a);if(!c)return null;b=c.metadata?c.metadata.type:c.type;
switch(b){case "BoxGeometry":case "BoxBufferGeometry":return Mesh2shape.createBoxShape(c);case "CylinderGeometry":case "CylinderBufferGeometry":return Mesh2shape.createCylinderShape(c);case "PlaneGeometry":case "PlaneBufferGeometry":return Mesh2shape.createPlaneShape(c);case "SphereGeometry":case "SphereBufferGeometry":return Mesh2shape.createSphereShape(c);case "TubeGeometry":return Mesh2shape.createTubeShape(c);case "Geometry":case "BufferGeometry":return Mesh2shape.createConvexPolyhedron(a);default:return console.warn("Unrecognized geometry: Using bounding box as shape.",
c.type),Mesh2shape.createBoxShape(c)}};Mesh2shape.createBoxShape=function(a){if(!Mesh2shape.getVertices(a).length)return null;a.computeBoundingBox();a=a.boundingBox;return new CANNON.Box(new CANNON.Vec3((a.max.x-a.min.x)/2,(a.max.y-a.min.y)/2,(a.max.z-a.min.z)/2))};
Mesh2shape.createBoundingBoxShape=function(a){var b=new THREE.BoundingBoxHelper(a);b.update();var c=b.box;if(!isFinite(c.min.lengthSq()))return null;c=new CANNON.Box(new CANNON.Vec3((c.max.x-c.min.x)/2,(c.max.y-c.min.y)/2,(c.max.z-c.min.z)/2));a.updateMatrixWorld();var d=new THREE.Vector3;d.setFromMatrixPosition(a.matrixWorld);a=b.position.sub(d);a.lengthSq()&&(c.offset=a);return c};
Mesh2shape.createConvexPolyhedron=function(a){var b=Mesh2shape.getGeometry(a);b instanceof THREE.BufferGeometry&&(b=(new THREE.Geometry).fromBufferGeometry(b));if(!b||!b.vertices.length)return null;for(a=0;a<b.vertices.length;a++)b.vertices[a].x+=1E-4*(Math.random()-.5),b.vertices[a].y+=1E-4*(Math.random()-.5),b.vertices[a].z+=1E-4*(Math.random()-.5);var c=(new quickhull)(b);console.log(c);b=Array(c.vertices.length);for(a=0;a<c.vertices.length;a++)b[a]=new CANNON.Vec3(c.vertices[a].x,c.vertices[a].y,
c.vertices[a].z);var d=Array(c.faces.length);for(a=0;a<c.faces.length;a++)d[a]=[c.faces[a].a,c.faces[a].b,c.faces[a].c];return new CANNON.ConvexPolyhedron(b,d)};Mesh2shape.createCylinderShape=function(a){a=a.metadata?a.metadata.parameters:a.parameters;a=new CANNON.Cylinder(a.radiusTop,a.radiusBottom,a.height,a.radialSegments);a.orientation=new CANNON.Quaternion;a.orientation.setFromEuler(THREE.Math.degToRad(-90),0,0,"XYZ").normalize();return a};
Mesh2shape.createBoundingCylinderShape=function(a,b){var c=["x","y","z"];b=b.cylinderAxis||"y";c=c.splice(c.indexOf(b),1)&&c;a=Mesh2shape.getGeometry(a);a.computeBoundingBox();a.computeBoundingSphere();c=.5*Math.max(a.boundingBox.max[c[0]]-a.boundingBox.min[c[0]],a.boundingBox.max[c[1]]-a.boundingBox.min[c[1]]);a=new CANNON.Cylinder(c,c,a.boundingBox.max[b]-a.boundingBox.min[b],12);a.orientation=new CANNON.Quaternion;a.orientation.setFromEuler("y"===b?PI2:0,"z"===b?PI2:0,0,"XYZ").normalize();return a};
Mesh2shape.createPlaneShape=function(a){a.computeBoundingBox();a=a.boundingBox;return new CANNON.Box(new CANNON.Vec3((a.max.x-a.min.x)/2||.1,(a.max.y-a.min.y)/2||.1,(a.max.z-a.min.z)/2||.1))};Mesh2shape.createSphereShape=function(a){return new CANNON.Sphere((a.metadata?a.metadata.parameters:a.parameters).radius)};Mesh2shape.createBoundingSphereShape=function(a,b){a=Mesh2shape.getGeometry(a);a.computeBoundingSphere();return new CANNON.Sphere(b.sphereRadius||a.boundingSphere.radius)};
Mesh2shape.createTubeShape=function(a){var b=new THREE.BufferGeometry;b.fromGeometry(a);return createTrimeshShape(b)};Mesh2shape.createTrimeshShape=function(a){var b=Mesh2shape.getVertices(a);if(!b.length)return null;a=Object.keys(b).map(Number);return new CANNON.Trimesh(b,a)};
Mesh2shape.getGeometry=function(a){var b=Mesh2shape.getMeshes(a);if(0===b.length)return null;var c=new THREE.Geometry;if(1===b.length){a=new THREE.Vector3;var d=new THREE.Quaternion,e=new THREE.Vector3;c=b[0].geometry.clone();c.metadata=b[0].geometry.metadata;b[0].updateMatrixWorld();b[0].matrixWorld.decompose(a,d,e);return c.scale(e.x,e.y,e.z)}for(d=new THREE.Geometry;e=b.pop();)e.updateMatrixWorld(),e.geometry instanceof THREE.BufferGeometry?(c.fromBufferGeometry(e.geometry),d.merge(c,e.matrixWorld)):
d.merge(e.geometry,e.matrixWorld);b=new THREE.Matrix4;b.scale(a.scale);d.applyMatrix(b);return d};Mesh2shape.getVertices=function(a){a.attributes||(a=(new THREE.BufferGeometry).fromGeometry(a));return a.attributes.position.array};Mesh2shape.getMeshes=function(a){var b=[];a.traverse(function(c){"Mesh"===c.type&&b.push(c)});return b};function MeshBasicMaterial(a){THREE.MeshBasicMaterial.call(this,a)}MeshBasicMaterial.prototype=Object.create(THREE.MeshBasicMaterial.prototype);
MeshBasicMaterial.prototype.toJSON=function(a){a=THREE.Material.prototype.toJSON.call(this,a);a.nodes=this.nodes;return a};function MeshLambertMaterial(a){THREE.MeshLambertMaterial.call(this,a)}MeshLambertMaterial.prototype=Object.create(THREE.MeshLambertMaterial.prototype);MeshLambertMaterial.prototype.toJSON=function(a){a=THREE.Material.prototype.toJSON.call(this,a);a.nodes=this.nodes;return a};function MeshNormalMaterial(a){THREE.MeshNormalMaterial.call(this,a)}MeshNormalMaterial.prototype=Object.create(THREE.MeshNormalMaterial.prototype);
MeshNormalMaterial.prototype.toJSON=function(a){a=THREE.Material.prototype.toJSON.call(this,a);a.nodes=this.nodes;return a};function MeshPhongMaterial(a){THREE.MeshPhongMaterial.call(this,a)}MeshPhongMaterial.prototype=Object.create(THREE.MeshPhongMaterial.prototype);MeshPhongMaterial.prototype.toJSON=function(a){a=THREE.Material.prototype.toJSON.call(this,a);a.nodes=this.nodes;return a};function MeshShaderMaterial(a){THREE.ShaderMaterial.call(this,a)}MeshShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);
MeshShaderMaterial.prototype.toJSON=function(a){a=THREE.ShaderMaterial.prototype.toJSON.call(this,a);a.nodes=this.nodes;return a};function MeshStandardMaterial(a){THREE.MeshStandardMaterial.call(this,a)}MeshStandardMaterial.prototype=Object.create(THREE.MeshStandardMaterial.prototype);MeshStandardMaterial.prototype.toJSON=function(a){a=THREE.Material.prototype.toJSON.call(this,a);a.nodes=this.nodes;return a};
function Panel(a){this.parent=void 0===a?document.body:a;Panel.id++;this.element=document.createElement("div");this.element.style.position="absolute";this.element.style.overflow="auto";this.element.style.cursor="default";this.element.style.backgroundColor=Editor.theme.panel_color;this.element.ondrop=function(b){b.preventDefault()};this.element.ondragover=function(b){b.preventDefault()};this.components=[];this.children_pos=new THREE.Vector2(5,10);this.fit_parent=!0;this.size=new THREE.Vector2(0,0);
this.position=new THREE.Vector2(0,0);this.visible=!0;this.obj=null;this.parent.appendChild(this.element)}Panel.id=0;Panel.prototype.updatePanel=function(){if(null!==this.obj)for(var a=0;a<this.components.length;a++)this.components[a].updateData&&this.components[a].updateData(this.obj)};
Panel.prototype.attachObject=function(a){if(a instanceof THREE.Object3D){this.obj=a;this.updateComponents();var b=this;this.add=new Button(this.element);this.add.setText("Add Component");this.add.setCallback(c=>{var d=new ContextMenu;d.size.set(130,20);var e=App.componentManager.length;d.position.set(c.clientX-5,event.clientY-10*e);for(c=0;c<e;c++){var f=App.componentManager[c];d.addOption(f.component_name,()=>{var g=!1;b.obj.components.includes(f)&&(g=!0);g||(b.obj.components.push(f),b.obj.components[b.obj.components.length-
1].onCreate(b.obj),b.updateComponents())})}});this.add.updateInterface();this.updateInterface();this.updatePanel()}};
Panel.prototype.updateComponents=function(){if(void 0!==this.obj.components&&void 0!==this.obj.defaultComponents){this.components=this.obj.defaultComponents.concat(this.obj.components);this.children_pos.equals(new THREE.Vector2(5,10))||this.children_pos.set(5,10);for(var a=0;a<this.components.length;a++)this.element.appendChild(this.components[a].initUI(this.children_pos,this.obj)),this.children_pos.y+=10;this.updatePanel();this.updateInterface()}};Panel.prototype.destroy=function(){try{this.parent.removeChild(this.element)}catch(a){}};
Panel.prototype.update=function(){};
Panel.prototype.updateInterface=function(){this.fit_parent&&(this.size.x=this.parent.offsetWidth,this.size.y=this.parent.offsetHeight);for(var a=0;a<this.components.length;a++)this.components[a].updateInterface();this.element.style.visiblility=this.visible?"visible":"hidden";void 0!==this.add&&(this.add.size.set(this.size.x-30,20),this.add.position.copy(this.children_pos),this.add.updateInterface());this.element.style.top=this.position.y+"px";this.element.style.left=this.position.x+"px";this.element.style.width=
this.size.x+"px";this.element.style.height=this.size.y+"px"};function Component(){this.values={};this.obj=null;this.element=document.createElement("div");this.className=this.component_name="";this.widgetsPos=new THREE.Vector2}Component.prototype.clearElement=function(){if(0<this.element.children.length){var a=new Range;a.selectNodeContents(this.element);a.deleteContents()}};
Component.prototype.addDeleteButton=function(){var a=this;this.delete=new Button(this.element);this.delete.setText("Delete Component");this.delete.size.set(120,20);this.delete.position.copy(this.widgetsPos);this.delete.updateInterface();this.delete.setCallback(()=>{a.onDelete()});this.widgetsPos.y+=this.delete.size.y};
Component.prototype.addResetButton=function(){var a=this;this.reset=new Button(this.element);this.reset.setText("Reset Defaults");this.reset.size.set(100,20);this.reset.position.copy(this.widgetsPos);this.reset.updateInterface();this.reset.setCallback(()=>{a.onReset()});this.widgetsPos.y+=this.reset.size.y};Component.prototype.onDelete=function(){};Component.prototype.onReset=function(){};Component.prototype.onCreate=function(){};Component.prototype.initialize=function(){};
Component.prototype.update=function(){};Component.prototype.updateInterface=function(){this.element.style.width=this.form.size.x+"px";this.form.updateInterface()};Component.prototype.toJSON=function(){var a={};a.name=this.component_name;a.className=this.className;a.values=this.values;return a};function AudioComponent(){Component.call(this);this.component_name="Audio";this.className="AudioComponent";this.values={autoplay:!0,loop:!0,playbackRate:1}}AudioComponent.prototype=Object.create(Component.prototype);
AudioComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.autoplay=new CheckBox(this.form.element);this.autoplay.setText("Autoplay");this.autoplay.size.set(150,15);this.autoplay.setOnChange(()=>{null!==c.obj&&(c.obj.autoplay=c.autoplay.getValue())});this.form.add(this.autoplay);this.form.nextRow();this.loop=new CheckBox(this.form.element);
this.loop.setText("Loop");this.loop.size.set(150,15);this.loop.setOnChange(()=>{null!==c.obj&&(c.obj.source.loop=c.loop.getValue())});this.form.add(this.loop);this.form.nextRow();this.form.addText("Playback Speed");this.playbackRate=new NumberBox(this.form.element);this.playbackRate.size.set(60,18);this.playbackRate.setStep(.01);this.playbackRate.setRange(0,Number.MAX_SAFE_INTEGER);this.playbackRate.setOnChange(()=>{null!==c.obj&&(c.obj.playbackRate=c.playbackRate.getValue())});this.form.add(this.playbackRate);
this.form.nextRow();this.form.position.copy(this.widgetsPos);this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton(this.onReset);return this.element};AudioComponent.prototype.updateData=function(){this.autoplay.setValue(this.obj.autoplay);this.loop.setValue(this.obj.source.loop);this.playbackRate.setValue(this.obj.playbackRate)};
AudioComponent.prototype.onReset=function(){this.obj.autoplay=this.values.autoplay;this.obj.source.loop=this.values.loop;this.obj.playbackRate=this.values.playbackRate;Editor.updateObjectViews();this.updateData()};function ElementComponent(){Component.call(this);this.component_name="Element";this.className="ElementComponent";this.values={name:"object",position:new THREE.Vector3(0,0,0),rotation:new THREE.Vector3(0,0,0),scale:new THREE.Vector3(1,1,1)}}ElementComponent.prototype=Object.create(Component.prototype);
ElementComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.form.addText("Name");this.name=new TextBox(this.form.element);this.name.size.set(200,18);this.name.setOnChange(()=>{null!==c.obj&&(c.obj.name=c.name.getText(),Editor.updateObjectViews())});this.form.add(this.name);this.form.nextRow();this.form.addText("UUID");this.uuid=
new TextBox(this.form.element);this.uuid.size.set(248,18);this.uuid.setDisabled(!0);this.form.add(this.uuid);this.form.nextRow();this.form.addText("Type");this.type=this.form.addText("null");this.form.nextRow();this.form.addText("Position");this.position=new CoordinatesBox(this.form.element);this.position.setOnChange(()=>{if(null!==c.obj){var d=c.position.getValue();c.obj.position.set(d.x,d.y,d.z)}});this.form.add(this.position);this.form.nextRow();this.form.addText("Rotation");this.rotation=new CoordinatesBox(this.form.element);
this.rotation.setOnChange(()=>{if(null!==c.obj){var d=c.rotation.getValue();c.obj.rotation.set(d.x,d.y,d.z)}});this.form.add(this.rotation);this.form.nextRow();this.form.addText("Scale");this.scale=new CoordinatesBox(this.form.element);this.scale.setOnChange(()=>{if(null!==c.obj){var d=c.scale.getValue();c.obj.scale.set(d.x,d.y,d.z);if(c.obj instanceof PhysicsObject)for(var e=c.obj.body.shapes,f=0;f<e.length;f++){var g=e[f];g.type===CANNON.Shape.types.BOX?(g.halfExtents.x=d.x/2,g.halfExtents.y=d.y/
2,g.halfExtents.z=d.z/2):g.type===CANNON.Shape.types.SPHERE&&(g.radius=d.x)}}});this.form.add(this.scale);this.form.nextRow();this.form.position.copy(this.widgetsPos);this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton();return this.element};
ElementComponent.prototype.updateData=function(){this.name.setText(this.obj.name);this.uuid.setText(this.obj.uuid);this.position.setValue(this.obj.position.x,this.obj.position.y,this.obj.position.z);this.rotation.setValue(this.obj.rotation.x,this.obj.rotation.y,this.obj.rotation.z);this.scale.setValue(this.obj.scale.x,this.obj.scale.y,this.obj.scale.z);this.type.setText(this.obj.type)};
ElementComponent.prototype.onReset=function(){this.obj.position.set(this.values.position.x,this.values.position.y,this.values.position.z);this.obj.rotation.set(this.values.rotation.x,this.values.rotation.y,this.values.rotation.z);this.obj.scale.set(this.values.scale.x,this.values.scale.y,this.values.scale.z);Editor.updateObjectViews();this.updateData()};function KinectComponent(){Component.call(this);this.component_name="Kinect";this.className="KinectComponent";this.values={debugModel:!0}}
KinectComponent.prototype=Object.create(Component.prototype);
KinectComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.debug_model=new CheckBox(this.form.element);this.debug_model.setText("Debug model");this.debug_model.size.set(200,15);this.debug_model.setOnChange(()=>{null!==c.obj&&(c.obj.debug_model=c.debug_model.getValue())});this.form.add(this.debug_model);this.form.position.copy(this.widgetsPos);
this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton();return this.element};KinectComponent.prototype.updateData=function(){this.debug_model.setValue(this.obj.debug_model)};KinectComponent.prototype.onReset=function(){this.obj.debug_model=this.values.debugModel;Editor.updateObjectViews();this.updateData()};
function LeapComponent(){Component.call(this);this.component_name="Leap";this.className="LeapComponent";this.values={mode:0,debug_model:!0,gestures_enabled:!0,poses_enabled:!0}}LeapComponent.prototype=Object.create(Component.prototype);
LeapComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.form.addText("Mode");this.mode=new DropdownList(this.form.element);this.mode.size.set(80,18);this.mode.addValue("Desk",Script.INIT);this.mode.addValue("HMD",Script.LOOP);this.mode.setOnChange(()=>{null!==c.obj&&(c.obj.mode=c.mode.getSelectedIndex())});this.form.add(this.mode);
this.form.nextRow();this.debug_model=new CheckBox(this.form.element);this.debug_model.setText("Debug Model");this.debug_model.size.set(200,15);this.debug_model.setOnChange(()=>{null!==c.obj&&(c.obj.debug_model=c.debug_model.getValue())});this.form.add(this.debug_model);this.form.nextRow();this.gestures_enabled=new CheckBox(this.form.element);this.gestures_enabled.setText("Gestures Enabled");this.gestures_enabled.size.set(200,15);this.gestures_enabled.setOnChange(()=>{null!==c.obj&&(c.obj.gestures_enabled=
c.gestures_enabled.getValue())});this.form.add(this.gestures_enabled);this.form.nextRow();this.poses_enabled=new CheckBox(this.form.element);this.poses_enabled.setText("Poses Enabled");this.poses_enabled.size.set(200,15);this.poses_enabled.setOnChange(()=>{null!==c.obj&&(c.obj.poses_enabled=c.poses_enabled.getValue())});this.form.add(this.poses_enabled);this.form.nextRow();this.form.position.copy(this.widgetsPos);this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton();
return this.element};LeapComponent.prototype.updateData=function(){this.mode.setSelectedIndex(this.obj.mode);this.debug_model.setValue(this.obj.debug_model);this.gestures_enabled.setValue(this.obj.gestures_enabled);this.poses_enabled.setValue(this.obj.poses_enabled)};
LeapComponent.prototype.onReset=function(){this.obj.mode=this.values.mode;this.obj.debug_model=this.values.debug_model;this.obj.gestures_enabled=this.values.gestures_enabled;this.obj.poses_enabled=this.values.poses_enabled;Editor.updateObjectViews();this.updateData()};function ObjectComponent(){Component.call(this);this.component_name="Object 3D";this.className="ObjectComponent";this.values={visible:!0,static:!1,castShadow:!0,receiveShadow:!0}}ObjectComponent.prototype=Object.create(Component.prototype);
ObjectComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.visible=new CheckBox(this.form.element);this.visible.setText("Visible");this.visible.size.set(200,15);this.visible.setOnChange(()=>{null!==c.obj&&(c.obj.visible=c.visible.getValue())});this.form.add(this.visible);this.form.nextRow();this.static=new CheckBox(this.form.element);
this.static.setText("Static Object");this.static.size.set(200,15);this.static.setOnChange(()=>{null!==c.obj&&(c.obj.matrixAutoUpdate=!c.static.getValue())});this.form.add(this.static);this.form.nextRow();this.cast_shadow=new CheckBox(this.form.element);this.cast_shadow.setText("Cast Shadow");this.cast_shadow.size.set(200,15);this.cast_shadow.setOnChange(()=>{null!==c.obj&&(c.obj.castShadow=c.cast_shadow.getValue())});this.form.add(this.cast_shadow);this.form.nextRow();this.receive_shadow=new CheckBox(this.form.element);
this.receive_shadow.setText("Receive Shadow");this.receive_shadow.size.set(200,15);this.receive_shadow.setOnChange(()=>{null!==c.obj&&(c.obj.receiveShadow=c.receive_shadow.getValue())});this.form.add(this.receive_shadow);this.form.nextRow();this.form.position.copy(this.widgetsPos);this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton();return this.element};
ObjectComponent.prototype.updateData=function(){this.visible.setValue(this.obj.visible);this.static.setValue(!this.obj.matrixAutoUpdate);this.cast_shadow.setValue(this.obj.castShadow);this.receive_shadow.setValue(this.obj.receiveShadow)};ObjectComponent.prototype.onReset=function(){this.obj.visible=this.values.visible;this.obj.matrixAutoUpdate=!this.values.static;this.obj.castShadow=this.values.castShadow;this.obj.receiveShadow=this.values.receiveShadow;this.updateData()};
function PhysicsComponent(){Component.call(this);this.component_name="Physics";this.className="PhysicsComponent";this.values={type:1,mass:1,linearDamping:.01,angularDamping:.01,allowSleep:!0,sleepSpeedLimit:.1,sleepTimeLimit:1,fixedRotation:!1,collisionFilterGroup:1}}PhysicsComponent.prototype=Object.create(Component.prototype);
PhysicsComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.form.addText("Type");this.type=new DropdownList(this.form.element);this.type.size.set(100,20);this.type.addValue("Static",CANNON.Body.STATIC);this.type.addValue("Dynamic",CANNON.Body.DYNAMIC);this.type.addValue("Kinematic",CANNON.Body.KINEMATIC);this.type.setOnChange(()=>
{null!==c.obj&&(c.obj.body.type=c.type.getValue())});this.form.add(this.type);this.form.nextRow();this.form.addText("Mass");this.mass=new NumberBox(this.form.element);this.mass.size.set(80,18);this.mass.setStep(.1);this.mass.setOnChange(()=>{null!==c.obj&&(c.obj.body.mass=c.mass.getValue())});this.form.add(this.mass);this.form.nextRow();this.form.addText("Linear Damping");this.linearDamping=new NumberBox(this.form.element);this.linearDamping.size.set(80,18);this.linearDamping.setStep(.01);this.linearDamping.setRange(0,
1);this.linearDamping.setOnChange(()=>{null!==c.obj&&(c.obj.body.linearDamping=c.linearDamping.getValue())});this.form.add(this.linearDamping);this.form.nextRow();this.form.addText("Angular Damping");this.angularDamping=new NumberBox(this.form.element);this.angularDamping.size.set(80,18);this.angularDamping.setStep(.01);this.angularDamping.setRange(0,1);this.angularDamping.setOnChange(()=>{null!==c.obj&&(c.obj.body.angularDamping=c.angularDamping.getValue())});this.form.add(this.angularDamping);this.form.nextRow();
this.allowSleep=new CheckBox(this.form.element);this.allowSleep.setText("Allow Sleep");this.allowSleep.size.set(150,15);this.allowSleep.setOnChange(()=>{null!==c.obj&&(c.obj.body.allowSleep=c.allowSleep.getValue())});this.form.add(this.allowSleep);this.form.nextRow();this.form.addText("Sleep Speed Limit");this.sleepSpeedLimit=new NumberBox(this.form.element);this.sleepSpeedLimit.size.set(80,18);this.sleepSpeedLimit.setStep(.01);this.sleepSpeedLimit.setOnChange(()=>{null!==c.obj&&(c.obj.body.sleepSpeedLimit=
c.sleepSpeedLimit.getValue())});this.form.add(this.sleepSpeedLimit);this.form.nextRow();this.form.addText("Sleep Time Limit");this.sleepTimeLimit=new NumberBox(this.form.element);this.sleepTimeLimit.size.set(80,18);this.sleepTimeLimit.setStep(.01);this.sleepTimeLimit.setOnChange(()=>{null!==c.obj&&(c.obj.body.sleepTimeLimit=c.sleepTimeLimit.getValue())});this.form.add(this.sleepTimeLimit);this.form.nextRow();this.fixedRotation=new CheckBox(this.form.element);this.fixedRotation.setText("Fixed Rotation");
this.fixedRotation.size.set(150,15);this.fixedRotation.setOnChange(()=>{null!==c.obj&&(c.obj.body.fixedRotation=c.fixedRotation.getValue())});this.form.add(this.fixedRotation);this.form.nextRow();this.form.addText("Collision Group");this.collisionFilterGroup=new NumberBox(this.form.element);this.collisionFilterGroup.size.set(80,18);this.collisionFilterGroup.setStep(1);this.collisionFilterGroup.setOnChange(()=>{null!==c.obj&&(c.obj.body.collisionFilterGroup=c.collisionFilterGroup.getValue())});this.form.add(this.collisionFilterGroup);
this.form.nextRow();this.form.position.copy(this.widgetsPos);this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton();return this.element};
PhysicsComponent.prototype.updateData=function(){this.type.setValue(this.obj.body.type);this.mass.setValue(this.obj.body.mass);this.linearDamping.setValue(this.obj.body.linearDamping);this.angularDamping.setValue(this.obj.body.angularDamping);this.allowSleep.setValue(this.obj.body.allowSleep);this.sleepTimeLimit.setValue(this.obj.body.sleepTimeLimit);this.sleepSpeedLimit.setValue(this.obj.body.sleepSpeedLimit);this.fixedRotation.setValue(this.obj.body.fixedRotation);this.collisionFilterGroup.setValue(this.obj.body.collisionFilterGroup)};
PhysicsComponent.prototype.onReset=function(){this.obj.body.type=this.values.type;this.obj.body.mass=this.values.mass;this.obj.body.linearDamping=this.values.linearDamping;this.obj.body.angularDamping=this.values.angularDamping;this.obj.body.allowSleep=this.values.allowSleep;this.obj.body.sleepTimeLimit=this.values.sleepTimeLimit;this.obj.body.sleepSpeedLimit=this.values.sleepSpeedLimit;this.obj.body.fixedRotation=this.values.fixedRotation;this.obj.body.collisionFilterGroup=this.values.collisionFilterGroup;
Editor.updateObjectViews();this.updateData()};function ProgramComponent(){Component.call(this);this.component_name="Program";this.className="ProgramComponent";this.values={name:"program",author:"",version:"0",lock_pointer:!1,vr:!1,vr_scale:1}}ProgramComponent.prototype=Object.create(Component.prototype);
ProgramComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.form.addText(this.component_name);this.form.nextRow();this.form.addText("Name");this.name=new TextBox(this.form.element);this.name.size.set(200,18);this.name.setOnChange(()=>{null!==c.obj&&(c.obj.name=c.name.getText(),Editor.updateObjectViews())});this.form.add(this.name);
this.form.nextRow();this.form.addText("Author");this.author=new TextBox(this.form.element);this.author.position.set(50,35);this.author.size.set(200,18);this.author.updateInterface();this.author.setOnChange(()=>{null!==c.obj&&(c.obj.author=c.author.getText())});this.form.add(this.author);this.form.nextRow();this.form.addText("Version");this.version=new TextBox(this.form.element);this.version.size.set(100,18);this.version.setOnChange(()=>{null!==c.obj&&(c.obj.version=c.version.getText())});this.form.add(this.version);
this.form.nextRow();this.lock_pointer=new CheckBox(this.form.element);this.lock_pointer.setText("Lock Pointer");this.lock_pointer.size.set(50,15);this.lock_pointer.setOnChange(()=>{null!==c.obj&&(c.obj.lock_pointer=c.lock_pointer.getValue())});this.form.add(this.lock_pointer);this.form.nextRow();this.form.addText("Virtual Reality");this.form.nextRow();this.vr=new CheckBox(this.form.element);this.vr.setText("VR Enabled");this.vr.size.set(50,15);this.vr.setOnChange(()=>{null!==c.obj&&(c.obj.vr=c.vr.getValue())});
this.form.add(this.vr);this.form.nextRow();this.form.addText("VR Movement Scale");this.vr_scale=new NumberBox(this.form.element);this.vr_scale.size.set(50,18);this.vr_scale.setRange(0,1E3);this.vr_scale.setStep(.05);this.vr_scale.setOnChange(()=>{null!==c.obj&&(c.obj.vr_scale=c.vr_scale.getValue())});this.form.add(this.vr_scale);this.form.nextRow();this.form.position.copy(this.widgetsPos);this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton();return this.element};
ProgramComponent.prototype.updateData=function(){this.name.setText(this.obj.name);this.author.setText(this.obj.author);this.version.setText(this.obj.version);this.lock_pointer.setValue(this.obj.lock_pointer);this.vr.setValue(this.obj.vr);this.vr_scale.setValue(this.obj.vr_scale)};
ProgramComponent.prototype.onReset=function(){this.obj.name=this.values.name;this.obj.author=this.values.author;this.obj.version=this.values.version;this.obj.lock_pointer=this.values.lock_pointer;this.obj.vr=this.values.vr;this.obj.vr_scale=this.values.vr_scale;Editor.updateObjectViews();this.updateData()};function SceneComponent(){Component.call(this);this.component_name="Scene";this.className="SceneComponent";this.values={name:"scene",default:!1,background:[0,0,0],fog:THREE.Fog.NONE}}
SceneComponent.prototype=Object.create(Component.prototype);
SceneComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.form.addText("Name");this.name=new TextBox(this.form.element);this.name.size.set(200,18);this.name.setOnChange(()=>{null!==c.obj&&(c.obj.name=c.name.getText(),Editor.updateObjectViews())});this.form.add(this.name);this.form.nextRow();this.default=new CheckBox(this.form.element);
this.default.setText("Default Scene");this.default.size.set(200,15);this.default.setOnChange(()=>{if(null!==c.obj){var d=c.obj.parent;c.default.getValue()?d.default_scene=c.obj.uuid:d.default_scene=null}});this.form.add(this.default);this.form.nextRow();this.form.addText("Background");this.background=new ColorChooser(this.form.element);this.background.size.set(80,18);this.background.setValue(0,0,0);this.background.setOnChange(()=>{null!==c.obj&&(null===c.obj.background&&(c.obj.background=new THREE.Color),
c.obj.background.setHex(c.background.getValueHex()))});this.form.add(this.background);this.form.nextRow();this.form.addText("Fog");this.fog=new DropdownList(this.form.element);this.fog.size.set(100,20);this.fog.addValue("None",THREE.Fog.NONE);this.fog.addValue("Linear",THREE.Fog.LINEAR);this.fog.addValue("Exponential",THREE.Fog.EXPONENTIAL);this.fog.setOnChange(()=>{null!==c.obj&&(c.obj.setFogMode(c.fog.getSelectedIndex()),c.updateData())});this.form.add(this.fog);this.form.nextRow();this.form.addText("Fog Settings");
this.form.nextRow();this.fog_linear_form=new Form(this.form.element);this.fog_linear_form.spacing.set(5,5);this.fog_linear_form.addText("Linear Fog");this.fog_linear_form.nextRow();this.fog_linear_form.addText("Colour");this.fog_linear_colour=new ColorChooser(this.fog_linear_form.element);this.fog_linear_colour.size.set(80,18);this.fog_linear_colour.setOnChange(()=>{if(null!==c.obj){var d=c.fog_linear_colour.getValueHex();c.obj.fog.color.setHex(d)}});this.fog_linear_form.add(this.fog_linear_colour);
this.fog_linear_form.nextRow();this.fog_linear_form.addText("Near");this.fog_near=new NumberBox(this.fog_linear_form.element);this.fog_near.size.set(60,18);this.fog_near.setOnChange(()=>{null!==c.obj&&(c.obj.fog.near=c.fog_near.getValue())});this.fog_linear_form.add(this.fog_near);this.fog_linear_form.nextRow();this.fog_linear_form.addText("Far");this.fog_far=new NumberBox(this.fog_linear_form.element);this.fog_far.size.set(60,18);this.fog_far.setOnChange(()=>{null!==c.obj&&(c.obj.fog.far=c.fog_far.getValue())});
this.fog_linear_form.add(this.fog_far);this.fog_linear_form.nextRow();this.fog_linear_form.updateInterface();this.form.add(this.fog_linear_form);this.form.nextRow();this.fog_exponential_form=new Form(this.form.element);this.fog_exponential_form.spacing.set(5,5);this.fog_exponential_form.addText("Exponential Fog");this.fog_exponential_form.nextRow();this.fog_exponential_form.addText("Density");this.fog_density=new NumberBox(this.fog_exponential_form.element);this.fog_density.size.set(100,18);this.fog_density.setStep(1E-4);
this.fog_density.setOnChange(()=>{null!==c.obj&&(c.obj.fog.density=c.fog_density.getValue())});this.fog_exponential_form.add(this.fog_density);this.fog_exponential_form.nextRow();this.fog_exponential_form.updateInterface();this.form.add(this.fog_exponential_form);this.form.nextRow();this.form.addText("Physics World");this.form.nextRow();this.form.addText("Gravity");this.gravity=new CoordinatesBox(this.form.element);this.gravity.setOnChange(()=>{if(null!==c.obj){var d=c.gravity.getValue();c.obj.world.gravity.set(d.x,
d.y,d.z)}});this.form.add(this.gravity);this.form.nextRow();this.form.position.copy(this.widgetsPos);this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton();return this.element};SceneComponent.prototype.updateForms=function(){};
SceneComponent.prototype.updateData=function(){this.name.setText(this.obj.name);this.default.setValue(this.obj.uuid===this.obj.parent.default_scene);this.obj.fog instanceof THREE.Fog?this.fog.setValue(THREE.Fog.LINEAR):this.obj.fog instanceof THREE.FogExp2?this.fog.setValue(THREE.Fog.EXPONENTIAL):this.fog.setValue(THREE.Fog.NONE);null!==this.obj.fog?(this.fog_linear_colour.setValueHex(this.obj.fog.color.getHex()),this.fog_near.setValue(void 0!==this.obj.fog.near?this.obj.fog.near:0),this.fog_far.setValue(void 0!==
this.obj.fog.far?this.obj.fog.far:0),this.fog_density.setValue(void 0!==this.obj.fog.density?this.obj.fog.density:0)):(this.fog_linear_colour.setValueHex(0),this.fog_near.setValue(0),this.fog_far.setValue(0),this.fog_density.setValue(0));null!==this.obj.background&&this.background.setValue(this.obj.background.r,this.obj.background.g,this.obj.background.b);this.gravity.setValue(this.obj.world.gravity.x,this.obj.world.gravity.y,this.obj.world.gravity.z);this.updateForms()};
SceneComponent.prototype.onReset=function(){this.obj.name=this.values.name;this.obj.default=this.values.default;this.obj.parent.default_scene=null;this.obj.setFogMode(this.values.fog);this.updateData();Editor.updateObjectViews()};function TextComponent(){Component.call(this);this.component_name="Text";this.className="TextComponent";this.values={text:"text"}}TextComponent.prototype=Object.create(Component.prototype);
TextComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.form.addText("Text");this.text=new TextBox(this.form.element);this.text.size.set(200,18);this.text.setOnChange(()=>{null!==c.obj&&c.obj.setText(c.text.getText())});this.form.add(this.text);this.form.nextRow();this.form.position.copy(this.widgetsPos);this.form.updateInterface();
this.widgetsPos.y+=this.form.size.y;this.addResetButton();return this.element};TextComponent.prototype.updateData=function(){this.text.setText(this.obj.text)};TextComponent.prototype.onReset=function(){this.obj.setText(this.values.text);this.updateData();Editor.updateObjectViews()};function ScriptComponent(){Component.call(this);this.component_name="Script";this.className="ScriptComponent";this.values={mode:Script.INIT}}ScriptComponent.prototype=Object.create(Component.prototype);
ScriptComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.form.position.copy(this.widgetsPos);this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton();return this.element};ScriptComponent.prototype.onReset=function(){this.updateData();Editor.updateObjectViews()};
function CameraComponent(){Component.call(this);this.component_name="Camera";this.className="CameraComponent";this.values={fov:60,default:!1,near:.1,far:1E5,size:3,mode:0,start:[0,0],camSize:[1,1],clearColor:!1,clearDepth:!1}}CameraComponent.prototype=Object.create(Component.prototype);
CameraComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.obj instanceof PerspectiveCamera?(this.form.addText("FOV"),this.fov=new Slider(this.form.element),this.fov.size.set(160,18),this.fov.setRange(30,160),this.fov.setOnChange(()=>{null!==c.obj&&(c.obj.fov=c.fov.getValue(),c.obj.updateProjectionMatrix())}),this.form.add(this.fov),
this.form.nextRow()):this.obj instanceof OrthographicCamera&&(this.form.addText("Size"),this.size=new NumberBox(this.form.element),this.size.size.set(80,18),this.size.setOnChange(()=>{null!==c.obj&&(c.obj.size=c.size.getValue(),c.obj.updateProjectionMatrix())}),this.form.add(this.size),this.form.nextRow(),this.form.addText("Resize Mode"),this.mode=new DropdownList(this.form.element),this.mode.size.set(130,18),this.mode.addValue("Horizontal",OrthographicCamera.FIXED_VERTICAL),this.mode.addValue("Vertical",
OrthographicCamera.FIXED_HORIZONTAL),this.mode.setOnChange(()=>{null!==c.obj&&(c.obj.mode=c.mode.getSelectedIndex())}),this.form.add(this.mode),this.form.nextRow());this.form.addText("Clipping Planes");this.form.nextRow();this.form.addText("Near");this.near=new NumberBox(this.form.element);this.near.size.set(60,18);this.near.setStep(.1);this.near.setRange(0,Number.MAX_SAFE_INTEGER);this.near.setOnChange(()=>{null!==c.obj&&(c.obj.near=c.near.getValue())});this.form.add(this.near);this.form.nextRow();
this.form.addText("Far");this.far=new NumberBox(this.form.element);this.far.size.set(80,18);this.far.setRange(0,Number.MAX_SAFE_INTEGER);this.far.setOnChange(()=>{null!==c.obj&&(c.obj.far=c.far.getValue())});this.form.add(this.far);this.form.nextRow();this.form.addText("Viewport");this.form.nextRow();this.form.addText("Start");this.offset=new CoordinatesBox(this.form.element);this.offset.setMode(CoordinatesBox.VECTOR2);this.offset.size.set(160,20);this.offset.setOnChange(()=>{null!==c.obj&&c.obj.offset.copy(c.offset.getValue())});
this.form.add(this.offset);this.form.nextRow();this.form.addText("Size");this.viewport=new CoordinatesBox(this.form.element);this.viewport.setMode(CoordinatesBox.VECTOR2);this.viewport.size.set(160,20);this.viewport.setOnChange(()=>{null!==c.obj&&c.obj.viewport.copy(c.viewport.getValue())});this.form.add(this.viewport);this.form.nextRow();this.clear_color=new CheckBox(this.form.element);this.clear_color.setText("Clear colour");this.clear_color.size.set(200,15);this.clear_color.setOnChange(()=>{null!==
c.obj&&(c.obj.clear_color=c.clear_color.getValue())});this.form.add(this.clear_color);this.form.nextRow();this.clear_depth=new CheckBox(this.form.element);this.clear_depth.setText("Clear depth");this.clear_depth.size.set(200,15);this.clear_depth.setOnChange(()=>{null!==c.obj&&(c.obj.clear_depth=c.clear_depth.getValue())});this.form.add(this.clear_depth);this.form.nextRow();this.default=new CheckBox(this.form.element);this.default.setText("Use camera");this.default.size.set(200,15);this.default.setOnChange(()=>
{if(null!==c.obj){var d=ObjectUtils.getScene(c.obj);null!==d&&(c.default.getValue()?d.addCamera(c.obj):d.removeCamera(c.obj))}});this.form.add(this.default);this.form.nextRow();this.form.position.copy(this.widgetsPos);this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton();return this.element};
CameraComponent.prototype.updateData=function(){this.obj instanceof PerspectiveCamera?this.fov.setValue(this.obj.fov):this.obj instanceof OrthographicCamera&&(this.size.setValue(this.obj.size),this.mode.setSelectedIndex(this.obj.mode));this.near.setValue(this.obj.near);this.far.setValue(this.obj.far);this.offset.setValue(this.obj.offset);this.viewport.setValue(this.obj.viewport);this.clear_color.setValue(this.obj.clear_color);this.clear_depth.setValue(this.obj.clear_depth);this.default.setValue(-1!==
ObjectUtils.getScene(this.obj).cameras.indexOf(this.obj))};
CameraComponent.prototype.onReset=function(){this.obj instanceof PerspectiveCamera?this.obj.fov=this.values.fov:this.obj instanceof OrthographicCamera&&(this.obj.size=this.values.camSize,this.obj.mode=this.values.mode);this.obj.near=this.values.near;this.obj.far=this.values.far;this.obj.offset=new THREE.Vector2(this.values.offset[0],this.values.offset[1]);this.obj.viewport=new THREE.Vector2(this.values.viewport[0],this.values.viewport[1]);this.obj.clear_color=this.values.clearColor;this.obj.clear_depth=
this.values.clearDepth;var a=ObjectUtils.getScene(this.obj);if(null!==a){var b=a.cameras.indexOf(this.obj);-1<b&&a.cameras.splice(b,1)}Editor.updateObjectViews();this.updateData()};function LightComponent(){Component.call(this);this.component_name="Light";this.className="LightComponent";this.values={colour:[.265,.265,.265],castShadow:!0,groundCol:[1,1,1],distance:0,intensity:1,shadow_width:512,shadow_height:512,shadow_near:.01,shadow_far:1E6,angle:1,penumbra:0}}LightComponent.prototype=Object.create(Component.prototype);
LightComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.form.addText("Colour");this.colour=new ColorChooser(this.form.element);this.colour.size.set(80,18);this.colour.setOnChange(()=>{if(null!==c.obj){var d=c.colour.getValue();c.obj.color.setRGB(d.r,d.g,d.b)}});this.form.add(this.colour);this.form.nextRow();this.obj instanceof
HemisphereLight&&(this.form.addText("Ground Colour"),this.groundCol=new ColorChooser(this.form.element),this.groundCol.size.set(80,18),this.groundCol.setOnChange(()=>{if(null!==c.obj){var d=c.groundCol.getValue();c.obj.groundColor.setRGB(d.r,d.g,d.b)}}),this.form.add(this.groundCol),this.form.nextRow());this.obj instanceof PointLight&&(this.form.addText("Distance"),this.distance=new NumberBox(this.form.element),this.distance.size.set(60,18),this.distance.setStep(.1),this.distance.setOnChange(()=>
{null!==c.obj&&(c.obj.distance=c.distance.getValue())}),this.form.add(this.distance),this.form.nextRow(),this.form.addText("Intensity"),this.intensity=new Slider(this.form.element),this.intensity.size.set(160,18),this.intensity.setStep(.1),this.intensity.setRange(0,10),this.intensity.setOnChange(()=>{null!==c.obj&&(c.obj.intensity=c.intensity.getValue())}),this.form.add(this.intensity),this.form.nextRow());this.obj instanceof SpotLight&&(this.form.addText("Penumbra"),this.penumbra=new Slider(this.form.element),
this.penumbra.size.set(160,18),this.penumbra.position.set(65,110),this.penumbra.setRange(0,1),this.penumbra.setStep(.01),this.penumbra.updateInterface(),this.penumbra.setOnChange(()=>{null!==c.obj&&(c.obj.penumbra=c.penumbra.getValue())}),this.form.add(this.penumbra),this.form.nextRow(),this.form.addText("Angle"),this.angle=new Slider(this.form.element),this.angle.size.set(160,18),this.angle.setRange(0,1.57),this.angle.setStep(.01),this.angle.setOnChange(()=>{null!==c.obj&&(c.obj.angle=c.angle.getValue())}),
this.form.add(this.angle),this.form.nextRow());if(this.obj instanceof DirectionalLight||this.obj instanceof PointLight||this.obj instanceof SpotLight){this.form.addText("Shadows");this.form.nextRow();this.cast_shadow=new CheckBox(this.form.element);this.cast_shadow.setText("Cast Shadow");this.cast_shadow.size.set(200,15);this.cast_shadow.position.set(5,85);this.cast_shadow.updateInterface();this.cast_shadow.setOnChange(()=>{null!==c.obj&&(c.obj.castShadow=c.cast_shadow.getValue())});this.form.add(this.cast_shadow);
this.form.nextRow();this.form.addText("Map");this.form.nextRow();this.form.addText("Resolution");this.shadow_width=new DropdownList(this.form.element);this.shadow_width.size.set(60,18);this.shadow_width.setOnChange(()=>{null!==c.obj&&(c.obj.shadow.mapSize.width=c.shadow_width.getValue(),c.obj.updateShadowMap())});this.form.add(this.shadow_width);this.form.addText("x");this.shadow_height=new DropdownList(this.form.element);this.shadow_height.size.set(60,18);this.shadow_height.setOnChange(()=>{null!==
c.obj&&(c.obj.shadow.mapSize.height=c.shadow_height.getValue(),c.obj.updateShadowMap())});this.form.add(this.shadow_height);this.form.nextRow();for(a=0;13>a;a++)b=Math.pow(2,a),this.shadow_width.addValue(b.toString(),b),this.shadow_height.addValue(b.toString(),b);this.form.addText("Near");this.shadow_near=new NumberBox(this.form.element);this.shadow_near.size.set(60,18);this.shadow_near.setStep(.1);this.shadow_near.setOnChange(()=>{null!==c.obj&&(c.obj.shadow.camera.near=c.shadow_near.getValue(),
c.obj.updateShadowMap())});this.form.add(this.shadow_near);this.form.addText("Far");this.shadow_far=new NumberBox(this.form.element);this.shadow_far.size.set(60,18);this.shadow_far.setStep(.1);this.shadow_far.setOnChange(()=>{null!==c.obj&&(c.obj.shadow.camera.far=c.shadow_far.getValue(),c.obj.updateShadowMap())});this.form.add(this.shadow_far);this.form.nextRow();this.obj instanceof DirectionalLight&&(this.form.addText("Left"),this.shadow_left=new NumberBox(this.form.element),this.shadow_left.size.set(60,
18),this.shadow_left.setStep(.1),this.shadow_left.setOnChange(()=>{null!==c.obj&&(c.obj.shadow.camera.left=c.shadow_left.getValue(),c.obj.updateShadowMap())}),this.form.add(this.shadow_left),this.form.addText("Right"),this.shadow_right=new NumberBox(this.form.element),this.shadow_right.size.set(60,18),this.shadow_right.setStep(.1),this.shadow_right.setOnChange(()=>{null!==c.obj&&(c.obj.shadow.camera.right=c.shadow_right.getValue(),c.obj.updateShadowMap())}),this.form.add(this.shadow_right),this.form.nextRow(),
this.form.addText("Top"),this.shadow_top=new NumberBox(this.form.element),this.shadow_top.size.set(60,18),this.shadow_top.setStep(.1),this.shadow_top.setOnChange(()=>{null!==c.obj&&(c.obj.shadow.camera.top=c.shadow_top.getValue(),c.obj.updateShadowMap())}),this.form.add(this.shadow_top),this.form.addText("Bottom"),this.shadow_bottom=new NumberBox(this.form.element),this.shadow_bottom.size.set(60,18),this.shadow_bottom.setStep(.1),this.shadow_bottom.setOnChange(()=>{null!==c.obj&&(c.obj.shadow.camera.bottom=
c.shadow_bottom.getValue(),c.obj.updateShadowMap())}),this.form.add(this.shadow_bottom),this.form.nextRow())}this.form.position.copy(this.widgetsPos);this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton();return this.element};
LightComponent.prototype.updateData=function(){this.colour.setValue(this.obj.color.r,this.obj.color.g,this.obj.color.b);this.obj instanceof HemisphereLight&&this.groundCol.setValue(this.obj.groundColor.r,this.obj.groundColor.g,this.obj.groundColor.b);this.obj instanceof PointLight&&(this.distance.setValue(this.obj.distance),this.intensity.setValue(this.obj.intensity));this.obj instanceof SpotLight&&(this.angle.setValue(this.obj.angle),this.penumbra.setValue(this.obj.penumbra));if(this.obj instanceof
DirectionalLight||this.obj instanceof PointLight||this.obj instanceof SpotLight)this.cast_shadow.setValue(this.obj.castShadow),this.shadow_width.setValue(this.obj.shadow.mapSize.width),this.shadow_height.setValue(this.obj.shadow.mapSize.height),this.shadow_near.setValue(this.obj.shadow.camera.near),this.shadow_far.setValue(this.obj.shadow.camera.far);this.obj instanceof DirectionalLight&&(this.shadow_left.setValue(this.obj.shadow.camera.left),this.shadow_right.setValue(this.obj.shadow.camera.right),
this.shadow_top.setValue(this.obj.shadow.camera.top),this.shadow_bottom.setValue(this.obj.shadow.camera.bottom))};
LightComponent.prototype.onReset=function(){this.obj.color.setRGB(this.values.colour[0],this.values.colour[1],this.values.colour[2]);if(this.obj instanceof DirectionalLight||this.obj instanceof PointLight)this.obj.castShadow=this.values.castShadow;this.obj instanceof HemisphereLight&&this.obj.groundColor.setRGB(this.values.groundCol[0],this.values.groundCol[1],this.values.groundCol[2]);this.obj instanceof PointLight&&(this.obj.distance=this.values.distance,this.obj.intensity=this.values.intensity,
this.obj.shadow.mapSize.width=this.values.shadow_width,this.obj.shadow.mapSize.height=this.values.shadow_height,this.obj.shadow.camera.near=this.values.shadow_near,this.obj.shadow.camera.far=this.values.shadow_far,this.obj.updateShadowMap());this.obj instanceof SpotLight&&(this.obj.penumbra=this.values.penumbra,this.obj.angle=this.values.angle);Editor.updateObjectViews();this.updateData()};
function SkyComponent(){Component.call(this);this.component_name="Sky";this.className="SkyComponent";this.values={auto_update:!1,duration:240,time:150,distance:500,shadows:!0,width:512,height:512,near:.5,far:1E4,left:-10,right:10,top:10,bottom:-10}}SkyComponent.prototype=Object.create(Component.prototype);
SkyComponent.prototype.initUI=function(a,b){this.clearElement();this.widgetsPos=a;var c=this;this.obj=b;this.form=new Form(this.element);this.form.spacing.set(5,5);this.form.addText(this.component_name);this.form.nextRow();this.auto_update=new CheckBox(this.form.element);this.auto_update.setText("Auto Update");this.auto_update.size.set(200,15);this.auto_update.setOnChange(()=>{null!==c.obj&&(c.obj.auto_update=c.auto_update.getValue())});this.form.add(this.auto_update);this.form.nextRow();this.form.addText("Day duration");
this.day_time=new NumberBox(this.form.element);this.day_time.size.set(60,18);this.day_time.setStep(.1);this.day_time.setOnChange(()=>{if(null!==c.obj){var d=c.day_time.getValue();0>d&&(d=0,c.day_time.setValue(d));c.obj.day_time=d;c.obj.day_time>d&&(c.obj.time=d,c.time.setValue(d));c.time.setRange(0,d);c.obj.updateSky()}});this.form.add(this.day_time);this.form.addText("s");this.form.nextRow();this.form.addText("Time");this.time=new NumberBox(this.form.element);this.time.size.set(100,18);this.time.setStep(.1);
this.time.setOnChange(()=>{if(null!==c.obj){var d=c.time.getValue();0>d?(d=0,c.time.setValue(d)):d>c.obj.day_time&&(d=c.obj.day_time,c.time.setValue(d));c.obj.time=d;c.obj.updateSky()}});this.form.add(this.time);this.form.addText("s");this.form.nextRow();this.form.addText("Sun distance");this.sun_distance=new NumberBox(this.form.element);this.sun_distance.size.set(80,18);this.sun_distance.setStep(10);this.sun_distance.setOnChange(()=>{null!==c.obj&&(c.obj.sun_distance=c.sun_distance.getValue(),c.obj.updateSky())});
this.form.add(this.sun_distance);this.form.nextRow();this.form.addText("Shadows");this.form.nextRow();this.cast_shadow=new CheckBox(this.form.element);this.cast_shadow.setText("Cast shadows");this.cast_shadow.size.set(200,15);this.cast_shadow.position.set(5,85);this.cast_shadow.updateInterface();this.cast_shadow.setOnChange(()=>{null!==c.obj&&(c.obj.sun.castShadow=c.cast_shadow.getValue())});this.form.add(this.cast_shadow);this.form.nextRow();this.form.addText("Resolution");this.shadow_width=new DropdownList(this.form.element);
this.shadow_width.size.set(60,18);this.shadow_width.setOnChange(()=>{null!==c.obj&&(c.obj.sun.shadow.mapSize.width=c.shadow_width.getValue(),c.obj.sun.updateShadowMap())});this.form.add(this.shadow_width);this.form.addText("x");this.shadow_height=new DropdownList(this.form.element);this.shadow_height.size.set(60,18);this.shadow_height.setOnChange(()=>{null!==c.obj&&(c.obj.sun.shadow.mapSize.height=c.shadow_height.getValue(),c.obj.sun.updateShadowMap())});this.form.add(this.shadow_height);this.form.nextRow();
for(a=0;13>a;a++)b=Math.pow(2,a),this.shadow_width.addValue(b.toString(),b),this.shadow_height.addValue(b.toString(),b);this.form.addText("Near");this.shadow_near=new NumberBox(this.form.element);this.shadow_near.size.set(60,18);this.shadow_near.setStep(.1);this.shadow_near.setOnChange(()=>{null!==c.obj&&(c.obj.sun.shadow.camera.near=c.shadow_near.getValue(),c.obj.sun.updateShadowMap())});this.form.add(this.shadow_near);this.form.addText("Far");this.shadow_far=new NumberBox(this.form.element);this.shadow_far.size.set(60,
18);this.shadow_far.setStep(.1);this.shadow_far.setOnChange(()=>{null!==c.obj&&(c.obj.sun.shadow.camera.far=c.shadow_far.getValue(),c.obj.sun.updateShadowMap())});this.form.add(this.shadow_far);this.form.nextRow();this.form.addText("Left");this.shadow_left=new NumberBox(this.form.element);this.shadow_left.size.set(60,18);this.shadow_left.setStep(.1);this.shadow_left.setOnChange(()=>{null!==c.obj&&(c.obj.sun.shadow.camera.left=c.shadow_left.getValue(),c.obj.sun.updateShadowMap())});this.form.add(this.shadow_left);
this.form.addText("Right");this.shadow_right=new NumberBox(this.form.element);this.shadow_right.size.set(60,18);this.shadow_right.setStep(.1);this.shadow_right.setOnChange(()=>{null!==c.obj&&(c.obj.sun.shadow.camera.right=c.shadow_right.getValue(),c.obj.sun.updateShadowMap())});this.form.add(this.shadow_right);this.form.nextRow();this.form.addText("Top");this.shadow_top=new NumberBox(this.form.element);this.shadow_top.size.set(60,18);this.shadow_top.setStep(.1);this.shadow_top.setOnChange(()=>{null!==
c.obj&&(c.obj.sun.shadow.camera.top=c.shadow_top.getValue(),c.obj.sun.updateShadowMap())});this.form.add(this.shadow_top);this.form.addText("Bottom");this.shadow_bottom=new NumberBox(this.form.element);this.shadow_bottom.size.set(60,18);this.shadow_bottom.setStep(.1);this.shadow_bottom.setOnChange(()=>{null!==c.obj&&(c.obj.sun.shadow.camera.bottom=c.shadow_bottom.getValue(),c.obj.sun.updateShadowMap())});this.form.add(this.shadow_bottom);this.form.nextRow();this.form.position.copy(this.widgetsPos);
this.form.updateInterface();this.widgetsPos.y+=this.form.size.y;this.addResetButton();return this.element};
SkyComponent.prototype.updateData=function(){this.auto_update.setValue(this.obj.auto_update);this.day_time.setValue(this.obj.day_time);this.time.setValue(this.obj.time);this.sun_distance.setValue(this.obj.sun_distance);this.cast_shadow.setValue(this.obj.sun.castShadow);this.shadow_width.setValue(this.obj.sun.shadow.mapSize.width);this.shadow_height.setValue(this.obj.sun.shadow.mapSize.height);this.shadow_near.setValue(this.obj.sun.shadow.camera.near);this.shadow_far.setValue(this.obj.sun.shadow.camera.far);
this.shadow_left.setValue(this.obj.sun.shadow.camera.left);this.shadow_right.setValue(this.obj.sun.shadow.camera.right);this.shadow_top.setValue(this.obj.sun.shadow.camera.top);this.shadow_bottom.setValue(this.obj.sun.shadow.camera.bottom)};
SkyComponent.prototype.onReset=function(){this.obj.auto_update=this.values.auto_update;this.obj.day_time=this.values.duration;this.obj.time=this.values.time;this.obj.sun_distance=this.values.distance;this.obj.sun.castShadow=this.values.shadows;this.obj.sun.shadow.mapSize.width=this.values.width;this.obj.sun.shadow.mapSize.height=this.values.height;this.obj.sun.shadow.camera.near=this.values.near;this.obj.sun.shadow.camera.far=this.values.far;this.obj.sun.shadow.camera.left=this.values.left;this.obj.sun.shadow.camera.right=
this.values.right;this.obj.sun.shadow.camera.top=this.values.top;this.obj.sun.shadow.camera.bottom=this.values.bottom;this.updateData();this.obj.updateSky();Editor.updateObjectViews()};function Register(){}Register.registerBlocksNodes=function(){registerBase();registerEvents();registerArray();registerWidgets();registerColour();registerVectorNode();registerObjects();registerHierarchy();registerKeyboardNodes()};
Register.registerMaterialNodes=function(){registerArray();registerWidgets();registerColour();registerMaterialNodes()};Register.registerParticlesNodes=function(){registerArray();registerWidgets();registerColour();registerParticlesNodes()};Register.unregisterAll=function(){LiteGraph.registered_node_types={};LiteGraph.Nodes={}};Register.registerAll=function(){Register.registerBlocksNodes();Register.registerMaterialNodes();Register.registerParticlesNodes()};function NodesHelper(){}NodesHelper.sizes={};
NodesHelper.sizes.small=[120,26];NodesHelper.sizes.medium=[180,46];NodesHelper.sizes.big=[220,66];NodesHelper.sizes.large=[280,86];NodesHelper.titles={};NodesHelper.titles.event="#FF0000";NodesHelper.titles.hierarchy="#556B2f";NodesHelper.titles.input="#0080FF";NodesHelper.titles.object="#DEB887";NodesHelper.titles.base="#5F9EA0";NodesHelper.titles.material="#032138";NodesHelper.titles.texture="#1d5e4a";NodesHelper.titles.particles="#bf7f3b";NodesHelper.titles.array=NodesHelper.titles.event;
NodesHelper.titles.widget="#7E0480";NodesHelper.titles.color="#380333";NodesHelper.titles.vector="#f4042c";NodesHelper.slots={};NodesHelper.slots.position={};NodesHelper.slots.position.x=20;NodesHelper.slots.position.y=12;NodesHelper.slots.position.y_second=30;NodesHelper.slots.position.y_third=48;NodesHelper.slots.position.y_fourth=66;NodesHelper.slots.position.y_fifth=84;NodesHelper.slots.position.y_sixth=104;NodesHelper.slots.position.y_seventh=122;NodesHelper.slots.position.y_eighth=140;
NodesHelper.slots.position.y_ninth=158;NodesHelper.slots.position.x1=105;NodesHelper.slots.position.y1=12;NodesHelper.slots.colours={};NodesHelper.slots.colours.event="#FFFFFF";NodesHelper.slots.colours.passer="#FFC0CB";NodesHelper.slots.colours.element="#00BFFF";NodesHelper.slots.colours.array="#9400D3";NodesHelper.slots.colours.string="#FF1493";NodesHelper.slots.colours.number="#7ef48f";NodesHelper.slots.colours.input="#87ceeb";NodesHelper.slots.colours.bool="#800000";
NodesHelper.slots.colours.vector="#D2691E";NodesHelper.slots.colours.variable="#A52A2A";NodesHelper.slots.colours.euler="#8bd613";NodesHelper.slots.colours.color="#380333";NodesHelper.slots.colours.texture="#1d5e4a";NodesHelper.slots.colours.json="#1d395e";NodesHelper.slots.event={color_on:NodesHelper.slots.colours.event,color_off:NodesHelper.slots.colours.event,shape:LiteGraph.ARROW_SHAPE};
NodesHelper.slots.passer={color_on:NodesHelper.slots.colours.passer,color_off:NodesHelper.slots.colours.passer,shape:LiteGraph.BOX_SHAPE};NodesHelper.slots.object={color_on:NodesHelper.slots.colours.element,color_off:NodesHelper.slots.colours.element};NodesHelper.slots.array={color_on:NodesHelper.slots.colours.array,color_off:NodesHelper.slots.colours.array};NodesHelper.slots.string={color_on:NodesHelper.slots.colours.string,color_off:NodesHelper.slots.colours.string};
NodesHelper.slots.number={color_on:NodesHelper.slots.colours.number,color_off:NodesHelper.slots.colours.number};NodesHelper.slots.keyinput={color_on:NodesHelper.slots.colours.input,color_off:NodesHelper.slots.colours.input};NodesHelper.slots.bool={color_on:NodesHelper.slots.colours.bool,color_off:NodesHelper.slots.colours.bool};NodesHelper.slots.vector={color_on:NodesHelper.slots.colours.vector,color_off:NodesHelper.slots.colours.vector};
NodesHelper.slots.variable={color_on:NodesHelper.slots.colours.variable,color_off:NodesHelper.slots.colours.variable};NodesHelper.slots.euler={color_on:NodesHelper.slots.colours.euler,color_off:NodesHelper.slots.colours.euler};NodesHelper.slots.color={color_on:NodesHelper.slots.colours.color,color_off:NodesHelper.slots.colours.color};NodesHelper.slots.texture={color_on:NodesHelper.slots.colours.texture,color_off:NodesHelper.slots.colours.texture};
NodesHelper.slots.json={color_on:NodesHelper.slots.colours.json,color_off:NodesHelper.slots.colours.json};NodesHelper.slots.input={};NodesHelper.slots.input.position={pos:[NodesHelper.slots.position.x,12]};NodesHelper.slots.input.event=Object.assign({},NodesHelper.slots.event,NodesHelper.slots.input.position);NodesHelper.slots.output={};NodesHelper.slots.output.position={pos:[NodesHelper.slots.position.x1,12]};NodesHelper.slots.output.title_pos={pos:[NodesHelper.slots.position.x1,-10]};
NodesHelper.slots.output.event=Object.assign({},NodesHelper.slots.event,NodesHelper.slots.output.position);NodesHelper.slots.output.passer=Object.assign({},NodesHelper.slots.passer,{shape:LiteGraph.BOX_SHAPE},NodesHelper.slots.output.title_pos);
NodesHelper.getSlotMenuOptions=function(a,b,c){void 0!==a.output&&new LiteGraph.ContextMenu([{title:"Convert to Variable",callback:()=>{var d=LGraphCanvas.active_canvas.graph,e=LiteGraph.createNode("Base/Variable");e.pos=[b.pos[0]+150,b.pos[1]];d.add(e);b.connect(0,e,0);b.connect(a.slot,e,1)}}],{title:a.output.name,event:c})};
function VariableNode(){this.properties={name:"myname",container:VariableNode.LITEGRAPH};this.addInput("",LiteGraph.EVENT,NodesHelper.slots.input.event);this.addInput("In","",Object.assign({},NodesHelper.slots.variable,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.name_widget=this.addWidget("string","",this.properties.name,"name");this.name_widget.width=100;this.addOutput("Value","",Object.assign({},NodesHelper.slots.variable,{pos:[NodesHelper.slots.position.x1+10,
NodesHelper.slots.position.y]}));this.size[0]=130}VariableNode.title="Variable";VariableNode.title_color=NodesHelper.titles.base;VariableNode.collapsable=!0;VariableNode.blocks="Blocks";VariableNode.prototype.resizable=!1;VariableNode.LITEGRAPH=0;VariableNode.GRAPH=1;VariableNode.GLOBALSCOPE=2;VariableNode["@container"]={type:"enum",values:{litegraph:VariableNode.LITEGRAPH,graph:VariableNode.GRAPH,global:VariableNode.GLOBALSCOPE}};
VariableNode.prototype.getContainer=function(){switch(this.properties.container){case VariableNode.GRAPH:return this.graph?this.graph.vars:{};case VariableNode.GLOBALSCOPE:return global;default:return LiteGraph.Globals}};VariableNode.prototype.onAction=function(a,b){a=this.getContainer();this.isInputConnected(1)?(this.value=this.getInputData(1),a[this.properties.name]=this.value,this.setOutputData(0,this.value)):this.setOutputData(0,a[this.properties.name])};VariableNode.prototype.getTitle=function(){return this.properties.name};
function registerBase(){LiteGraph.registerNodeType("Base/Variable",VariableNode)}function BeginPlayNode(){this.addOutput("",LiteGraph.EVENT,NodesHelper.slots.output.passer);this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,NodesHelper.slots.output.position))}BeginPlayNode.title="Begin Play";BeginPlayNode.title_color=NodesHelper.titles.event;BeginPlayNode.skip_list=!0;BeginPlayNode.collapsable=!1;BeginPlayNode.blocks="Blocks";BeginPlayNode.prototype.resizable=!1;
BeginPlayNode.prototype.ignore_remove=!0;BeginPlayNode.prototype.clonable=!1;BeginPlayNode.prototype.getMenuOptions=()=>[];BeginPlayNode.prototype.onStart=function(){this.triggerSlot(0,"BeginPlay");this.triggerSlot(1)};function EventTickNode(){this.addOutput("",LiteGraph.EVENT,NodesHelper.slots.passer);this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,NodesHelper.slots.output.position))}EventTickNode.title="Event Tick";EventTickNode.title_color=NodesHelper.titles.event;
EventTickNode.skip_list=!0;EventTickNode.collapsable=!1;EventTickNode.blocks="Blocks";EventTickNode.prototype.resizable=!1;EventTickNode.prototype.ignore_remove=!0;EventTickNode.prototype.clonable=!1;EventTickNode.prototype.getMenuOptions=()=>[];EventTickNode.prototype.onStart=function(){this.triggerSlot(1,"EventTickStarted")};EventTickNode.prototype.onExecute=function(){this.triggerSlot(0,"Tick")};
function OnGameStartNode(){this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,NodesHelper.slots.output.position));this.size=[NodesHelper.sizes.small[0],NodesHelper.sizes.small[1]]}OnGameStartNode.title="On Game Start";OnGameStartNode.title_color=NodesHelper.titles.event;OnGameStartNode.collapsable=!1;
OnGameStartNode.blocks="Blocks";OnGameStartNode.prototype.reiszable=!1;OnGameStartNode.prototype.onStart=function(){this.triggerSlot(0,"GameStart");this.triggerSlot(1)};
function EventDestroyedNode(){this.addInput("Target","object",Object.assign({},NodesHelper.slots.object));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,NodesHelper.slots.output.position));this.size=[NodesHelper.sizes.small[0],NodesHelper.sizes.small[1]]}EventDestroyedNode.title="On Destroyed";
EventDestroyedNode.title_color=NodesHelper.titles.event;EventDestroyedNode.collapsable=!1;EventDestroyedNode.blocks="Blocks";EventDestroyedNode.prototype.resizable=!1;EventDestroyedNode.prototype.onStart=function(){var a=this.getInputData(0);void 0===a&&(a=this.graph.config.self);var b=this;a.addEventListener("removed",c=>{b.triggerSlot(0,a.uuid);b.triggerSlot(1)})};
function EventDisposeNode(){this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,NodesHelper.slots.output.position));this.size=[NodesHelper.sizes.small[0],NodesHelper.sizes.small[1]]}EventDisposeNode.title="On Dispose";EventDisposeNode.title_color=NodesHelper.titles.event;EventDisposeNode.collapsable=!1;EventDisposeNode.blocks="Blocks";EventDisposeNode.prototype.resizable=!1;EventDisposeNode.prototype.onDispose=function(){this.triggerSlot(0)};
function EventListenerNode(){this.addProperty("event","event");this.addInput("",LiteGraph.ACTION,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.addInput("Object","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.input.position.pos[0],NodesHelper.slots.input.position.pos[1]+18]}));this.addInput("Data","",{pos:[NodesHelper.slots.input.position.pos[0],NodesHelper.slots.input.position.pos[1]+36]});this.addInput("Event",
"string",Object.assign({},NodesHelper.slots.string,{pos:[NodesHelper.slots.input.position.pos[0],NodesHelper.slots.input.position.pos[1]+54]}));this.event_widget=this.addWidget("text","",this.properties.event,"event");this.event_widget.width=110;this.addOutput("On Fired",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.output.position.pos[0]+60,NodesHelper.slots.output.position.pos[1]]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]+56]}
EventListenerNode.title="Event Listener";EventListenerNode.title_color=NodesHelper.titles.event;EventListenerNode.collapsable=!1;EventListenerNode.blocks="Blocks";EventListenerNode.prototype.resizable=!1;EventListenerNode.prototype.onStart=function(){null===this.inputs[0].link&&this.addListener()};EventListenerNode.prototype.onAction=function(a,b){this.addListener()};
EventListenerNode.prototype.addListener=function(){this.object=this.getInputData(1);this.data=this.getInputData(2);this.event=this.getInputData(3);void 0===this.object&&(this.object=this.graph.config.self);void 0===this.data&&(this.data={});void 0===this.event&&(this.event=this.properties.event);if(""!==this.event){var a=this;this.object.addEventListener(this.event,()=>{a.listen()})}};EventListenerNode.prototype.listen=function(){this.triggerSlot(0,this.data)};
EventListenerNode.prototype.onDispose=function(){void 0!==this.object&&this.object.removeEventListener(this.event,this.listen)};
function FireEventNode(){this.addProperty("event","event");this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Object","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.input.position.pos[0],NodesHelper.slots.position.y_second]}));this.addInput("Event","string",Object.assign({},NodesHelper.slots.string,{pos:[NodesHelper.slots.input.position.pos[0],NodesHelper.slots.position.y_third]}));this.event_widget=this.addWidget("text","",this.properties.event,
"event");this.event_widget.width=110;this.size=[NodesHelper.sizes.medium[0]-40,NodesHelper.sizes.medium[1]+40]}FireEventNode.title="Fire Event";FireEventNode.title_color=NodesHelper.titles.event;FireEventNode.collapsable=!1;FireEventNode.blocks="Blocks";FireEventNode.prototype.resizable=!1;
FireEventNode.prototype.onAction=function(a,b){this.object=this.getInputData(1);this.event=this.getInputData(2);void 0===this.object&&(this.object=this.graph.config.self);void 0===this.event&&(this.event=this.properties.event);""!==this.event&&this.object.dispatchEvent({type:this.event})};function TestEvent(){this.addInput("Event",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Input")}TestEvent.title="Test";TestEvent.blocks="Blocks";
TestEvent.prototype.onAction=function(a,b){console.log(a,b);console.log(this.getInputData(1))};
function registerEvents(){LiteGraph.registerNodeType("Events/BeginPlay",BeginPlayNode);LiteGraph.registerNodeType("Events/EventTick",EventTickNode);LiteGraph.registerNodeType("Events/OnGameStart",OnGameStartNode);LiteGraph.registerNodeType("Events/EventDestroyed",EventDestroyedNode);LiteGraph.registerNodeType("Events/EventDispose",EventDisposeNode);LiteGraph.registerNodeType("Events/EventListener",EventListenerNode);LiteGraph.registerNodeType("Events/FireEvent",FireEventNode);LiteGraph.registerNodeType("Events/TestEvent",
TestEvent)}function ArrayNode(){this.addInput("",LiteGraph.EVENT,NodesHelper.slots.event);this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event));this.addOutput("Array","array",Object.assign({},NodesHelper.slots.array,{pos:[NodesHelper.slots.position.x1,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.small[0],NodesHelper.sizes.small[1]+16]}ArrayNode.title="Array";
ArrayNode.title_color=NodesHelper.titles.array;ArrayNode.collapsable=!1;ArrayNode.prototype.resizable=!1;ArrayNode.prototype.onGetInputs=function(){return[["Item",null,Object.assign({},NodesHelper.slots.array)]]};ArrayNode.prototype.onInputAdded=function(){this.size[0]=NodesHelper.sizes.small[0]};ArrayNode.prototype.onInputRemoved=function(){this.size[0]=NodesHelper.sizes.small[0]};ArrayNode.prototype.onOutputRemoved=function(){this.size[0]=NodesHelper.sizes.small[0]};
ArrayNode.prototype.onExecute=function(){this.isInputConnected(0)||this.setOutputData(2,this.createArray())};ArrayNode.prototype.onAction=function(){var a=this.createArray();this.setOutputData(2,a);this.triggerSlot(0,a);this.triggerSlot(1)};ArrayNode.prototype.createArray=function(){var a=[];if(this.inputs)for(var b=0;b<this.inputs.length;b++){var c=this.getInputData(b);void 0!==c&&a.push(c)}return a};
function ArrayPushNode(){this.addInput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.addInput("Array","array",Object.assign({},NodesHelper.slots.array,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addInput("Element","",{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_third]});this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1,
NodesHelper.slots.position.y]}));this.size=[NodesHelper.sizes.small[0],NodesHelper.sizes.small[1]+36]}ArrayPushNode.title="Push";ArrayPushNode.title_color=NodesHelper.titles.array;ArrayPushNode.collapsable=!1;ArrayPushNode.prototype.resizable=!1;ArrayPushNode.prototype.onAction=function(){void 0!==this.getInputData(2)&&(this.getInputData(1).push(this.getInputData(2)),this.triggerSlot(0))};
function registerArray(){LiteGraph.registerNodeType("Lists/Arrays/Array",ArrayNode);LiteGraph.registerNodeType("Lists/Arrays/Push",ArrayPushNode)}function WidgetFloatNode(){this.properties={value:1};this.addOutput("Value","number",Object.assign({},NodesHelper.slots.number,{pos:[NodesHelper.slots.position.x1+50,NodesHelper.slots.position.y]}));this.addWidget("number","Value",this.properties.value,"value");this.size=[NodesHelper.sizes.small[0]+50,NodesHelper.sizes.small[1]+26]}
WidgetFloatNode.title="Float";WidgetFloatNode.title_color=NodesHelper.titles.widget;WidgetFloatNode.collapsable=!1;WidgetFloatNode.prototype.resizable=!1;WidgetFloatNode.prototype.onStart=function(){void 0!==this.properties.value&&this.setOutputData(0,this.properties.value)};WidgetFloatNode.prototype.onPropertyChanged=function(){this.setOutputData(0,this.properties.value);if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function registerWidgets(){LiteGraph.registerNodeType("Base/Widgets/Float",WidgetFloatNode)}
function ThisNode(){this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1-20,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.position.x1-20,NodesHelper.slots.position.y]}));this.addOutput("This","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x1-20,NodesHelper.slots.position.y_second]}));this.size=
[NodesHelper.sizes.small[0]-20,NodesHelper.sizes.small[1]+20]}ThisNode.title="This";ThisNode.title_color=NodesHelper.titles.object;ThisNode.collapsable=!0;ThisNode.blocks="Blocks";ThisNode.prototype.resizable=!1;ThisNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;ThisNode.prototype.onStart=function(){this.setOutputData(2,this.graph.config.self);this.triggerSlot(0,this.graph.config.self);this.triggerSlot(1)};
function GetPositionNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Target","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.position.y]}));this.addOutput("Position","vector",Object.assign({},NodesHelper.slots.vector,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]]}GetPositionNode.title="Get Position";GetPositionNode.title_color=NodesHelper.titles.object;GetPositionNode.collapsable=!0;GetPositionNode.blocks="Blocks";GetPositionNode.prototype.resizable=!1;GetPositionNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
GetPositionNode.prototype.onAction=function(a,b){a=this.getInputData(1);void 0===a&&void 0!==b&&b instanceof THREE.Object3D&&(a=b);void 0===a&&(a=this.graph.config.self);b=a.position;this.setOutputData(2,b);this.triggerSlot(0,b);this.triggerSlot(1)};
function GetRotationNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Target","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.position.y]}));this.addOutput("Rotation","euler",Object.assign({},NodesHelper.slots.euler,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]]}GetRotationNode.title="Get Rotation";GetRotationNode.title_color=NodesHelper.titles.object;GetRotationNode.collapsable=!0;GetRotationNode.blocks="Blocks";GetRotationNode.prototype.resizable=!1;GetRotationNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
GetRotationNode.prototype.onAction=function(a,b){a=this.getInputData(1);void 0===a&&void 0!==b&&b instanceof THREE.Object3D&&(a=b);void 0===a&&(a=this.graph.config.self);b=a.rotation;this.setOutputData(2,b);this.triggerSlot(0,b);this.triggerSlot(1)};
function GetScaleNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Target","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.position.y]}));this.addOutput("Scale","vector",Object.assign({},NodesHelper.slots.vector,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]]}GetScaleNode.title="Get Scale";GetScaleNode.title_color=NodesHelper.titles.object;GetScaleNode.collapsable=!0;GetScaleNode.blocks="Blocks";GetScaleNode.prototype.resizable=!1;GetScaleNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
GetScaleNode.prototype.onAction=function(a,b){a=this.getInputData(1);void 0===a&&void 0!==b&&b instanceof THREE.Object3D&&(a=b);void 0===a&&(a=this.graph.config.self);b=a.scale;this.setOutputData(2,b);this.triggerSlot(0,b);this.triggerSlot(1)};
function SetPositionNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Target","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addInput("Position","vector",Object.assign({},NodesHelper.slots.vector,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_third]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y]}));this.addOutput("New Position","vector",Object.assign({},NodesHelper.slots.vector,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]+18]}SetPositionNode.title="Set Position";SetPositionNode.title_color=NodesHelper.titles.object;
SetPositionNode.collapsable=!0;SetPositionNode.blocks="Blocks";SetPositionNode.prototype.resizable=!1;SetPositionNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
SetPositionNode.prototype.onAction=function(a,b){a=this.getInputData(1);var c=this.getInputData(2);void 0===a&&void 0!==b&&b instanceof THREE.Object3D&&(a=b);void 0===a&&(a=this.graph.config.self);void 0===c&&void 0!==b&&b instanceof THREE.Vector3&&(c=b);void 0===c&&(c=new THREE.Vector3(0,0,0));a.position.copy(c);this.setOutputData(2,c);this.triggerSlot(0,c);this.triggerSlot(1)};
function SetRotationNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Target","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addInput("Rotation","euler",Object.assign({},NodesHelper.slots.euler,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_third]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y]}));this.addOutput("New Rotation","euler",Object.assign({},NodesHelper.slots.euler,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y_second]}))}SetRotationNode.title="Set Rotation";SetRotationNode.title_color=NodesHelper.titles.object;SetRotationNode.collapsable=!0;
SetRotationNode.blocks="Blocks";SetRotationNode.prototype.resizable=!1;SetRotationNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
SetRotationNode.prototype.onAction=function(a,b){a=this.getInputData(1);var c=this.getInputData(2);void 0===a&&void 0!==b&&b instanceof THREE.Object3D&&(a=b);void 0===a&&(a=this.graph.config.self);void 0===c&&void 0!==b&&b instanceof THREE.Euler&&(c=b);void 0===c&&(c=new THREE.Euler(0,0,0,"XYZ"));a.rotation.copy(c);this.setOutputData(2,c);this.triggerSlot(0,c);this.triggerSlot(1)};
function SetScaleNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Target","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addInput("Scale","vector",Object.assign({},NodesHelper.slots.euler,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_third]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y]}));this.addOutput("New Scale","vector",Object.assign({},NodesHelper.slots.vector,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]+18]}SetScaleNode.title="Set Scale";SetScaleNode.title_color=NodesHelper.titles.object;
SetScaleNode.collapsable=!0;SetScaleNode.blocks="Blocks";SetScaleNode.prototype.resizable=!1;SetScaleNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
SetScaleNode.prototype.onAction=function(a,b){a=this.getInputData(1);var c=this.getInputData(2);void 0===a&&void 0!==b&&b instanceof THREE.Object3D&&(a=b);void 0===a&&(a=this.graph.config.self);void 0===c&&void 0!==b&&b instanceof THREE.Vector3&&(c=b);void 0===c&&(c=new THREE.Vector3(1,1,1));a.scale.copy(c);this.setOutputData(2,c);this.triggerSlot(0,c);this.triggerSlot(1)};
function registerObjects(){LiteGraph.registerNodeType("Objects/This",ThisNode);LiteGraph.registerNodeType("Objects/GetPosition",GetPositionNode);LiteGraph.registerNodeType("Objects/GetRotation",GetRotationNode);LiteGraph.registerNodeType("Objects/GetScale",GetScaleNode);LiteGraph.registerNodeType("Objects/SetPosition",SetPositionNode);LiteGraph.registerNodeType("Objects/SetRotation",SetRotationNode);LiteGraph.registerNodeType("Objects/SetScale",SetScaleNode)}
function GetAllChildrenNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Target","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.position.y]}));this.addOutput("Children","array",Object.assign({},NodesHelper.slots.array,{pos:[NodesHelper.slots.output.position.pos[0]+60,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]]}GetAllChildrenNode.title="Get All Children";GetAllChildrenNode.title_color=NodesHelper.titles.hierarchy;GetAllChildrenNode.collapsable=!1;GetAllChildrenNode.blocks="Blocks";GetAllChildrenNode.prototype.resizable=!1;
GetAllChildrenNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;GetAllChildrenNode.prototype.onAction=function(a,b){a=this.getInputData(1);void 0===a&&void 0!==b&&b instanceof THREE.Object3D&&(a=b);void 0===a&&(a=this.graph.config.self);b=a.children;this.setOutputData(2,b);this.triggerSlot(0,b);this.triggerSlot(1)};
function GetChildByNameNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Target","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addInput("Name","string",Object.assign({},NodesHelper.slots.string,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_third]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y]}));this.addOutput("Child","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.output.position.pos[0]+60,NodesHelper.slots.position.y_second]}));this.addProperty("name","");this.name_widget=this.addWidget("text","","","name");this.name_widget.width=120;this.size=[NodesHelper.sizes.medium[0],
NodesHelper.sizes.medium[1]+40]}GetChildByNameNode.title="Get Child By Name";GetChildByNameNode.title_color=NodesHelper.titles.hierarchy;GetChildByNameNode.collapsable=!1;GetChildByNameNode.blocks="Blocks";GetChildByNameNode.prototype.resizable=!1;GetChildByNameNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
GetChildByNameNode.prototype.onAction=function(a,b){a=this.getInputData(1);var c=this.getInputData(2);void 0===a&&void 0!==b&&b instanceof THREE.Object3D&&(a=b);void 0===c&&void 0!==b&&b instanceof String&&(c=b);void 0===a&&(a=this.graph.config.self);void 0===c&&(c=this.properties.name);b=a.getObjectByName(c);this.setOutputData(2,b);this.triggerSlot(0,b);this.triggerSlot(1)};
function GetParentNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Target","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.position.y]}));this.addOutput("Parent","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]]}GetParentNode.title="Get Parent";GetParentNode.title_color=NodesHelper.titles.hierarchy;GetParentNode.collapsable=!1;GetParentNode.blocks="Blocks";GetParentNode.resizable=!1;GetParentNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
GetParentNode.prototype.onAction=function(a,b){a=this.getInputData(1);void 0===a&&void 0!==b&&b instanceof THREE.Object3D&&(a=b);void 0===a&&(a=this.graph.config.self);b=a.parent;this.setOutputData(2,b);this.triggerSlot(0,b);this.triggerSlot(1)};
function IsChildNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Target","object",Object.assign({},NodesHelper.slots.object,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.event,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.position.y]}));this.addOutput("Is Child?","bool",Object.assign({},NodesHelper.slots.bool,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]]}IsChildNode.title="Is Child";IsChildNode.title_color=NodesHelper.titles.hierarchy;IsChildNode.collapsable=!1;IsChildNode.blocks="Blocks";IsChildNode.resizable=!1;IsChildNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
IsChildNode.prototype.onAction=function(a,b){a=this.getInputData(1);void 0===a&&void 0!==b&&b instanceof THREE.Object3D&&(a=b);void 0===a&&(a=this.graph.config.self);b=a.parent instanceof THREE.Scene?!1:!0;this.setOutputData(2,b);this.triggerSlot(0,b);this.triggerSlot(1)};
function registerHierarchy(){LiteGraph.registerNodeType("Hierarchy/GetAllChildNode",GetAllChildrenNode);LiteGraph.registerNodeType("Hierarchy/GetChildByName",GetChildByNameNode);LiteGraph.registerNodeType("Hierarchy/GetParent",GetParentNode);LiteGraph.registerNodeType("Hierarchy/IsChild",IsChildNode)}
function ColourNode(){this.properties={r:0,g:0,b:0};this.addWidget("number","R",this.properties.r,"r");this.addWidget("number","G",this.properties.g,"g");this.addWidget("number","B",this.properties.b,"b");this.addOutput("Colour","color",Object.assign({},NodesHelper.slots.color,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]+52]}ColourNode.title="Colour";ColourNode.title_color=NodesHelper.titles.color;
ColourNode.collapsable=!1;ColourNode.prototype.resizable=!1;ColourNode.prototype.onStart=function(){this.setOutputData(0,new THREE.Color(this.properties.r,this.properties.g,this.properties.b))};ColourNode.prototype.onPropertyChanged=function(){this.setOutputData(0,new THREE.Color(this.properties.r,this.properties.g,this.properties.b));if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function registerColour(){LiteGraph.registerNodeType("Math/Colour/Colour",ColourNode)}
function VectorNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("X","number",Object.assign({},NodesHelper.slots.number,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addInput("Y","number",Object.assign({},NodesHelper.slots.number,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_third]}));this.addInput("Z","number",Object.assign({},NodesHelper.slots.number,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_fourth]}));
this.properties={x:0,y:0,z:0};this.addWidget("number","X",this.properties.x,"x");this.addWidget("number","Y",this.properties.y,"y");this.addWidget("number","Z",this.properties.z,"z");this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y]}));this.addOutput("Vector",
"vector",Object.assign({},NodesHelper.slots.vector,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]+106]}VectorNode.title="Vector";VectorNode.title_color=NodesHelper.titles.vector;VectorNode.collapsable=!0;VectorNode.prototype.resizable=!1;VectorNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;VectorNode.prototype.onAction=function(){this.createVector()};
VectorNode.prototype.onStart=function(){this.isInputConnected(0)||this.createVector()};VectorNode.prototype.createVector=function(){var a=this.getInputData(1),b=this.getInputData(2),c=this.getInputData(3);void 0===a&&(a=this.properties.x);void 0===b&&(b=this.properties.y);void 0===c&&(c=this.properties.z);a=new THREE.Vector3(a,b,c);this.setOutputData(2,a);this.triggerSlot(0,a);this.triggerSlot(1)};
function VectorThreeToTwoNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Vector","vector",Object.assign({},NodesHelper.slots.vector,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.position.y]}));this.addOutput("Vector","vector",Object.assign({},NodesHelper.slots.vector,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]]}VectorThreeToTwoNode.title="Vector3 To Vector2";VectorThreeToTwoNode.title_color=NodesHelper.titles.vector;VectorThreeToTwoNode.collapsable=!0;VectorThreeToTwoNode.prototype.resizable=!1;VectorThreeToTwoNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
VectorThreeToTwoNode.prototype.onAction=function(a,b){a=this.getInputData(1);void 0===a&&void 0!==b&&b instanceof THREE.Vector3&&(a=b);b=new THREE.Vector2(a.x,a.y);this.setOutputData(2,b);this.triggerSlot(0,b);this.triggerSlot(1)};
function VectorAddNode(){this.addInput("",LiteGraph.ACTION,NodesHelper.slots.input.event);this.addInput("Vector 1","vector",Object.assign({},NodesHelper.slots.vector,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addInput("Vector 2","vector",Object.assign({},NodesHelper.slots.vector,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_third]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.output.passer,{pos:[NodesHelper.slots.position.x1+
60,NodesHelper.slots.output.title_pos.pos[1]]}));this.addOutput("",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y]}));this.addOutput("Out","vector",Object.assign({},NodesHelper.slots.vector,{pos:[NodesHelper.slots.position.x1+60,NodesHelper.slots.position.y_second]}));this.size=[NodesHelper.sizes.medium[0],NodesHelper.sizes.medium[1]+18]}VectorAddNode.title="Add";VectorAddNode.title_color=NodesHelper.titles.vector;
VectorAddNode.collapsable=!0;VectorAddNode.prototype.resizable=!1;VectorAddNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;VectorAddNode.prototype.onAction=function(a,b){a=this.getInputData(1);b=this.getInputData(2);void 0===a||void 0===b?console.log("An undefined parameter: ",a,b):(a=a.add(b),this.setOutputData(2,a),this.triggerSlot(0,a),this.triggerSlot(1))};
function registerVectorNode(){LiteGraph.registerNodeType("Math/Vector/Vector",VectorNode);LiteGraph.registerNodeType("Math/Vector/VectorThreeToTwo",VectorThreeToTwoNode);LiteGraph.registerNodeType("Math/Vector/VectorAdd",VectorAddNode)}function registerEulerNodes(){}
function ANode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}ANode.title="A";ANode.title_color=NodesHelper.titles.input;ANode.collapsable=!0;ANode.blocks="Blocks";ANode.prototype.resizable=!1;ANode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;ANode.prototype.onStart=function(){this.setOutputData(3,Keyboard.A)};
ANode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.A)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.A)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.A)&&this.triggerSlot(2,"Released")};
function AltNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}AltNode.title="Alt";AltNode.title_color=NodesHelper.titles.input;AltNode.collapsable=!0;AltNode.blocks="Blocks";AltNode.prototype.resizable=!1;AltNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;AltNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.ALT)};
AltNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.ALT)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.ALT)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.ALT)&&this.triggerSlot(2,"Released")};
function BNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}BNode.title="B";BNode.title_color=NodesHelper.titles.input;BNode.collapsable=!0;BNode.blocks="Blocks";BNode.prototype.resizable=!1;BNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;BNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.B)};
BNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.B)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.B)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.B)&&this.triggerSlot(2,"Released")};
function BackspaceNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}BackspaceNode.title="Backspace";BackspaceNode.title_color=NodesHelper.titles.input;BackspaceNode.collapsable=!0;BackspaceNode.blocks="Blocks";BackspaceNode.prototype.resizable=!1;BackspaceNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
BackspaceNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.BACKSPACE)};BackspaceNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.BACKSPACE)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.BACKSPACE)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.BACKSPACE)&&this.triggerSlot(2,"Released")};
function CNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}CNode.title="C";CNode.title_color=NodesHelper.titles.input;CNode.collapsable=!0;CNode.blocks="Blocks";CNode.prototype.resizable=!1;CNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;CNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.C)};
CNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.C)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.C)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.C)&&this.triggerSlot(2,"Released")};
function CapsLockNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}CapsLockNode.title="CapsLock";CapsLockNode.title_color=NodesHelper.titles.input;CapsLockNode.collapsable=!0;CapsLockNode.blocks="Blocks";CapsLockNode.prototype.resizable=!1;CapsLockNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
CapsLockNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.CAPS_LOCK)};CapsLockNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.CAPS_LOCK)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.CAPS_LOCK)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.CAPS_LOCK)&&this.triggerSlot(2,"Released")};
function CtrlNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}CtrlNode.title="Ctrl";CtrlNode.title_color=NodesHelper.titles.input;CtrlNode.collapsable=!0;CtrlNode.blocks="Blocks";CtrlNode.prototype.resizable=!1;CtrlNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;CtrlNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.CTRL)};
CtrlNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.CTRL)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.CTRL)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.CTRL)&&this.triggerSlot(2,"Released")};
function DNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}DNode.title="D";DNode.title_color=NodesHelper.titles.input;DNode.collapsable=!0;DNode.blocks="Blocks";DNode.prototype.resizable=!1;DNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;DNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.D)};
DNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.D)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.D)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.D)&&this.triggerSlot(2,"Released")};
function DelNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}DelNode.title="Del";DelNode.title_color=NodesHelper.titles.input;DelNode.collapsable=!0;DelNode.blocks="Blocks";DelNode.prototype.resizable=!1;DelNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;DelNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.DEL)};
DelNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.DEL)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.DEL)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.DEL)&&this.triggerSlot(2,"Released")};
function DownNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}DownNode.title="Down";DownNode.title_color=NodesHelper.titles.input;DownNode.collapsable=!0;DownNode.blocks="Blocks";DownNode.prototype.resizable=!1;DownNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;DownNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.DOWN)};
DownNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.DOWN)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.DOWN)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.DOWN)&&this.triggerSlot(2,"Released")};
function ENode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}ENode.title="E";ENode.title_color=NodesHelper.titles.input;ENode.collapsable=!0;ENode.blocks="Blocks";ENode.prototype.resizable=!1;ENode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;ENode.prototype.onStart=function(){this.setOutputData(3,Keyboard.E)};
ENode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.E)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.E)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.E)&&this.triggerSlot(2,"Released")};
function EndNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}EndNode.title="End";EndNode.title_color=NodesHelper.titles.input;EndNode.collapsable=!0;EndNode.blocks="Blocks";EndNode.prototype.resizable=!1;EndNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;EndNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.END)};
EndNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.END)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.END)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.END)&&this.triggerSlot(2,"Released")};
function EnterNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}EnterNode.title="Enter";EnterNode.title_color=NodesHelper.titles.input;EnterNode.collapsable=!0;EnterNode.blocks="Blocks";EnterNode.prototype.resizable=!1;EnterNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;EnterNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.ENTER)};
EnterNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.ENTER)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.ENTER)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.ENTER)&&this.triggerSlot(2,"Released")};
function EscNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}EscNode.title="Esc";EscNode.title_color=NodesHelper.titles.input;EscNode.collapsable=!0;EscNode.blocks="Blocks";EscNode.prototype.resizable=!1;EscNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;EscNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.ESC)};
EscNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.ESC)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.ESC)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.ESC)&&this.triggerSlot(2,"Released")};
function FNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}FNode.title="F";FNode.title_color=NodesHelper.titles.input;FNode.collapsable=!0;FNode.blocks="Blocks";FNode.prototype.resizable=!1;FNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;FNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.F)};
FNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F)&&this.triggerSlot(2,"Released")};
function F1Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F1Node.title="F1";F1Node.title_color=NodesHelper.titles.input;F1Node.collapsable=!0;F1Node.blocks="Blocks";F1Node.prototype.resizable=!1;F1Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F1Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F1)};
F1Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F1)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F1)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F1)&&this.triggerSlot(2,"Released")};
function F2Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F2Node.title="F2";F2Node.title_color=NodesHelper.titles.input;F2Node.collapsable=!0;F2Node.blocks="Blocks";F2Node.prototype.resizable=!1;F2Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F2Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F2)};
F2Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F2)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F2)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F2)&&this.triggerSlot(2,"Released")};
function F3Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F3Node.title="F3";F3Node.title_color=NodesHelper.titles.input;F3Node.collapsable=!0;F3Node.blocks="Blocks";F3Node.prototype.resizable=!1;F3Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F3Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F3)};
F3Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F3)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F3)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F3)&&this.triggerSlot(2,"Released")};
function F4Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F4Node.title="F4";F4Node.title_color=NodesHelper.titles.input;F4Node.collapsable=!0;F4Node.blocks="Blocks";F4Node.prototype.resizable=!1;F4Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F4Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F4)};
F4Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F4)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F4)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F4)&&this.triggerSlot(2,"Released")};
function F5Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F5Node.title="F5";F5Node.title_color=NodesHelper.titles.input;F5Node.collapsable=!0;F5Node.blocks="Blocks";F5Node.prototype.resizable=!1;F5Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F5Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F5)};
F5Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F5)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F5)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F5)&&this.triggerSlot(2,"Released")};
function F6Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F6Node.title="F6";F6Node.title_color=NodesHelper.titles.input;F6Node.collapsable=!0;F6Node.blocks="Blocks";F6Node.prototype.resizable=!1;F6Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F6Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F6)};
F6Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F6)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F6)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F6)&&this.triggerSlot(2,"Released")};
function F7Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F7Node.title="F7";F7Node.title_color=NodesHelper.titles.input;F7Node.collapsable=!0;F7Node.blocks="Blocks";F7Node.prototype.resizable=!1;F7Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F7Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F7)};
F7Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F7)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F7)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F7)&&this.triggerSlot(2,"Released")};
function F8Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F8Node.title="F8";F8Node.title_color=NodesHelper.titles.input;F8Node.collapsable=!0;F8Node.blocks="Blocks";F8Node.prototype.resizable=!1;F8Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F8Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F8)};
F8Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F8)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F8)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F8)&&this.triggerSlot(2,"Released")};
function F9Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F9Node.title="F9";F9Node.title_color=NodesHelper.titles.input;F9Node.collapsable=!0;F9Node.blocks="Blocks";F9Node.prototype.resizable=!1;F9Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F9Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F9)};
F9Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F9)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F9)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F9)&&this.triggerSlot(2,"Released")};
function F10Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F10Node.title="F10";F10Node.title_color=NodesHelper.titles.input;F10Node.collapsable=!0;F10Node.blocks="Blocks";F10Node.prototype.resizable=!1;F10Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F10Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F10)};
F10Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F10)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F10)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F10)&&this.triggerSlot(2,"Released")};
function F11Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F11Node.title="F11";F11Node.title_color=NodesHelper.titles.input;F11Node.collapsable=!0;F11Node.blocks="Blocks";F11Node.prototype.resizable=!1;F11Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F11Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F11)};
F11Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F11)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F11)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F11)&&this.triggerSlot(2,"Released")};
function F12Node(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}F12Node.title="F12";F12Node.title_color=NodesHelper.titles.input;F12Node.collapsable=!0;F12Node.blocks="Blocks";F12Node.prototype.resizable=!1;F12Node.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;F12Node.prototype.onStart=function(){this.setOutputData(3,Keyboard.F12)};
F12Node.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.F12)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.F12)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.F12)&&this.triggerSlot(2,"Released")};
function GNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}GNode.title="G";GNode.title_color=NodesHelper.titles.input;GNode.collapsable=!0;GNode.blocks="Blocks";GNode.prototype.resizable=!1;GNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;GNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.G)};
GNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.G)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.G)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.G)&&this.triggerSlot(2,"Released")};
function HNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}HNode.title="H";HNode.title_color=NodesHelper.titles.input;HNode.collapsable=!0;HNode.blocks="Blocks";HNode.prototype.resizable=!1;HNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;HNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.H)};
HNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.H)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.H)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.H)&&this.triggerSlot(2,"Released")};
function HomeNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}HomeNode.title="Home";HomeNode.title_color=NodesHelper.titles.input;HomeNode.collapsable=!0;HomeNode.blocks="Blocks";HomeNode.prototype.resizable=!1;HomeNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;HomeNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.HOME)};
HomeNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.HOME)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.HOME)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.HOME)&&this.triggerSlot(2,"Released")};
function INode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}INode.title="I";INode.title_color=NodesHelper.titles.input;INode.collapsable=!0;INode.blocks="Blocks";INode.prototype.resizable=!1;INode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;INode.prototype.onStart=function(){this.setOutputData(3,Keyboard.I)};
INode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.I)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.I)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.I)&&this.triggerSlot(2,"Released")};
function InsertNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}InsertNode.title="Insert";InsertNode.title_color=NodesHelper.titles.input;InsertNode.collapsable=!0;InsertNode.blocks="Blocks";InsertNode.prototype.resizable=!1;InsertNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;InsertNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.INSERT)};
InsertNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.INSERT)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.INSERT)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.INSERT)&&this.triggerSlot(2,"Released")};
function JNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}JNode.title="J";JNode.title_color=NodesHelper.titles.input;JNode.collapsable=!0;JNode.blocks="Blocks";JNode.prototype.resizable=!1;JNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;JNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.J)};
JNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.J)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.J)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.J)&&this.triggerSlot(2,"Released")};
function KNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}KNode.title="K";KNode.title_color=NodesHelper.titles.input;KNode.collapsable=!0;KNode.blocks="Blocks";KNode.prototype.resizable=!1;KNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;KNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.K)};
KNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.K)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.K)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.K)&&this.triggerSlot(2,"Released")};
function LNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}LNode.title="L";LNode.title_color=NodesHelper.titles.input;LNode.collapsable=!0;LNode.blocks="Blocks";LNode.prototype.resizable=!1;LNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;LNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.L)};
LNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.L)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.L)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.L)&&this.triggerSlot(2,"Released")};
function LeftNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}LeftNode.title="Left";LeftNode.title_color=NodesHelper.titles.input;LeftNode.collapsable=!0;LeftNode.blocks="Blocks";LeftNode.prototype.resizable=!1;LeftNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;LeftNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.LEFT)};
LeftNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.LEFT)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.LEFT)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.LEFT)&&this.triggerSlot(2,"Released")};
function MNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}MNode.title="M";MNode.title_color=NodesHelper.titles.input;MNode.collapsable=!0;MNode.blocks="Blocks";MNode.prototype.resizable=!1;MNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;MNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.M)};
MNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.M)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.M)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.M)&&this.triggerSlot(2,"Released")};
function NNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}NNode.title="N";NNode.title_color=NodesHelper.titles.input;NNode.collapsable=!0;NNode.blocks="Blocks";NNode.prototype.resizable=!1;NNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;NNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.N)};
NNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.N)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.N)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.N)&&this.triggerSlot(2,"Released")};
function ONode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}ONode.title="O";ONode.title_color=NodesHelper.titles.input;ONode.collapsable=!0;ONode.blocks="Blocks";ONode.prototype.resizable=!1;ONode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;ONode.prototype.onStart=function(){this.setOutputData(3,Keyboard.O)};
ONode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.O)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.O)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.O)&&this.triggerSlot(2,"Released")};
function PNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}PNode.title="P";PNode.title_color=NodesHelper.titles.input;PNode.collapsable=!0;PNode.blocks="Blocks";PNode.prototype.resizable=!1;PNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;PNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.P)};
PNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.P)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.P)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.P)&&this.triggerSlot(2,"Released")};
function PageUpNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}PageUpNode.title="PageUp";PageUpNode.title_color=NodesHelper.titles.input;PageUpNode.collapsable=!0;PageUpNode.blocks="Blocks";PageUpNode.prototype.resizable=!1;PageUpNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;PageUpNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.PAGE_UP)};
PageUpNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.PAGE_UP)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.PAGE_UP)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.PAGE_UP)&&this.triggerSlot(2,"Released")};
function PageDownNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}PageDownNode.title="PageDown";PageDownNode.title_color=NodesHelper.titles.input;PageDownNode.collapsable=!0;PageDownNode.blocks="Blocks";PageDownNode.prototype.resizable=!1;PageDownNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
PageDownNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.PAGE_DOWN)};PageDownNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.PAGE_DOWN)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.PAGE_DOWN)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.PAGE_DOWN)&&this.triggerSlot(2,"Released")};
function QNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}QNode.title="Q";QNode.title_color=NodesHelper.titles.input;QNode.collapsable=!0;QNode.blocks="Blocks";QNode.prototype.resizable=!1;QNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;QNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.Q)};
QNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.Q)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.Q)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.Q)&&this.triggerSlot(2,"Released")};
function RNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}RNode.title="R";RNode.title_color=NodesHelper.titles.input;RNode.collapsable=!0;RNode.blocks="Blocks";RNode.prototype.resizable=!1;RNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;RNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.R)};
RNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.R)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.R)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.R)&&this.triggerSlot(2,"Released")};
function RightNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}RightNode.title="Right";RightNode.title_color=NodesHelper.titles.input;RightNode.collapsable=!0;RightNode.blocks="Blocks";RightNode.prototype.resizable=!1;RightNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;RightNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.RIGHT)};
RightNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.RIGHT)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.RIGHT)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.RIGHT)&&this.triggerSlot(2,"Released")};
function SNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}SNode.title="S";SNode.title_color=NodesHelper.titles.input;SNode.collapsable=!0;SNode.blocks="Blocks";SNode.prototype.resizable=!1;SNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;SNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.S)};
SNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.S)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.S)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.S)&&this.triggerSlot(2,"Released")};
function ShiftNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}ShiftNode.title="Shift";ShiftNode.title_color=NodesHelper.titles.input;ShiftNode.collapsable=!0;ShiftNode.blocks="Blocks";ShiftNode.prototype.resizable=!1;ShiftNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;ShiftNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.SHIFT)};
ShiftNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.SHIFT)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.SHIFT)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.SHIFT)&&this.triggerSlot(2,"Released")};
function SpacebarNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}SpacebarNode.title="Spacebar";SpacebarNode.title_color=NodesHelper.titles.input;SpacebarNode.collapsable=!0;SpacebarNode.blocks="Blocks";SpacebarNode.prototype.resizable=!1;SpacebarNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;
SpacebarNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.SPACEBAR)};SpacebarNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.SPACEBAR)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.SPACEBAR)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.SPACEBAR)&&this.triggerSlot(2,"Released")};
function TNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}TNode.title="T";TNode.title_color=NodesHelper.titles.input;TNode.collapsable=!0;TNode.blocks="Blocks";TNode.prototype.resizable=!1;TNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;TNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.T)};
TNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.T)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.T)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.T)&&this.triggerSlot(2,"Released")};
function TabNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));
this.addOutput("Key","key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}TabNode.title="Tab";TabNode.title_color=NodesHelper.titles.input;TabNode.collapsable=!0;TabNode.blocks="Blocks";TabNode.prototype.resizable=!1;TabNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;TabNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.TAB)};
TabNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.TAB)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.TAB)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.TAB)&&this.triggerSlot(2,"Released")};
function UNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}UNode.title="U";UNode.title_color=NodesHelper.titles.input;UNode.collapsable=!0;UNode.blocks="Blocks";UNode.prototype.resizable=!1;UNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;UNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.U)};
UNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.U)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.U)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.U)&&this.triggerSlot(2,"Released")};
function UpNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}UpNode.title="Up";UpNode.title_color=NodesHelper.titles.input;UpNode.collapsable=!0;UpNode.blocks="Blocks";UpNode.prototype.resizable=!1;UpNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;UpNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.UP)};
UpNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.UP)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.UP)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.UP)&&this.triggerSlot(2,"Released")};
function VNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}VNode.title="V";VNode.title_color=NodesHelper.titles.input;VNode.collapsable=!0;VNode.blocks="Blocks";VNode.prototype.resizable=!1;VNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;VNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.V)};
VNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.V)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.V)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.V)&&this.triggerSlot(2,"Released")};
function WNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}WNode.title="W";WNode.title_color=NodesHelper.titles.input;WNode.collapsable=!0;WNode.blocks="Blocks";WNode.prototype.resizable=!1;WNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;WNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.W)};
WNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.W)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.W)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.W)&&this.triggerSlot(2,"Released")};
function XNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}XNode.title="X";XNode.title_color=NodesHelper.titles.input;XNode.collapsable=!0;XNode.blocks="Blocks";XNode.prototype.resizable=!1;XNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;XNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.X)};
XNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.X)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.X)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.X)&&this.triggerSlot(2,"Released")};
function YNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}YNode.title="Y";YNode.title_color=NodesHelper.titles.input;YNode.collapsable=!0;YNode.blocks="Blocks";YNode.prototype.resizable=!1;YNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;YNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.Y)};
YNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.Y)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.Y)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.Y)&&this.triggerSlot(2,"Released")};
function ZNode(){this.addOutput("Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y1]}));this.addOutput("Just Pressed",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_second]}));this.addOutput("Released",LiteGraph.EVENT,Object.assign({},NodesHelper.slots.event,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_third]}));this.addOutput("Key",
"key",Object.assign({},NodesHelper.slots.keyinput,{pos:[NodesHelper.slots.position.x1-10,NodesHelper.slots.position.y_fourth]}));this.size[0]=NodesHelper.sizes.small[0]-10}ZNode.title="Z";ZNode.title_color=NodesHelper.titles.input;ZNode.collapsable=!0;ZNode.blocks="Blocks";ZNode.prototype.resizable=!1;ZNode.prototype.getSlotMenuOptions=NodesHelper.getSlotMenuOptions;ZNode.prototype.onStart=function(){this.setOutputData(3,Keyboard.Z)};
ZNode.prototype.onExecute=function(){Keyboard.keyPressed(Keyboard.Z)&&this.triggerSlot(0,"Pressed");Keyboard.keyJustPressed(Keyboard.Z)&&this.triggerSlot(1,"JustPressed");Keyboard.keyJustReleased(Keyboard.Z)&&this.triggerSlot(2,"Released")};
function registerKeyboardNodes(){LiteGraph.registerNodeType("Input/Keyboard/A",ANode);LiteGraph.registerNodeType("Input/Keyboard/Alt",AltNode);LiteGraph.registerNodeType("Input/Keyboard/B",BNode);LiteGraph.registerNodeType("Input/Keyboard/Backspace",BackspaceNode);LiteGraph.registerNodeType("Input/Keyboard/C",CNode);LiteGraph.registerNodeType("Input/Keyboard/CapsLock",CapsLockNode);LiteGraph.registerNodeType("Input/Keyboard/Ctrl",CtrlNode);LiteGraph.registerNodeType("Input/Keyboard/D",DNode);LiteGraph.registerNodeType("Input/Keyboard/Del",
DelNode);LiteGraph.registerNodeType("Input/Keyboard/Down",DownNode);LiteGraph.registerNodeType("Input/Keyboard/E",ENode);LiteGraph.registerNodeType("Input/Keyboard/End",EndNode);LiteGraph.registerNodeType("Input/Keyboard/Enter",EnterNode);LiteGraph.registerNodeType("Input/Keyboard/Esc",EscNode);LiteGraph.registerNodeType("Input/Keyboard/F",FNode);LiteGraph.registerNodeType("Input/Keyboard/F1",F1Node);LiteGraph.registerNodeType("Input/Keyboard/F2",F2Node);LiteGraph.registerNodeType("Input/Keyboard/F3",
F3Node);LiteGraph.registerNodeType("Input/Keyboard/F4",F4Node);LiteGraph.registerNodeType("Input/Keyboard/F5",F5Node);LiteGraph.registerNodeType("Input/Keyboard/F6",F6Node);LiteGraph.registerNodeType("Input/Keyboard/F7",F7Node);LiteGraph.registerNodeType("Input/Keyboard/F8",F8Node);LiteGraph.registerNodeType("Input/Keyboard/F9",F9Node);LiteGraph.registerNodeType("Input/Keyboard/F10",F10Node);LiteGraph.registerNodeType("Input/Keyboard/F11",F11Node);LiteGraph.registerNodeType("Input/Keyboard/F12",F12Node);
LiteGraph.registerNodeType("Input/Keyboard/G",GNode);LiteGraph.registerNodeType("Input/Keyboard/H",HNode);LiteGraph.registerNodeType("Input/Keyboard/Home",HomeNode);LiteGraph.registerNodeType("Input/Keyboard/I",INode);LiteGraph.registerNodeType("Input/Keyboard/Insert",InsertNode);LiteGraph.registerNodeType("Input/Keyboard/J",JNode);LiteGraph.registerNodeType("Input/Keyboard/K",KNode);LiteGraph.registerNodeType("Input/Keyboard/L",LNode);LiteGraph.registerNodeType("Input/Keyboard/Left",LeftNode);LiteGraph.registerNodeType("Input/Keyboard/M",
MNode);LiteGraph.registerNodeType("Input/Keyboard/N",NNode);LiteGraph.registerNodeType("Input/Keyboard/O",ONode);LiteGraph.registerNodeType("Input/Keyboard/P",PNode);LiteGraph.registerNodeType("Input/Keyboard/PageUp",PageUpNode);LiteGraph.registerNodeType("Input/Keyboard/PageDown",PageDownNode);LiteGraph.registerNodeType("Input/Keyboard/Q",QNode);LiteGraph.registerNodeType("Input/Keyboard/R",RNode);LiteGraph.registerNodeType("Input/Keyboard/Right",RightNode);LiteGraph.registerNodeType("Input/Keyboard/S",
SNode);LiteGraph.registerNodeType("Input/Keyboard/Shift",ShiftNode);LiteGraph.registerNodeType("Input/Keyboard/Spacebar",SpacebarNode);LiteGraph.registerNodeType("Input/Keyboard/T",TNode);LiteGraph.registerNodeType("Input/Keyboard/Tab",TabNode);LiteGraph.registerNodeType("Input/Keyboard/U",UNode);LiteGraph.registerNodeType("Input/Keyboard/Up",UpNode);LiteGraph.registerNodeType("Input/Keyboard/V",VNode);LiteGraph.registerNodeType("Input/Keyboard/W",WNode);LiteGraph.registerNodeType("Input/Keyboard/X",
XNode);LiteGraph.registerNodeType("Input/Keyboard/Y",YNode);LiteGraph.registerNodeType("Input/Keyboard/Z",ZNode)}
function MaterialNode(){this.addInput("Colour","color",Object.assign({},NodesHelper.slots.color,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.addInput("Emissive","color",Object.assign({},NodesHelper.slots.color,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addInput("Reflectivity","number",Object.assign({},NodesHelper.slots.number,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_third]}));this.addInput("Shininess","number",
Object.assign({},NodesHelper.slots.number,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_fourth]}));this.addInput("Specular","color",Object.assign({},NodesHelper.slots.color,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_fifth]}));this.addInput("Wireframe","bool",Object.assign({},NodesHelper.slots.bool,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_sixth]}));this.addInput("Transparent","bool",Object.assign({},NodesHelper.slots.bool,{pos:[NodesHelper.slots.position.x,
NodesHelper.slots.position.y_seventh]}));this.addInput("Opacity","number",Object.assign({},NodesHelper.slots.number,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_eighth]}));this.addInput("Affected By Fog","bool",Object.assign({},NodesHelper.slots.bool,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_ninth]}));this.serialize_widgets=!0;this.properties={reflectivity:1,shininess:30,wireframe:!1,depthwrite:!1,transparent:!1,opacity:1,abf:!0};var a=this;this.widget1=this.addWidget("slider",
"Reflectivity",this.properties.reflectivity,b=>{a.properties.reflectivity=b},{value:this.properties.reflectivity,min:0,max:1,text:"R"});this.widget2=this.addWidget("slider","Shininess",this.properties.shininess,b=>{a.properties.shininess=b},{value:this.properties.shininess,min:0,max:100,text:"S"});this.addWidget("toggle","Wireframe",this.properties.wireframe,"wireframe");this.addWidget("toggle","Depth Write",this.properties.depthwrite,"depthwrite");this.addWidget("toggle","Transparent",this.properties.transparent,
"transparent");this.widget3=this.addWidget("slider","Opacity",this.properties.opacity,b=>{a.properties.opacity=b},{value:this.properties.opacity,min:0,max:1});this.addWidget("toggle","Affected By Fog",this.properties.abf,"abf")}MaterialNode.title="Material";MaterialNode.title_color=NodesHelper.titles.material;MaterialNode.collapsable=!1;MaterialNode.skip_list=!0;MaterialNode.prototype.resizable=!1;
MaterialNode.prototype.onPropertyChanged=function(a,b){if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange();"reflectivity"===a?void 0!==this.widget1&&(this.widget1.value=b):"shininess"===a?void 0!==this.widget2&&(this.widget2.value=b):"opacity"===a&&void 0!==this.widget3&&(this.widget3.value=b)};
MaterialNode.prototype.onExecute=function(){if(void 0!==this.graph.extra){var a=this.graph.extra.material;a.nodes}if(void 0!==a){var b=this.getInputData(0),c=this.getInputData(1),d=this.getInputData(2),e=this.getInputData(3),f=this.getInputData(4),g=this.getInputData(5),k=this.getInputData(6),l=this.getInputData(7),m=this.getInputData(8),r=this.getInputData(9);void 0!==b&&(a.color=b);void 0!==c&&(a.emissive=c);a.reflectivity=void 0!==d?d:this.properties.reflectivity;a.shininess=void 0!==e?e:this.properties.shininess;
void 0!==f&&(a.specular=f);a.wireframe=void 0!==g?g:this.properties.wireframe;a.depthWrite=void 0!==k?k:this.properties.depthwrite;a.transparent=void 0!==l?l:this.properties.transparent;a.opacity=void 0!==m?m:this.properties.opacity;a.fog=void 0!==r?r:this.properties.abf}};function MaterialSideNode(){this.serialize_widgets=!0;this.properties={side:THREE.FontSide,sides:"Front;Back;Double",sideStr:""};this.side="";this.sides=this.properties.sides.split(";")}MaterialSideNode.title="Side";
MaterialSideNode.title_color=NodesHelper.titles.material;MaterialSideNode.collapsable=!0;MaterialSideNode.prototype.resizable=!1;
MaterialSideNode.prototype.onAdded=function(){var a=this;this.properties.side=this.graph.extra.material.side;this.properties.side===THREE.FrontSide?this.side="Front":this.properties.side===THREE.BackSide?this.side="Back":this.properties.side===THREE.DoubleSide&&(this.side="Double");this.combo=this.addWidget("combo","Side",this.side,b=>{a.properties.sideStr=b},{values:this.sides,property:"sideStr"});this.combo.width=160;this.size=[160,30]};
MaterialSideNode.prototype.onPropertyChanged=function(a,b){var c=this.graph.extra.material;"sideStr"===a&&("Front"===b?c.side=THREE.FrontSide:"Back"===b?c.side=THREE.BackSide:"Double"===b&&(c.side=THREE.DoubleSide));if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};function MaterialDepthTestNode(){this.serialize_widgets=!0;this.properties={test:!1}}MaterialDepthTestNode.title="Depth Test";MaterialDepthTestNode.title_color=NodesHelper.titles.material;
MaterialDepthTestNode.collapsable=!0;MaterialDepthTestNode.prototype.resizable=!1;MaterialDepthTestNode.prototype.onAdded=function(){this.properties.test=this.graph.extra.material.depthTest;this.addWidget("toggle","Depth Test",this.properties.test,"test").width=160;this.size=[160,30]};MaterialDepthTestNode.prototype.onPropertyChanged=function(a,b){this.graph.extra.material.depthTest=b;if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function MaterialAlphaTestNode(){this.serialize_widgets=!0;this.properties={test:!1}}MaterialAlphaTestNode.title="Alpha Test";MaterialAlphaTestNode.title_color=NodesHelper.titles.material;MaterialAlphaTestNode.collapsable=!0;MaterialAlphaTestNode.prototype.resizable=!1;MaterialAlphaTestNode.prototype.onAdded=function(){this.properties.test=this.graph.extra.material.alphaTest;this.addWidget("toggle","Alpha Test",this.properties.test,"test").width=160;this.size=[160,30]};
MaterialAlphaTestNode.prototype.onPropertyChanged=function(a,b){this.graph.extra.material.alphaTest=b;if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};function MaterialBlendingModeNode(){this.serialize_widgets=!0;this.properties={blending:THREE.NoBlending,modes:"None;Normal;Additive;Subtractive;Multiply",blendingStr:""};this.blending="";this.modes=this.properties.modes.split(";")}MaterialBlendingModeNode.title="Blending Mode";
MaterialBlendingModeNode.title_color=NodesHelper.titles.material;MaterialBlendingModeNode.collapsable=!0;MaterialBlendingModeNode.prototype.resizable=!1;
MaterialBlendingModeNode.prototype.onAdded=function(){var a=this;this.properties.blending=this.graph.extra.material.blending;this.properties.blending===THREE.NoBlending?this.blending="None":this.properties.blending===THREE.NormalBlending?this.blending="Normal":this.properties.blending===THREE.AdditiveBlending?this.blending="Additive":this.properties.blending===THREE.SubtractiveBlending?this.blending="Subtractive":this.properties.blending===THREE.MultiplyBlending&&(this.blending="Multiply");this.combo=
this.addWidget("combo","Blending",this.blending,b=>{a.properties.blendingStr=b},{values:this.modes,property:"blendingStr"});this.combo.width=200;this.size=[200,30]};
MaterialBlendingModeNode.prototype.onPropertyChanged=function(a,b){var c=this.graph.extra.material;"blendingStr"===a&&("None"===b?c.blending=THREE.NoBlending:"Normal"===b?c.blending=THREE.NormalBlending:"Additive"===b?c.blending=THREE.AdditiveBlending:"Subtractive"===b?c.blending=THREE.SubtractiveBlending:"Multiply"===b&&(c.blending=THREE.MultiplyBlending));if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function MaterialSkinningNode(){this.serialize_widgets=!0;this.properties={skinning:!1}}MaterialSkinningNode.title="Skinning";MaterialSkinningNode.title_color=NodesHelper.titles.material;MaterialSkinningNode.collapsable=!0;MaterialSkinningNode.prototype.resizable=!1;MaterialSkinningNode.prototype.onAdded=function(){this.properties.skinning=this.graph.extra.material.skinning;this.addWidget("toggle","Skinning",this.properties.skinning,"skinning").width=160;this.size=[160,30]};
MaterialSkinningNode.prototype.onPropertyChanged=function(){if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};function MaterialMorphTargetsNode(){this.serialize_widgets=!0;this.properties={morphTargets:!1}}MaterialMorphTargetsNode.title="Morph Targets";MaterialMorphTargetsNode.title_color=NodesHelper.titles.material;MaterialMorphTargetsNode.collapsable=!0;MaterialMorphTargetsNode.prototype.resizable=!1;
MaterialMorphTargetsNode.prototype.onAdded=function(){this.properties.morphTargets=this.graph.extra.material.morphTargets;this.addWidget("toggle","Morph Targets",this.properties.morphTargets,"morphTargets").width=180;this.size=[180,30]};MaterialMorphTargetsNode.prototype.onPropertyChanged=function(){if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function MaterialColourNode(){this.addInput("Colour","color",Object.assign({},NodesHelper.slots.color,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.size=[120,26]}MaterialColourNode.title="Colour";MaterialColourNode.title_color=NodesHelper.titles.material;MaterialColourNode.collapsable=!0;MaterialColourNode.prototype.resizable=!1;MaterialColourNode.prototype.onAdded=function(){this.mat=this.graph.extra.material};
MaterialColourNode.prototype.onExecute=function(){var a=this.getInputData(0);void 0!==a&&(this.mat.color=a)};function MaterialMapNode(){this.addInput("Map","texture",Object.assign({},NodesHelper.slots.texture,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.size=[120,26]}MaterialMapNode.title="Map";MaterialMapNode.title_color=NodesHelper.titles.material;MaterialMapNode.collapsable=!0;MaterialMapNode.prototype.resizable=!1;
MaterialMapNode.prototype.onAdded=function(){this.mat=this.graph.extra.material};MaterialMapNode.prototype.onExecute=function(){var a=this.getInputData(0);void 0!==a&&(this.mat.map=a)};function MaterialAlphaMapNode(){this.addInput("Alpha","texture",Object.assign({},NodesHelper.slots.texture,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.size=[120,26]}MaterialAlphaMapNode.title="Alpha Map";MaterialAlphaMapNode.title_color=NodesHelper.titles.material;
MaterialAlphaMapNode.collapsable=!0;MaterialAlphaMapNode.prototype.resizable=!1;MaterialAlphaMapNode.prototype.onAdded=function(){this.mat=this.graph.extra.material};MaterialAlphaMapNode.prototype.onExecute=function(){var a=this.getInputData(0);void 0!==a&&(this.mat.alphaMap=a)};
function MaterialShadingNode(){this.serialize_widgets=!0;this.properties={shading:THREE.SmoothShading,shadings:"Smooth;Flat",shadingStr:""};this.shading="";this.shadings=this.properties.shadings.split(";");this.serialize_widgets=!0}MaterialShadingNode.title="Shading";MaterialShadingNode.title_color=NodesHelper.titles.material;MaterialShadingNode.collapsable=!0;MaterialShadingNode.prototype.resizable=!1;
MaterialShadingNode.prototype.onAdded=function(){var a=this;this.properties.shading=this.graph.extra.material.shading;this.properties.shading===THREE.SmoothShading?this.shading="Smooth":this.properties.shading===THREE.FlatShading&&(this.shading="Flat");this.combo=this.addWidget("combo","Shading",this.shading,b=>{a.properties.shadingStr=b},{values:this.shadings,property:"shadingStr"});this.combo.width=180;this.size=[180,30]};
MaterialShadingNode.prototype.onPropertyChanged=function(a,b){var c=this.graph.extra.material;"shadingStr"===a&&("Smooth"===b?c.shading=THREE.SmoothShading:"Flat"===b&&(c.shading=THREE.FlatShading));if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function MaterialBumpMapNode(){this.properties={scale:0};this.addInput("Map","texture",Object.assign({},NodesHelper.slots.texture,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.serialize_widgets=!0}MaterialBumpMapNode.title="Bump";MaterialBumpMapNode.title_color=NodesHelper.titles.material;MaterialBumpMapNode.collapsable=!0;MaterialBumpMapNode.prototype.resizable=!1;
MaterialBumpMapNode.prototype.onAdded=function(){var a=this;this.material=this.graph.extra.material;this.properties.scale=void 0!==this.material.bumpScale?this.material.bumpScale:0;this.addWidget("slider","Scale",this.properties.scale,b=>{a.properties.scale=b},{min:0,max:1,property:"scale"})};MaterialBumpMapNode.prototype.onExecute=function(){var a=this.getInputData(0);void 0!==a&&(this.material.bumpMap=a)};
MaterialBumpMapNode.prototype.onPropertyChanged=function(){this.material.bumpScale=this.properties.scale;if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};function MaterialNormalNode(){this.properties={scalex:1,scaley:1};this.addInput("Map","texture",Object.assign({},NodesHelper.slots.texture,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.serialize_widgets=!0}MaterialNormalNode.title="Normal";MaterialNormalNode.title_color=NodesHelper.titles.material;
MaterialNormalNode.collapsable=!0;MaterialNormalNode.prototype.resizable=!1;MaterialNormalNode.prototype.onAdded=function(){this.material=this.graph.extra.material;this.properties.scalex=this.material.normalScale.x;this.properties.scaley=this.material.normalScale.y;this.addWidget("number","Scale X",this.properties.scalex,"scalex");this.addWidget("number","Scale Y",this.properties.scaley,"scaley")};
MaterialNormalNode.prototype.onExecute=function(){var a=this.getInputData(0);void 0!==a&&(this.material.normalMap=a)};MaterialNormalNode.prototype.onPropertyChanged=function(){this.material.normalScale=new THREE.Vector2(this.properties.scalex,this.properties.scaley);if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function MaterialDisplacementMapNode(){this.properties={scalex:0,bias:0};this.addInput("Map","texture",Object.assign({},NodesHelper.slots.texture,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.serialize_widgets=!0}MaterialDisplacementMapNode.title="Displacement";MaterialDisplacementMapNode.title_color=NodesHelper.titles.material;MaterialDisplacementMapNode.collapsable=!0;MaterialDisplacementMapNode.prototype.resizable=!1;
MaterialDisplacementMapNode.prototype.onAdded=function(){this.material=this.graph.extra.material;this.properties.scale=void 0!==this.material.displacementScale?this.material.displacementScale:0;this.properties.bias=void 0!==this.material.displacementBias?this.material.displacementBias:0;this.addWidget("number","Scale",this.properties.scale,"scale");this.addWidget("number","Bias",this.properties.bias,"bias")};
MaterialDisplacementMapNode.prototype.onExecute=function(){var a=this.getInputData(0);void 0!==a&&(this.material.displacementMap=a)};MaterialDisplacementMapNode.prototype.onPropertyChanged=function(a,b){"scale"===a?this.material.displacementScale=new this.properties.scale:"bias"===a&&(this.material.displacementBias=this.properties.bias)};
function MaterialSpecularMapNode(){this.addInput("Map","texture",Object.assign({},NodesHelper.slots.texture,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}))}MaterialSpecularMapNode.title="Specular";MaterialSpecularMapNode.title_color=NodesHelper.titles.material;MaterialSpecularMapNode.collapsable=!0;MaterialSpecularMapNode.prototype.resizable=!1;MaterialSpecularMapNode.prototype.onAdded=function(){this.material=this.graph.extra.material};
MaterialSpecularMapNode.prototype.onExecute=function(){var a=this.getInputData(0);void 0!==a&&(this.material.specularMap=a)};
function MaterialEmissiveMapNode(){this.properties={intensity:0};this.addInput("Map","texture",Object.assign({},NodesHelper.slots.texture,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.addInput("Colour","color",Object.assign({},NodesHelper.slots.color,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.serialize_widgets=!0}MaterialEmissiveMapNode.title="Emissive";MaterialEmissiveMapNode.title_color=NodesHelper.titles.material;
MaterialEmissiveMapNode.collapsable=!0;MaterialEmissiveMapNode.prototype.resizable=!1;MaterialEmissiveMapNode.prototype.onAdded=function(){this.material=this.graph.extra.material;this.properties.intensity=void 0!==this.material.emissiveIntensity?this.material.emissiveIntensity:0;this.addWidget("number","Intensity",this.properties.intensity,"intensity")};
MaterialEmissiveMapNode.prototype.onExecute=function(){var a=this.getInputData(0),b=this.getInputData(1);void 0!==a&&(this.material.emissiveMap=a);void 0!==b&&this.material.emissive.copy(b)};MaterialEmissiveMapNode.prototype.onPropertyChanged=function(a,b){"intensity"===a&&(this.material.emissiveIntensity=b);if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function MaterialShaderNode(){this.properties={mat:null};this.addInput("Uniforms","json",Object.assign({},NodesHelper.slots.json,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}))}MaterialShaderNode.title="Shader";MaterialShaderNode.title_color=NodesHelper.titles.material;MaterialShaderNode.collapsable=!0;MaterialShaderNode.skip_list=!0;MaterialShaderNode.prototype.resizable=!1;
MaterialShaderNode.prototype.onDblClick=function(){var a=this.graph.extra.material,b=this.graph.extra.file;if(a instanceof THREE.ShaderMaterial){for(var c=!1,d=0;d<Interface.tab.options.length;d++)if(Interface.tab.options[d].component instanceof ShaderMaterialEditor&&Interface.tab.options[d].component.material===a){c=!0;Interface.tab.selectTab(d);break}c||(c=Interface.tab.addTab(a.name,Interface.file_dir+"Icons/Misc/material.png",!0),d=new ShaderMaterialEditor,d.attachMaterial(a,b),c.attachComponent(d),
c.select())}};
function registerMaterialNodes(){LiteGraph.registerNodeType("Material/Material",MaterialNode);LiteGraph.registerNodeType("Material/Shader",MaterialShaderNode);LiteGraph.registerNodeType("Material/Side",MaterialSideNode);LiteGraph.registerNodeType("Material/DepthTest",MaterialDepthTestNode);LiteGraph.registerNodeType("Material/AlphaTest",MaterialAlphaTestNode);LiteGraph.registerNodeType("Material/BlendingMode",MaterialBlendingModeNode);LiteGraph.registerNodeType("Material/Skinning",MaterialSkinningNode);LiteGraph.registerNodeType("Material/MorphTargets",
MaterialMorphTargetsNode);LiteGraph.registerNodeType("Material/Colour",MaterialColourNode);LiteGraph.registerNodeType("Material/Map",MaterialMapNode);LiteGraph.registerNodeType("Material/AlphaMap",MaterialAlphaMapNode);LiteGraph.registerNodeType("Material/Shading",MaterialShadingNode);LiteGraph.registerNodeType("Material/BumpMap",MaterialBumpMapNode);LiteGraph.registerNodeType("Material/NormalMap",MaterialNormalNode);LiteGraph.registerNodeType("Material/DisplacementMap",MaterialDisplacementMapNode);
LiteGraph.registerNodeType("Material/SpecularMap",MaterialSpecularMapNode);LiteGraph.registerNodeType("Material/EmissiveMap",MaterialEmissiveMapNode)}
function ParticlesNode(){this.addInput("Direction","string",Object.assign({},NodesHelper.slots.string,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.addInput("Count","number",Object.assign({},NodesHelper.slots.number,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}));this.addInput("Rate","number",Object.assign({},NodesHelper.slots.number,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_third]}));this.addInput("Duration","number",Object.assign({},
NodesHelper.slots.number,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_fourth]}));this.addInput("Wiggle","number",Object.assign({},NodesHelper.slots.number,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_fifth]}));this.serialize_widgets=!0;this.properties={direction:"Forward",directions:"Forward;Backward",count:2E3,rate:2E3,duration:0,wiggle:0}}ParticlesNode.title="Particles";ParticlesNode.title_color=NodesHelper.titles.particles;ParticlesNode.skip_list=!0;
ParticlesNode.collapsable=!1;ParticlesNode.prototype.resizable=!1;
ParticlesNode.prototype.onAdded=function(){var a=this,b=this.graph.extra.particles.emitter,c=this.graph.extra.particles.group;this.emitter=b;this.group=c;this.properties.direction=1===b.direction?"Forward":"Backward";this.properties.count=c.maxParticleCount;this.properties.rate=b.particleCount;this.properties.duration=b.duration;this.properties.wiggle=b.wiggle.value;this.dir=this.addWidget("combo","Direction",this.properties.direction,d=>{a.properties.direction=d},{property:"direction",values:this.properties.directions.split(";")});
this.count=this.addWidget("number","Max Count",this.properties.count,"count");this.rate=this.addWidget("slider","Rate",this.properties.rate,d=>{a.properties.rate=d},{value:this.properties.rate,min:0,max:this.properties.count,property:"rate"});this.duration=this.addWidget("number","Duration",this.properties.duration,"duration");this.wiggle=this.addWidget("number","Wiggle",this.properties.wiggle,"wiggle")};
ParticlesNode.prototype.onPropertyChanged=function(a,b){"direction"===a&&("Forward"===b?this.emitter.direction=1:"Backward"===b&&(this.emitter.direction=-1));"count"===a&&(this.group.maxParticleCount=parseInt(b),this.rate.options.max=parseInt(b),this.rate.value>parseInt(b)&&(this.emitter.particleCount=parseInt(b),this.rate.value=parseInt(b)));"rate"===a&&(this.emitter.particleCount=parseInt(b));"duration"===a&&(this.emitter.duration=.01>b?null:b);"wiggle"===a&&(this.emitter.wiggle.value=parseInt(b));
if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};function ParticlesTextureNode(){this.serialize_widgets=!0;this.addInput("Texture","texture",Object.assign({},NodesHelper.slots.texture,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.size=[120,26]}ParticlesTextureNode.title="Texture";ParticlesTextureNode.title_color=NodesHelper.titles.particles;ParticlesTextureNode.collapsable=!0;ParticlesTextureNode.prototype.resizable=!1;
ParticlesTextureNode.prototype.onAdded=function(){this.group=this.graph.extra.particles.group};ParticlesTextureNode.prototype.onExecute=function(){var a=this.getInputData(0);void 0!==a&&(this.group.texture=a)};function ParticlesBlendingModeNode(){this.serialize_widgets=!0;this.properties={blending:"NaN",modes:"None;Normal;Additive;Subtractive;Multiply"}}ParticlesBlendingModeNode.title="Blending";ParticlesBlendingModeNode.title_color=NodesHelper.titles.particles;
ParticlesBlendingModeNode.collapsable=!0;ParticlesBlendingModeNode.prototype.resizable=!1;
ParticlesBlendingModeNode.prototype.onAdded=function(){this.group=this.graph.extra.particles.group;this.blending=this.group.blending;var a="",b=this;this.blending===THREE.NoBlending?a="None":this.blending===THREE.NormalBlending?a="Normal":this.blending===THREE.AdditiveBlending?a="Additive":this.blending===THREE.SubtractiveBlending?a="Subtractive":this.blending===THREE.MultiplyBlending&&(a="Multiply");this.properties.blending=a;this.addWidget("combo","Blending",a,c=>{b.properties.blending=c},{property:"blending",
values:this.properties.modes.split(";"),width:200});this.size=[200,26]};ParticlesBlendingModeNode.prototype.onPropertyChanged=function(a,b){"blending"===a&&(console.log(b),"None"===b?this.group.blending=THREE.NoBlending:"Normal"===b?this.group.blending=THREE.NormalBlending:"Additive"===b?this.group.blending=THREE.AdditiveBlending:"Subtractive"===b?this.group.blending=THREE.SubtractiveBlending:"Multiply"===b&&(this.group.blending=THREE.MultiplyBlending));if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function ParticlesEmitterTypeNode(){this.serialize_widgets=!0;this.properties={type:"NaN",types:"Box;Sphere;Disc"}}ParticlesEmitterTypeNode.title="Emitter Type";ParticlesEmitterTypeNode.title_color=NodesHelper.titles.particles;ParticlesEmitterTypeNode.collapsable=!0;ParticlesEmitterTypeNode.prototype.resizable=!1;
ParticlesEmitterTypeNode.prototype.onAdded=function(){this.emitter=this.graph.extra.particles.emitter;var a="",b=this;this.emitter.type===SPE.distributions.BOX?a="Box":this.emitter.type===SPE.distributions.SPHERE?a="Sphere":this.emitter.type===SPE.distributions.DISC&&(a="Disc");this.properties.type=a;this.addWidget("combo","Type",a,c=>{b.properties.type=c},{property:"type",values:this.properties.types.split(";"),width:180});this.size=[180,26]};
ParticlesEmitterTypeNode.prototype.onPropertyChanged=function(a,b){"type"===a&&("Box"===b?this.emitter.type=SPE.distributions.BOX:"Sphere"===b?this.emitter.type=SPE.distributions.SPHERE:"Disc"===b&&(this.emitter.type=SPE.distributions.DISC));if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};function ParticlesMaxAgeNode(){this.serialize_widgets=!0;this.properties={value:0,spread:0}}ParticlesMaxAgeNode.title="Max Age";ParticlesMaxAgeNode.title_color=NodesHelper.titles.particles;
ParticlesMaxAgeNode.collapsable=!0;ParticlesMaxAgeNode.prototype.resizable=!1;ParticlesMaxAgeNode.prototype.onAdded=function(){this.maxAge=this.graph.extra.particles.emitter.maxAge;this.value=this.maxAge.value;this.spread=this.maxAge.spread;this.properties.value=this.value;this.properties.spread=this.spread;this.addWidget("number","Value",this.properties.value,"value");this.addWidget("number","Spread",this.properties.spread,"spread");this.size=[160,52]};
ParticlesMaxAgeNode.prototype.onPropertyChanged=function(a,b){"value"===a?this.value=b:"spread"===a&&(this.spread=b);if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};function ParticlesPositionNode(){this.serialize_widgets=!0;this.properties={x:0,y:0,z:0,spreadx:0,spready:0,spreadz:0}}ParticlesPositionNode.title="Position";ParticlesPositionNode.title_color=NodesHelper.titles.particles;ParticlesPositionNode.collapsable=!0;
ParticlesPositionNode.prototype.resizable=!1;
ParticlesPositionNode.prototype.onAdded=function(){this.position=this.graph.extra.particles.emitter.position;this.value=this.position.value;this.spread=this.position.spread;this.addWidget("number","Value X",this.value.x,"x");this.addWidget("number","Value Y",this.value.y,"y");this.addWidget("number","Value Z",this.value.z,"z");this.addWidget("number","Spread X",this.spread.x,"spreadx");this.addWidget("number","Spread Y",this.spread.y,"spready");this.addWidget("number","Spread Z",this.spread.z,"spreadz");
this.size=[180,150]};ParticlesPositionNode.prototype.onPropertyChanged=function(a,b){if("x"===a||"y"===a||"z"===a)this.value.x=this.properties.x,this.value.y=this.properties.y,this.value.z=this.properties.z;else if("spreadx"===a||"spready"===a||"spreadz"===a)this.spread.x=this.properties.spreadx,this.spread.y=this.properties.spready,this.spread.z=this.properties.spreadz;if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function ParticlesVelocityNode(){this.serialize_widgets=!0;this.properties={x:0,y:0,z:0,spreadx:0,spready:0,spreadz:0}}ParticlesVelocityNode.title="Velocity";ParticlesVelocityNode.title_color=NodesHelper.titles.particles;ParticlesVelocityNode.collapsable=!0;ParticlesVelocityNode.prototype.resizable=!1;
ParticlesVelocityNode.prototype.onAdded=function(){this.velocity=this.graph.extra.particles.emitter.velocity;this.value=this.velocity.value;this.spread=this.velocity.spread;this.addWidget("number","Value X",this.value.x,"x");this.addWidget("number","Value Y",this.value.y,"y");this.addWidget("number","Value Z",this.value.z,"z");this.addWidget("number","Spread X",this.spread.x,"spreadx");this.addWidget("number","Spread Y",this.spread.y,"spready");this.addWidget("number","Spread Z",this.spread.z,"spreadz");
this.size=[180,150]};ParticlesVelocityNode.prototype.onPropertyChanged=function(a,b){if("x"===a||"y"===a||"z"===a)this.value.x=this.properties.x,this.value.y=this.properties.y,this.value.z=this.properties.z;else if("spreadx"===a||"spready"===a||"spreadz"===a)this.spread.x=this.properties.spreadx,this.spread.y=this.properties.spready,this.spread.z=this.properties.spreadz;if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function ParticlesAccelerationNode(){this.serialize_widgets=!0;this.properties={x:0,y:0,z:0,spreadx:0,spready:0,spreadz:0}}ParticlesAccelerationNode.title="Acceleration";ParticlesAccelerationNode.title_color=NodesHelper.titles.particles;ParticlesAccelerationNode.collapsable=!0;ParticlesAccelerationNode.prototype.resizable=!1;
ParticlesAccelerationNode.prototype.onAdded=function(){this.acceleration=this.graph.extra.particles.emitter.velocity;this.value=this.acceleration.value;this.spread=this.acceleration.spread;this.addWidget("number","Value X",this.value.x,"x");this.addWidget("number","Value Y",this.value.y,"y");this.addWidget("number","Value Z",this.value.z,"z");this.addWidget("number","Spread X",this.spread.x,"spreadx");this.addWidget("number","Spread Y",this.spread.y,"spready");this.addWidget("number","Spread Z",this.spread.z,
"spreadz");this.size=[180,150]};ParticlesAccelerationNode.prototype.onPropertyChanged=function(a,b){if("x"===a||"y"===a||"z"===a)this.value.x=this.properties.x,this.value.y=this.properties.y,this.value.z=this.properties.z;else if("spreadx"===a||"spready"===a||"spreadz"===a)this.spread.x=this.properties.spreadx,this.spread.y=this.properties.spready,this.spread.z=this.properties.spreadz;if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function ParticlesWiggleNode(){this.serialize_widgets=!0;this.properties={wiggle:0,spread:0}}ParticlesWiggleNode.title="Wiggle";ParticlesWiggleNode.title_color=NodesHelper.titles.particles;ParticlesWiggleNode.collapsable=!0;ParticlesWiggleNode.prototype.resizable=!1;
ParticlesWiggleNode.prototype.onAdded=function(){this.wiggle=this.graph.extra.particles.emitter.wiggle;this.value=this.wiggle.value;this.spread=this.wiggle.spread;this.addWidget("number","Value",this.value,"wiggle");this.addWidget("number","Spread",this.spread,"spread")};ParticlesWiggleNode.prototype.onPropertyChanged=function(a,b){"wiggle"===a?this.value=b:"spread"===a&&(this.spread=b);if(this.graph&&this.graph.onNodeConnectionChange)this.graph.onNodeConnectionChange()};
function ParticlesOpacityNode(){this.addInput("Value","array",Object.assign({},NodesHelper.slots.array,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.addInput("Spread","array",Object.assign({},NodesHelper.slots.array,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}))}ParticlesOpacityNode.title="Opacity";ParticlesOpacityNode.title_color=NodesHelper.titles.particles;ParticlesOpacityNode.collapsable=!0;ParticlesOpacityNode.prototype.resizable=!1;
ParticlesOpacityNode.prototype.onAdded=function(){this.opacity=this.graph.extra.particles.emitter.opacity};ParticlesOpacityNode.prototype.onExecute=function(){var a=this.getInputData(0),b=this.getInputData(1);void 0===a||4>a.length||(void 0!==b&&4<b.length&&(this.opacity.spread=b),this.opacity.value=a)};
function ParticlesScaleNode(){this.addInput("Value","array",Object.assign({},NodesHelper.slots.array,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.addInput("Spread","array",Object.assign({},NodesHelper.slots.array,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}))}ParticlesScaleNode.title="Scale";ParticlesScaleNode.title_color=NodesHelper.titles.particles;ParticlesScaleNode.collapsable=!0;ParticlesScaleNode.prototype.resizable=!1;
ParticlesScaleNode.prototype.onAdded=function(){this.scale=this.graph.extra.particles.emitter.size};ParticlesScaleNode.prototype.onExecute=function(){var a=this.getInputData(0),b=this.getInputData(1);void 0===a||4>a.length||(void 0!==b&&4<b.length&&(this.scale.spread=b),this.scale.value=a)};
function ParticlesRotationNode(){this.addInput("Value","array",Object.assign({},NodesHelper.slots.array,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.addInput("Spread","array",Object.assign({},NodesHelper.slots.array,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}))}ParticlesRotationNode.title="Rotation";ParticlesRotationNode.title_color=NodesHelper.titles.particles;ParticlesRotationNode.collapsable=!0;ParticlesRotationNode.prototype.resizable=!1;
ParticlesRotationNode.prototype.onAdded=function(){this.rotation=this.graph.extra.particles.emitter.angle};ParticlesRotationNode.prototype.onExecute=function(){var a=this.getInputData(0),b=this.getInputData(1);void 0===a||4>a.length||(void 0!==b&&4<b.length&&(this.rotation.spread=b),this.rotation.value=a)};
function ParticlesColourNode(){this.addInput("Value","array",Object.assign({},NodesHelper.slots.array,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y]}));this.addInput("Spread","array",Object.assign({},NodesHelper.slots.array,{pos:[NodesHelper.slots.position.x,NodesHelper.slots.position.y_second]}))}ParticlesColourNode.title="Colour";ParticlesColourNode.title_color=NodesHelper.titles.particles;ParticlesColourNode.collapsable=!0;ParticlesColourNode.prototype.resizable=!1;
ParticlesColourNode.prototype.onAdded=function(){this.colour=this.graph.extra.particles.emitter.color};ParticlesColourNode.prototype.onExecute=function(){var a=this.getInputData(0),b=this.getInputData(1);void 0===a||4>a.length||(void 0!==b&&4<b.length&&(this.colour.spread=b),this.colour.value=a)};
function registerParticlesNodes(){LiteGraph.registerNodeType("Particles/Particles",ParticlesNode);LiteGraph.registerNodeType("Particles/ParticlesTexture",ParticlesTextureNode);LiteGraph.registerNodeType("Particles/ParticlesBlending",ParticlesBlendingModeNode);LiteGraph.registerNodeType("Particles/ParticlesEmitterType",ParticlesEmitterTypeNode);LiteGraph.registerNodeType("Particles/ParticlesMaxAge",ParticlesMaxAgeNode);LiteGraph.registerNodeType("Particles/ParticlesPosition",ParticlesPositionNode);
LiteGraph.registerNodeType("Particles/ParticlesVelocity",ParticlesVelocityNode);LiteGraph.registerNodeType("Particles/ParticlesAcceleration",ParticlesAccelerationNode);LiteGraph.registerNodeType("Particles/ParticlesWiggle",ParticlesWiggleNode);LiteGraph.registerNodeType("Particles/ParticlesOpacity",ParticlesOpacityNode);LiteGraph.registerNodeType("Particles/ParticlesScale",ParticlesScaleNode);LiteGraph.registerNodeType("Particles/ParticlesRotation",ParticlesRotationNode);LiteGraph.registerNodeType("Particles/ParticlesColour",
ParticlesColourNode)}function FileSystem(){}FileSystem.readFile=function(a,b,c){void 0===b&&(b=!0);if(void 0!==App.fs){if(b)return App.fs.readFileSync(a,"utf8");App.fs.readFile(a,"utf8",c)}else{var d=new XMLHttpRequest;d.overrideMimeType("text/plain");d.open("GET",a,!b);d.onreadystatechange=function(){200!==d.status&&0!==d.status||void 0===c||c(d.responseText)};d.send(null);return d.responseText}};
FileSystem.readFileArrayBuffer=function(a){if(void 0!==App.fs){a=App.fs.readFileSync(a);for(var b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c),e=0;e<b;e++)d[e]=a[e];return c}b=new XMLHttpRequest;b.open("GET",a,!1);b.overrideMimeType("text/plain; charset=x-user-defined");b.send(null);return ArraybufferUtils.fromBinaryString(b.response)};
FileSystem.readFileBase64=function(a){if(void 0!==App.fs)return a=App.fs.readFileSync(a),(new Buffer(a)).toString("base64");var b=new XMLHttpRequest;b.open("GET",a,!1);b.overrideMimeType("text/plain; charset=x-user-defined");b.send(null);return Base64Utils.fromBinaryString(b.response)};FileSystem.writeFile=function(a,b){void 0!==App.fs&&(a=App.fs.createWriteStream(a,"utf8"),a.write(b),a.end())};FileSystem.copyFile=function(a,b){void 0!==App.fs&&App.fs.createReadStream(a).pipe(App.fs.createWriteStream(b))};
FileSystem.makeDirectory=function(a){if(void 0!==App.fs)try{App.fs.mkdirSync(a)}catch(b){}};FileSystem.getFilesDirectory=function(a){if(void 0!==App.fs)try{return App.fs.readdirSync(a)}catch(b){}return[]};
FileSystem.copyFolder=function(a,b){if(void 0!==App.fs){FileSystem.makeDirectory(b);for(var c=App.fs.readdirSync(a),d=0;d<c.length;d++){var e=a+"/"+c[d],f=b+"/"+c[d],g=App.fs.statSync(e);g.isDirectory()?FileSystem.copyFolder(e,f):g.isSymbolicLink()?App.fs.symlinkSync(App.fs.readlinkSync(e),f):FileSystem.copyFile(e,f)}}};
FileSystem.chooseFile=function(a,b,c){var d=document.createElement("input");d.type="file";d.accept=void 0!==b?b:"";void 0!==c&&(d.nwsaveas=!0!==c?c:"file");d.onchange=function(e){void 0!==a&&a(d.files)};d.click()};FileSystem.getFileName=function(a){return a.substring(a.lastIndexOf("/")+1,a.lastIndexOf("."))};FileSystem.getFileExtension=function(a){return a.substring(a.lastIndexOf(".")+1,a.length)};
